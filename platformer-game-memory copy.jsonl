{"type":"entity","name":"platformer-game:project","entityType":"software_project","observations":["Title: Platformer Browser Game with Z-Depth Physics","Description: Advanced 2D platformer game featuring 3D collision system, AI behavior trees, skill progression, and modular architecture","Language: Vanilla JavaScript (no frameworks)","Rendering: HTML5 Canvas API","Architecture: Modular system-based design","Unique Features: Z-depth collision system, Behavior Tree AI, Micro skill trees","Status: Active development","Last Updated: December 2025","Complexity: High (6 major systems integrated)","Architecture: Clean separation of concerns, modular systems","Code Quality: Comprehensive documentation, consistent patterns","Development: Active refactoring, performance optimizations","Features: Multiplayer support, advanced AI, skill progression","Performance: 60 FPS target, optimized rendering pipeline","Testing: Development scripts, debug interfaces, visual tools"]}
{"type":"entity","name":"platformer-game:combat-system","entityType":"game_system","observations":["Purpose: Combat resolution and damage calculation engine","Key Features: Attack/defense calculations, critical hits, damage mitigation","Files: combat_system.js","Integration: Used by all combat interactions","Complexity: Medium (damage formulas, balance considerations)","Dependencies: character_info.js, entities.js","Key Functions: resolveAttack(), calculateDamage(), applyCombatResult()","Combat Types: Physical attacks, magical abilities, critical hits","Balance: Damage mitigation formulas, stat-based calculations","Integration Points: Called during entity collisions, skill activations","Death Handling: Entity removal, loot drops, experience rewards","Multiplayer: Supports multiple players in combat scenarios"]}
{"type":"entity","name":"platformer-game:animation-system","entityType":"game_system","observations":["Purpose: Animation management and sprite rendering system","Key Features: State machines, unified entity drawing, Z-depth rendering","Files: Animation System/ (6 files total)","Architecture: Phase 1-5 refactoring completed December 2025","Integration: Core rendering pipeline","Unique: Centralized Z-depth calculations in getZOffset() method","Refactoring: 5-phase animation system overhaul (December 2025)","State Machines: AnimationStateMachine class with transition logic","Rendering: AnimationRenderer handles all entity drawing (sprites, shapes)","Z-Depth: getZOffset() method for unified depth calculations","Performance: Batch rendering, asset caching, frame optimization","Integration: Coordinates with rendering pipeline, entity updates"]}
{"type":"entity","name":"platformer-game:ai-system","entityType":"game_system","observations":["Purpose: Enemy AI using Behavior Tree architecture","Key Features: BT nodes, script system, dynamic difficulty","Files: Behavior Tree/ (6 files), base_enemy.js","Scripts: BOSS_SCRIPTS, ELITE_SCRIPTS, TEST_SCRIPTS","Performance: Optimized with LRU caching and batch operations","Integration: Enemy decision making and behavior","Behavior Trees: Selector, Sequence, Condition, Action node types","Scripts: Dynamic script loading with LRU cache (cache size: configurable)","Enemies: BaseEnemy class with AI integration, thinking duration calculations","Performance: Batch collision detection, optimized distance calculations","Difficulty: Intelligence/rarity multipliers for behavior complexity","Debug: window.debugEnemyScripts interface for development"]}
{"type":"entity","name":"platformer-game:skill-system","entityType":"game_system","observations":["Purpose: Character progression and ability system","Key Features: Micro skill trees, level-based progression, one-per-row system","Files: skills.js, micro_skill_tree.js, data/skill-data.js","UI: Compact skill tree interface","Integration: Character development and combat abilities","Balance: Experience-based leveling system","Progression: LevelBasedSystem and OnePerRowSystem implementations","UI: Micro skill tree interface, compact design for quick access","Data: skill-data.js contains all skill definitions and balance","Activation: executeSkill() with targeting, cooldown management","Balance: Experience-based leveling, stat bonuses, ability unlocks","Integration: Connected to combat system, character progression"]}
{"type":"entity","name":"platformer-game:collision-system","entityType":"game_system","observations":["Purpose: 3D collision detection with Z-depth support","Key Features: Collision buffers, attack collision, movement validation","Unique: Z-depth collision (X, Y, Z coordinates)","Functions: checkHitboxCollision(), canMoveTo(), getBehaviorConstraints()","Performance: Batch collision detection optimization","Integration: Physics, combat, AI systems","3D Physics: X, Y, Z coordinate system for depth-based collisions","Detection: Collision buffers, hitbox validation, boundary checking","Functions: checkHitboxCollision(), canMoveTo(), applyScreenBoundaries()","Optimization: Batch processing, spatial partitioning concepts","Integration: Used by physics, combat, AI, and movement systems","Debug: Visual collision boxes, hurt boxes, attack ranges"]}
{"type":"entity","name":"platformer-game:rendering-system","entityType":"game_system","observations":["Purpose: UI rendering coordination and entity drawing","Key Features: Debug visualization, damage numbers, entity labels","Architecture: Separated from entity drawing (moved to AnimationRenderer)","Integration: Called every frame after game update","Z-Depth: Unified Z calculations across all rendering","Debug: Hurt boxes, attack boxes, collision borders","Architecture: UI coordination layer, separated from entity drawing","Debug Features: Z-lines, entity labels, collision visualization","Performance: 60 FPS target, optimized canvas operations","Layers: Background, entities, UI overlays, debug information","Integration: Called after game update, coordinates with AnimationRenderer","Multiplayer: Supports rendering multiple player views"]}
{"type":"entity","name":"platformer-game:vanilla-js","entityType":"technology","observations":["Type: Programming Language","Usage: Core game logic, no frameworks or libraries","Benefits: Maximum performance, full control, lightweight","Constraints: Manual implementation of complex systems","Integration: All game systems built from scratch"]}
{"type":"entity","name":"platformer-game:canvas-api","entityType":"technology","observations":["Type: HTML5 Rendering API","Usage: 2D graphics rendering with Z-depth simulation","Features: Sprite drawing, debug overlays, UI rendering","Performance: Hardware accelerated, 60 FPS target","Resolution: 1920x1080 canvas dimensions"]}
{"type":"entity","name":"platformer-game:z-depth-physics","entityType":"technology","observations":["Type: Custom 3D collision system in 2D space","Implementation: X, Y, Z coordinate system","Features: Depth-based collision detection, layered rendering","Complexity: Advanced physics simulation","Innovation: Unique approach to 2.5D platforming","Innovation: 2.5D platforming with true depth collision","Implementation: Z-coordinate affects collision and rendering order","Challenges: Manual physics calculations, no physics engine","Benefits: Rich gameplay possibilities, unique platforming mechanics","Performance: Optimized collision detection for 3D space","Integration: Core to collision, rendering, and AI systems"]}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:combat-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:animation-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:ai-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:skill-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:collision-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:rendering-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:vanilla-js","relationType":"built_with"}
{"type":"relation","from":"platformer-game:animation-system","to":"platformer-game:canvas-api","relationType":"uses"}
{"type":"relation","from":"platformer-game:animation-system","to":"platformer-game:z-depth-physics","relationType":"implements"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:vanilla-js","relationType":"built_with"}
{"type":"relation","from":"platformer-game:collision-system","to":"platformer-game:z-depth-physics","relationType":"implements"}
{"type":"relation","from":"platformer-game:rendering-system","to":"platformer-game:canvas-api","relationType":"uses"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:vanilla-js","relationType":"built_with"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:canvas-api","relationType":"uses"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:z-depth-physics","relationType":"features"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:collision-system","relationType":"depends_on"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:collision-system","relationType":"depends_on"}
{"type":"relation","from":"platformer-game:rendering-system","to":"platformer-game:animation-system","relationType":"coordinates_with"}
{"type":"entity","name":"platformer-game:collision-system-detailed","entityType":"implementation_detail","observations":["–¢–∏–ø–æ–≤–µ –∫–æ–ª–∏–∑–∏–∏: hitbox-hitbox (–¥–≤–∏–∂–µ–Ω–∏–µ), attack box-hitbox (–∞—Ç–∞–∫–∏)","Hitbox vs Hitbox –¥–≤–∏–∂–µ–Ω–∏–µ: –ë—É—Ñ–µ—Ä 8px –∑–∞ AI, 2px –∑–∞ –∏–≥—Ä–∞—á, Z-—Ç–æ–ª–µ—Ä–∞–Ω—Å 30 –µ–¥–∏–Ω–∏—Ü–∏","Attack Box vs Hitbox –∞—Ç–∞–∫–∏: –ü—Ä–µ—Ü–∏–∑–Ω–∞ –∫–æ–ª–∏–∑–∏—è –±–µ–∑ –±—É—Ñ–µ—Ä, Z-—Ç–æ–ª–µ—Ä–∞–Ω—Å 10 –µ–¥–∏–Ω–∏—Ü–∏","–í–µ—Ä—Ç–∏–∫–∞–ª–Ω–∞ –¥–µ—Ç–µ–∫—Ü–∏—è: Z-—Ç–æ–ª–µ—Ä–∞–Ω—Å —Å–∏—Å—Ç–µ–º–∞ —Å effectiveZThickness = azThickness + tzThickness","–•–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–Ω–∞ –¥–µ—Ç–µ–∫—Ü–∏—è: Separation Vector –ø–æ–¥—Ö–æ–¥ —Å overlapX/2 –∫–æ—Ä–µ–∫—Ü–∏—è","Per-frame collision: –ò–∑–ø–æ–ª–∑–≤–∞ animation frameData.hitBox –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–Ω–∏ dimensions","Mirroring —Å–∏—Å—Ç–µ–º–∞: –¶–µ–Ω—Ç—ä—Ä-–±–∞–∑–∏—Ä–∞–Ω–æ –æ–±—Ä—ä—â–∞–Ω–µ –Ω–∞ attack/hit boxes –ø—Ä–∏ facing left","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: AI –∑–∞—Å—è–¥–∞–Ω–µ - collision correction —Å 8px AI –±—É—Ñ–µ—Ä","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: –ù–µ—Ç–æ—á–Ω–∏ attack collisions - per-frame animation data"]}
{"type":"entity","name":"platformer-game:combat-system-detailed","entityType":"implementation_detail","observations":["–ò–≥—Ä–∞—á–∏: baseAttack + strength + equipment + buffs - debuffs + skillModifier","–í—Ä–∞–≥–æ–≤–µ: baseAttack * animation-based multiplier (attackBox.width/30)","Defense –∏–≥—Ä–∞—á–∏: baseDefense + armor + shield + buffs - debuffs","Defense –≤—Ä–∞–≥–æ–≤–µ: baseDefense + (level-1)*2","Critical hits: 10% –∑–∞ –∏–≥—Ä–∞—á–∏, 5% –∑–∞ –≤—Ä–∞–≥–æ–≤–µ","Damage calculation: max(0, attackPower - defense) * skillModifier * criticalMultiplier","Blue Slime multipliers: ATTACK_1=1.83x (55px), ATTACK_2/3=1.0x (30px)","Skill tree integration: damageModifier –∫–∞—Ç–æ percentage multiplier","Resource management: ResourceManager —Å mana/energy consumption","Accuracy system: 70% base + skillModifier ¬± dodgeChance","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: Unified combat - —Ä–∞–∑–ª–∏—á–Ω–∏ —Å–∏—Å—Ç–µ–º–∏ –∑–∞ entity types"]}
{"type":"entity","name":"platformer-game:ai-system-detailed","entityType":"implementation_detail","observations":["Architecture: FSM (Finite State Machine) + BT (Behavior Tree) + Script system","BT integration: Universal system —Å rarity/intelligence levels","Thinking phase: IDLE state —Å negative timer –∑–∞ strategic decisions","Pending command system: Queue commands –ø–æ –≤—Ä–µ–º–µ –Ω–∞ thinking phase","Script types: FULL (complete override), PARTIAL (merge), BONUS (enhancement)","Collision-first AI: Direct attack –ø—Ä–∏ player collision –ø–æ –≤—Ä–µ–º–µ –Ω–∞ patrol","Vertical movement: targetZ —Å–∏—Å—Ç–µ–º–∞ —Å vz velocity –∏ boundary enforcement","Behavior constraints: getBehaviorConstraints() —Å boundary –∏ entity checks","Intelligence scaling: basic(3s)/advanced(2s)/expert(1.5s) thinking durations","Context-aware decisions: –†–∞–∑–ª–∏—á–Ω–∏ —Å–∏—Ç—É–∞—Ü–∏–∏ (idle_timeout, player_detected, boundary, etc.)","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: AI loops - thinking phase –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ infinite idle cycles","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–∏ transitions - pending command queuing"]}
{"type":"entity","name":"platformer-game:animation-system-detailed","entityType":"implementation_detail","observations":["State machines: AnimationStateMachine —Å transition logic","Z-depth calculations: getZOffset() method –∑–∞ unified depth rendering","Per-frame data: frameData.hitBox –∏ attackBox –∑–∞ collision","Rendering pipeline: AnimationRenderer handles entity drawing","State management: currentFrame, currentAnimation, facingDirection","Batch operations: Sprite caching –∏ frame optimization","Integration: Coordinates —Å rendering pipeline, entity updates","Performance: 60 FPS target —Å optimized canvas operations","Debug features: Visual hit boxes, attack ranges, collision borders","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: Z-depth rendering - unified getZOffset() calculations"]}
{"type":"entity","name":"platformer-game:problems-solutions","entityType":"implementation_detail","observations":["–ü—Ä–æ–±–ª–µ–º: AI –∑–∞—Å—è–¥–∞–Ω–µ –ø—Ä–∏ –∫–æ–ª–∏–∑–∏–∏ - –†–µ—à–µ–Ω–∏–µ: Collision correction —Å AI –±—É—Ñ–µ—Ä (8px)","–ü—Ä–æ–±–ª–µ–º: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–∏ AI transitions - –†–µ—à–µ–Ω–∏–µ: Pending command queuing system","–ü—Ä–æ–±–ª–µ–º: Infinite idle loops - –†–µ—à–µ–Ω–∏–µ: Thinking phase —Å strategic BT consultation","–ü—Ä–æ–±–ª–µ–º: –ù–µ—Ç–æ—á–Ω–∏ attack collisions - –†–µ—à–µ–Ω–∏–µ: Per-frame animation data –≤–º–µ—Å—Ç–æ static boxes","–ü—Ä–æ–±–ª–µ–º: Hit box mirroring - –†–µ—à–µ–Ω–∏–µ: –¶–µ–Ω—Ç—ä—Ä-–±–∞–∑–∏—Ä–∞–Ω–æ mirroring –ø—Ä–∏ facing left","–ü—Ä–æ–±–ª–µ–º: Unified combat system - –†–µ—à–µ–Ω–∏–µ: Entity type branching –≤ calculateAttackPower()","–ü—Ä–æ–±–ª–µ–º: Z-depth collision complexity - –†–µ—à–µ–Ω–∏–µ: Z-—Ç–æ–ª–µ—Ä–∞–Ω—Å —Å–∏—Å—Ç–µ–º–∞ —Å effective thickness","–ü—Ä–æ–±–ª–µ–º: Animation-based balance - –†–µ—à–µ–Ω–∏–µ: Attack box width ‚Üí damage multiplier conversion","–ü—Ä–æ–±–ª–µ–º: Resource management complexity - –†–µ—à–µ–Ω–∏–µ: ResourceManager abstraction layer","–ü—Ä–æ–±–ª–µ–º: BT context updates - –†–µ—à–µ–Ω–∏–µ: updateBTContext() —Å current game state"]}
{"type":"entity","name":"platformer-game:current-combat-state","entityType":"implementation_detail","observations":["Combat resolver: resolveAttack() –∏ resolveAttackNoResourceCheck() methods","Damage calculation: calculateDamage() —Å attack/defense/skill/critical factors","Enemy combat manager: registerEnemy(), canEnemyAttack(), performEnemyAttack()","Damage numbers: DamageNumberManager —Å floating damage display","Death sequences: updateEnemyDeath() —Å 1.5s blinking animation","Experience rewards: 150 + (level-1)*50 XP –∑–∞ Blue Slime defeat","Gold rewards: 15 + (level-1)*5 gold –∑–∞ Blue Slime defeat","Combat log: max 50 entries —Å timestamp –∏ damage details","UI integration: Character stats display, damage numbers, health bars","Multiplayer support: Combat system —Ä–∞–±–æ—Ç–∏ —Å multiple players"]}
{"type":"entity","name":"platformer-game:collision-mechanics-current","entityType":"implementation_detail","observations":["checkEntityCollision(): Unified collision —Å per-frame hit box priority","checkHitboxCollision(): Attack collision —Å animation frame detection","applyCollisionCorrection(): Separation vector approach –∑–∞ smooth movement","canMoveTo(): Legacy movement collision (pre-unified system)","getBehaviorConstraints(): AI movement validation —Å boundary checks","applyScreenBoundaries(): Universal boundary enforcement —Å hit box awareness","Collision types: movement (buffered), attack (precise), boundary (strict)","Z-depth system: 3D collision –≤ 2D space —Å thickness –∏ tolerance","Buffer system: AI (8px), player movement (2px), attacks (0px)","Performance: Batch collision detection, spatial partitioning concepts"]}
{"type":"entity","name":"platformer-game:ai-behavior-current","entityType":"implementation_detail","observations":["BaseEnemy class: Universal AI –Ω–∞—Å–ª–µ–¥—è–≤–∞–Ω–µ –∑–∞ –≤—Å–∏—á–∫–∏ enemy types","BlueSlime: Common/basic AI —Å attack profile ['light']","FSM states: enemy_idle, enemy_walking, enemy_running, enemy_attack variants","BT commands: idle, patrol, chase, attack, move_up, move_down","Thinking durations: 3s basic, 2s advanced, 1.5s expert","Intelligence modifiers: block/evade/aggression –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ rarity","Script system: FULL/PARTIAL/BONUS overrides –∑–∞ custom behavior","Target selection: X-Z distance –∑–∞ 2.5D detection","Boundary awareness: checkScreenBoundaries() integration","Performance: LRU caching –∑–∞ script loading, batch operations"]}
{"type":"entity","name":"platformer-game:animation-refactoring","entityType":"architectural_change","observations":["5-Phase Refactoring: Completed December 2025, major architecture overhaul","Phase 1 Data Consolidation: Moved animation functions to animation_utils.js, pure data in animation_data.js","Phase 2 State Management: Unified AnimationStateMachine integration with enhanced API","Phase 3 Asset Management: Enhanced SpriteManager with statistics and validation","Phase 4 Generic Entity Support: AnimationRenderer supports all entity types (sprites, shapes, etc.)","Phase 5 Clean Integration: Removed duplicates, unified cross-module communication","Benefits: No code duplication, centralized logic, maintainable changes, consistent API","Files affected: All 6 Animation System files, game.js, render.js integration updates"]}
{"type":"entity","name":"platformer-game:entity-rendering-refactor","entityType":"architectural_change","observations":["AnimationRenderer unification: Now handles ALL entity drawing (animated + non-animated)","render.js simplification: Focuses only on UI coordination and debug visualization","Centralized Z-depth: getZOffset() method for unified depth calculations across all rendering","Eliminated duplication: Single source for rectangle drawing and entity rendering logic","Debug enhancements: Z-lines, entity labels, collision visualization in render.js","Performance benefits: Optimized rendering pipeline, cleaner separation of concerns","Integration changes: render.js calls AnimationRenderer.drawAnimatedEntities() for all entities","Result: No duplication of Z calculations, unified visual effects, maintainable rendering system"]}
{"type":"entity","name":"platformer-game:ai-script-system","entityType":"advanced_feature","observations":["FULL scripts: Complete Behavior Tree override, ignores base system entirely","PARTIAL scripts: Merges with base BT using priority system, enhanced behaviors","BONUS scripts: Additional capabilities layered on top of base system","Script manager: Async loading with LRU caching, performance monitoring","Runtime switching: Boss phase changes, dynamic script loading","Script registry: ENEMY_SCRIPTS Map with BOSS_SCRIPTS, ELITE_SCRIPTS, TEST_SCRIPTS","Validation: Type checking, behavior compatibility verification","Performance: Cache size limits, memory management, batch preloading","Debug interface: window.debugEnemyScripts for development monitoring","Integration: BaseEnemy.initializeScript(), consultBTForBehavior() merge logic"]}
{"type":"entity","name":"platformer-game:resource-management","entityType":"infrastructure_system","observations":["ResourceManager: Centralized asset loading, caching, memory management","Asset types: Images, audio, sprite sheets, skill icons","Loading strategies: Individual loading, batch preloading, progress tracking","Caching system: Asset reuse, memory optimization, unused asset cleanup","Skill icon system: Specialized loader load_skill_icon.js for icon sprite sheets","Asset validation: Path checking, format validation, error handling","Performance monitoring: Loading times, memory usage, cache hit rates","Integration points: Game initialization, runtime asset access, UI rendering","Memory management: unloadUnusedAssets(), asset lifecycle tracking","Error handling: Fallback assets, loading failure recovery, user feedback"]}
{"type":"entity","name":"platformer-game:ui-architecture","entityType":"interface_system","observations":["UI coordinator: ui.js handles state management, component coordination, accessibility","Menu system: menu.js with state transitions, settings, controls configuration","Character stats UI: character_stats_ui.js for stats panels, progress bars, overlays","Rendering coordination: render.js integrates UI with game world rendering","Input handling: UI-specific input processing, mouse/keyboard/controller support","Component architecture: Modular UI components, reusable interfaces","State management: UI state transitions, modal dialogs, overlay management","Performance: Efficient rendering, minimal DOM manipulation, optimized updates","Integration: Called during render phase, coordinates with game state","Accessibility: Screen reader support, keyboard navigation, visual feedback"]}
{"type":"entity","name":"platformer-game:game-state-management","entityType":"core_infrastructure","observations":["Centralized storage: game_state.js manages all game state, entity tracking","Player management: Array management, multiplayer support, player lifecycle","Enemy coordination: Entity registration, lifecycle management, AI coordination","World state: Game environment, boundaries, global game variables","Entity queries: getEntitiesByType(), getAllEntities(), entity filtering","State updates: updateEntity(), state synchronization, change notifications","Multiplayer ready: Supports multiple players, state replication patterns","Memory efficient: Optimized storage, cleanup mechanisms, performance monitoring","Integration points: All game systems access through centralized API","Debug support: State inspection, entity visualization, state validation"]}
{"type":"entity","name":"platformer-game:input-processing","entityType":"user_interaction","observations":["Multi-device support: Keyboard, mouse, gamepad/controller input handling","Input buffering: Debouncing, input queuing, frame-perfect input processing","Device detection: Automatic device recognition, fallback handling","Controller support: Gamepad API integration, button mapping, analog stick processing","State tracking: Key states, button presses, continuous input monitoring","Performance: Efficient polling, minimal CPU usage, optimized update cycles","Integration: input.js called every frame, global input state available","Accessibility: Keyboard-only navigation, customizable controls","Debug features: Input visualization, state logging, input testing tools","Configuration: Control customization, sensitivity settings, device preferences"]}
{"type":"entity","name":"platformer-game:development-guidelines","entityType":"standards_documentation","observations":["Coding standards: Vanilla JavaScript only, conservative library usage, consistent patterns","Project structure: Clear file organization, logical grouping, maintainable architecture","Testing procedures: Development scripts, debug interfaces, visual testing tools","Git workflow: Branch naming, commit standards, PR guidelines, code review process","Performance standards: 60 FPS target, optimized rendering, memory management","Quality assurance: Error handling, logging standards, user feedback systems","Documentation requirements: Code comments, API documentation, integration guides","Refactoring roadmap: 5-phase improvement plan, architectural enhancements","Community standards: Open source compatibility, accessibility compliance","Maintenance procedures: Regular reviews, update schedules, technical debt management"]}
{"type":"entity","name":"platformer-game:integration-patterns","entityType":"development_guide","observations":["Feature addition checklist: Check existing systems, choose appropriate file, follow patterns","Game loop integration: Add to update()/render() functions in game.js/render.js","Entity system extension: Extend BaseEnemy/Base classes, follow inheritance patterns","UI component integration: Add to ui.js, follow rendering coordination patterns","Asset integration: Use resource_manager.js, follow loading and caching patterns","Combat system extension: Integrate with combat_system.js, follow damage/effect patterns","AI behavior addition: Extend BT system, follow script integration patterns","Testing integration: Add debug interfaces, follow validation patterns","Documentation updates: Update PROJECT_FILE_GUIDE.md, maintain integration points","Performance considerations: Follow optimization patterns, monitor frame rates"]}
{"type":"entity","name":"platformer-game:skill-system-manager","entityType":"system_architecture","observations":["SkillTreeManager class: Central logic for skill unlocking and leveling","canUnlockSkill(): Checks prerequisites, skill points, and level requirements","unlockSkill(): Handles leveling progression with dynamic cost calculation","checkPrerequisites(): Supports skill_level, player_level, quest_completed, achievement_unlocked types","applyPassiveEffect(): Dot notation stat modifications (characterInfo.baseDefense, etc.)","getSkillLevel(): Current level tracking per skill","getSkillPointCost(): Dynamic calculation from levelCosts array","hasSkill(): Unlocked skill checking with backwards compatibility"]}
{"type":"entity","name":"platformer-game:micro-skill-progression","entityType":"system_architecture","observations":["4 progression systems for micro skill trees: OnePerRow, LevelBased, Absolute, Instant","OnePerRowSystem: 1 skill per row, requires previous row completion, 1 skill point cost","LevelBasedSystem: Unlocks at player levels (3,5,7,10), no skill points needed","AbsoluteSystem: All skills available for 1 point each, no row restrictions","InstantSystem: One per row but no skill point cost, instant unlocking","Progression delegation: MicroSkillTreeManager routes to appropriate system","canSelectMicroSkill(): System-specific validation logic","selectMicroSkill(): Applies effects and consumes resources per system rules"]}
{"type":"entity","name":"platformer-game:skill-ui-architecture","entityType":"system_architecture","observations":["Grid-based layout: 6√ó5 grid (30 positions) for main page + secondary page","Navigation system: WASD/arrow keys, Enter/Space for unlock, Escape to close","Visual states: üîì Available (blue), ‚úÖ Unlocked (green), üîí Locked (gray)","Cursor system: Yellow glow frame for current selection","Multi-player support: Keys 5,6,7,8 for players 1-4 to open skill trees","Debounce protection: Prevents rapid skill tree switching","Info panel: Shows prerequisites, costs, effects, current/next level comparison","Skill point display: Shows available points and costs for upgrades"]}
{"type":"entity","name":"platformer-game:skill-resource-system","entityType":"system_architecture","observations":["Resource types: MANA (magical skills), ENERGY (physical skills), NONE (no cost)","Data-driven costs: resourceCost and resourceType per skill definition","Resource validation: canAffordSkill() checks before consumption","Consumption timing: Resources consumed at skill activation start","Integration with combat: ResourceManager handles mana/energy tracking","Balance design: Mana for spells, Energy for physical abilities","Resource regeneration: External system handles mana/energy recovery","Cost modifiers: Skills can modify resource costs via resourceCostModifier"]}
{"type":"entity","name":"platformer-game:skill-leveling-system","entityType":"system_architecture","observations":["Dynamic costs: levelCosts array replaces static skillPointsCost","getSkillPointCost(): Calculates cost for current level dynamically","UI feedback: Shows '–ù—É–∂–Ω–∏ —Ç–æ—á–∫–∏ –∑–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ: X' instead of static values","Level progression: Skills can have 1-N levels with different costs","Upgrade tracking: currentLevel vs maxLevel validation","Cost scaling: Progressive difficulty (1,1,2 for basic skills)","Backwards compatibility: unlockedSkills set maintained alongside skillLevels map","Effect application: levelEffects arrays apply different bonuses per level"]}
{"type":"entity","name":"platformer-game:skill-prerequisites","entityType":"system_architecture","observations":["Prerequisites framework: skill_level, player_level, quest_completed, achievement_unlocked","skill_level type: Requires specific skill at minimum level","player_level type: Requires player to reach level threshold","quest_completed type: Future implementation for quest-based unlocks","achievement_unlocked type: Future implementation for achievement rewards","Validation logic: checkPrerequisites() processes all prerequisite types","Display text: Human-readable descriptions for UI feedback","Dependency chains: Skills can depend on other skills creating unlock trees"]}
{"type":"entity","name":"platformer-game:skill-combat-integration","entityType":"system_architecture","observations":["Damage modifiers: skillModifier applied as percentage multiplier in calculateDamage()","Execution timing: executionTime and cooldownTime as data-driven properties","Accuracy system: accuracyModifier affects hit chance calculations","Critical bonuses: criticalChanceModifier stacks with base critical chance","Target expansion: targetCountModifier enables multi-target attacks","Resource efficiency: resourceCostModifier reduces mana/energy requirements","Cooldown reduction: cooldownModifier decreases recovery times","Passive effects: levelEffects applied immediately on skill unlock/upgrade"]}
{"type":"relation","from":"platformer-game:collision-system","to":"platformer-game:collision-system-detailed","relationType":"has_implementation_details"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:combat-system-detailed","relationType":"has_implementation_details"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:ai-system-detailed","relationType":"has_implementation_details"}
{"type":"relation","from":"platformer-game:animation-system","to":"platformer-game:animation-system-detailed","relationType":"has_implementation_details"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:current-combat-state","relationType":"has_current_state"}
{"type":"relation","from":"platformer-game:collision-system","to":"platformer-game:collision-mechanics-current","relationType":"has_current_state"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:ai-behavior-current","relationType":"has_current_state"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:collision-system","relationType":"solves_problems_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:combat-system","relationType":"solves_problems_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:ai-system","relationType":"solves_problems_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:animation-system","relationType":"solves_problems_for"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-system-manager","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:micro-skill-progression","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-ui-architecture","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-resource-system","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-leveling-system","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-prerequisites","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-combat-integration","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system-manager","to":"platformer-game:combat-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:skill-resource-system","to":"platformer-game:resource-management","relationType":"uses"}
{"type":"relation","from":"platformer-game:skill-ui-architecture","to":"platformer-game:ui-architecture","relationType":"extends"}
{"type":"relation","from":"platformer-game:skill-combat-integration","to":"platformer-game:combat-system","relationType":"enhances"}
{"type":"entity","name":"platformer-game:combat-system-unification","entityType":"architectural_decision","observations":["Major architectural improvement that unified player and enemy attack systems","Eliminated separate damage application logic for enemies","All attacks now go through the unified CombatResolver system","Implemented on January 13, 2026","Solved multiple damage application bugs from enemy attacks","Before: Players used CombatResolver.resolveAttack(), enemies applied damage directly","After: All entities use CombatResolver.resolveAttackNoResourceCheck() or resolveAttack()"]}
{"type":"entity","name":"platformer-game:enemy-attack-integration","entityType":"system_integration","observations":["Enemy attacks now use resolveAttackNoResourceCheck() instead of direct damage application","Added skill type mapping from enemy animation types to combat skill types","ATTACK_1 maps to 'basic_attack_light', ATTACK_2 to 'secondary_attack_light', ATTACK_3/RUN_ATTACK to 'basic_attack_medium'","Enemies skip resource consumption since they don't have mana/energy pools","Damage calculation uses unified skill tree parameters for consistency","Combat events are properly generated for enemy attacks"]}
{"type":"entity","name":"platformer-game:enemy-attack-state-management","entityType":"fsm_improvement","observations":["Fixed EnemyAttackState to properly transition to 'enemy_idle' when animation completes","Prevents enemies from staying in attack state indefinitely","Ensures damageDealt flag is properly reset between attacks","Unified attack state lifecycle between players and enemies","Fixed potential infinite attack state loops","Animation completion detection uses frame-based checking"]}
{"type":"entity","name":"platformer-game:enemy-attack-cooldown-system","entityType":"balance_mechanic","observations":["Added 1.5 second cooldown between enemy attacks using BT Cooldown decorator","Prevents rapid-fire enemy attacks that could cause multiple hits","Ensures proper spacing between enemy attack animations","Balances combat tempo and prevents attack spam","Uses existing BT infrastructure for cooldown management","Cooldown applies to attack action in Behavior Tree sequences"]}
{"type":"entity","name":"platformer-game:combat-system-architecture-benefits","entityType":"architectural_benefit","observations":["Single unified combat system eliminates code duplication","Consistent damage calculation across all entity types","Skill tree integration works for both players and enemies","Easier to add new combat mechanics for any entity type","Better maintainability and debugging capabilities","Future-proof architecture for multiplayer combat","Centralized balance adjustments through skill tree parameters"]}
{"type":"relation","from":"platformer-game:combat-system-unification","to":"platformer-game:combat-system","relationType":"enhances"}
{"type":"relation","from":"platformer-game:enemy-attack-integration","to":"platformer-game:combat-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:enemy-attack-state-management","to":"platformer-game:animation-system","relationType":"improves"}
{"type":"relation","from":"platformer-game:enemy-attack-cooldown-system","to":"platformer-game:ai-system","relationType":"enhances"}
{"type":"relation","from":"platformer-game:combat-system-architecture-benefits","to":"platformer-game:project","relationType":"strengthens_architecture"}
{"type":"entity","name":"platformer-game:animation-system-architecture","entityType":"system_architecture","observations":["Comprehensive animation system with 7 interconnected files and 2000+ lines of code","Multi-phase refactoring completed across 5 phases from December 2025","Supports multiple entity types: players (knight), enemies (generic rectangles), specialized enemies (blue_slime)","Advanced features: Z-depth rendering, per-frame collision data, variable frame timing, state machine integration","Architecture: Modular design with clear separation of concerns - data, rendering, state management, utilities","Integration: Deeply integrated with game loop, collision system, AI system, and rendering pipeline","Performance: Optimized sprite caching, batch rendering, memory management, 60 FPS target","Debug features: Comprehensive visualization tools for hit boxes, attack boxes, Z-lines, entity labels","Extensibility: Generic entity support for custom shapes, plugin architecture for new animation types"]}
{"type":"entity","name":"platformer-game:animation-data-management","entityType":"data_system","observations":["Pure data definitions file (animation_data.js) with no logic, only static data structures","Contains ANIMATION_TYPES constants for standardized animation naming","SPRITE_CONFIGS for different entity types with frame dimensions and scaling","ANIMATION_DEFINITIONS with complete animation data for all entity types","Per-frame collision data (hitBox, attackBox) with Z-depth support","Frame timing configurations (duration, frameDurations, loop settings)","Blue Slime specialized definitions with custom animation types","Keyframe definitions for CSS animations and transitions","Animation priorities for state machine transitions","Global exports for cross-module access and ES module compatibility"]}
{"type":"entity","name":"platformer-game:animation-rendering-engine","entityType":"rendering_system","observations":["Centralized canvas drawing system (AnimationRenderer class) for all animated entities","Z-depth calculation with getZOffset() method for 2.5D depth rendering","Per-frame collision box positioning with entity type differentiation","Debug visualization system for hit boxes, attack boxes, and entity information","Generic entity rendering support for sprites, colored rectangles, and custom shapes","Camera support with viewport culling for performance optimization","Batch rendering capabilities for multiple entities with Z-sorting","Sprite sheet rendering with facing direction transformations","Memory efficient rendering with optimized canvas operations","Integration with animation state machines and collision system"]}
{"type":"entity","name":"platformer-game:animation-state-machines","entityType":"state_management","observations":["Finite State Machine implementation for animation transitions (AnimationStateMachine class)","Player states: idle, walking, running, jumping, attack variants (light/medium/heavy/secondary)","Enemy states: idle, walking, running, attack, hurt, dead with specialized Blue Slime support","State transition logic with priority-based animation interruption","Action handling system for player inputs (jump, attack types, movement)","Enemy FSM with AI integration and attack type mapping","Animation completion detection with proper state transitions","Force state capabilities for special cases (death, hurt animations)","Debug capabilities for state inspection and transition logging","Integration with animation system and entity update cycles"]}
{"type":"entity","name":"platformer-game:animation-system-coordinator","entityType":"system_coordinator","observations":["Central AnimationSystem class managing all entity animations and rendering coordination","Entity registration system with automatic state machine creation","Sprite preloading and asset management integration","Update/render loop coordination with proper timing","State machine integration methods for unified entity control","Animation queuing and priority management system","Performance monitoring and statistics tracking","Debug mode capabilities with comprehensive logging","Multi-entity batch operations for efficiency","Cross-system integration points with AI, collision, and rendering systems"]}
{"type":"entity","name":"platformer-game:entity-animation-bridge","entityType":"entity_system","observations":["EntityAnimation class providing per-entity animation state and timing management","Animation queue system for sequential animation playback","Facing direction updates based on entity movement vectors","Movement state machine with idle/walking/running transitions","Variable frame timing support with per-frame duration arrays","Animation completion callbacks and transition handling","Force animation capabilities for high-priority actions","Animation progress tracking and frame-based completion detection","Debug information system for animation state inspection","Integration with entity physics and AI decision systems"]}
{"type":"entity","name":"platformer-game:sprite-management-system","entityType":"asset_management","observations":["SpriteManager class handling loading, caching, and memory management of sprite sheets","Asset categorization system (entitySprites, uiSprites, effectSprites, backgroundSprites)","Loading progress tracking and promise-based async operations","Memory usage estimation and optimization features","Asset validation and error handling capabilities","Batch preloading with progress callbacks","Category-based asset queries and management","Unload functionality for memory cleanup","Performance statistics and monitoring","Integration with animation system and rendering pipeline"]}
{"type":"entity","name":"platformer-game:animation-utility-functions","entityType":"utility_system","observations":["Animation lookup functions for definitions, sprite configs, and keyframe data","Entity type resolution system with fallback support for different entity types","Animation definition validation and sprite sheet verification","Frame count and timing calculations with duration estimation","Animation priority management for state transitions","Debug logging system for animation system status","Supported entity types detection and enumeration","Animation path resolution for Blue Slime and other specialized entities","Global export system for cross-module functionality","ES module compatibility with fallback global assignments"]}
{"type":"entity","name":"platformer-game:z-depth-rendering-system","entityType":"rendering_feature","observations":["2.5D depth rendering system integrated throughout animation pipeline","getZOffset() method calculating depth based on entity.z coordinate","Z-sorting for proper rendering order in multi-entity scenes","Depth-based collision detection integration with hit boxes","Debug visualization with Z-lines and depth indicators","Performance optimization with viewport culling based on Z-depth","Camera system compatibility with depth calculations","Entity layering system preventing visual clipping issues","Mathematical depth calculations for consistent 2.5D experience","Integration with collision system for Z-based hit detection"]}
{"type":"entity","name":"platformer-game:per-frame-collision-data","entityType":"collision_feature","observations":["Advanced collision system with per-frame hitBox and attackBox definitions","Frame-specific collision data integrated into animation definitions","Z-depth support in collision calculations for 3D collision in 2D space","Dynamic hit box positioning based on animation frames and entity state","Attack box calculations with ratio-based dimensions and offsets","Collision buffer system differentiating between AI and player movement","Mirroring system for left-facing entities with proper collision adjustments","Performance optimizations with batch collision detection","Debug visualization tools for collision box inspection","Integration with unified combat system for damage calculation timing"]}
{"type":"entity","name":"platformer-game:multi-phase-animation-refactoring","entityType":"development_process","observations":["5-phase systematic refactoring process completed December 2025","Phase 1: Data consolidation - moved functions to utils, pure data in data file","Phase 2: State management unification - integrated FSM with animation system","Phase 3: Asset management clarification - enhanced SpriteManager with categories","Phase 4: Generic entity support - AnimationRenderer handles all entity types","Phase 5: Clean integration points - unified API and cross-module communication","Benefits achieved: No code duplication, centralized logic, maintainable changes","Files affected: All 7 Animation System files plus integration updates","Performance improvements: Better caching, rendering optimization, memory management","Developer experience: Cleaner APIs, better debugging, extensible architecture"]}
{"type":"relation","from":"platformer-game:animation-system-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:animation-data-management","to":"platformer-game:animation-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:animation-rendering-engine","to":"platformer-game:animation-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:animation-state-machines","to":"platformer-game:animation-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:animation-system-coordinator","to":"platformer-game:animation-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:entity-animation-bridge","to":"platformer-game:animation-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:sprite-management-system","to":"platformer-game:animation-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:animation-utility-functions","to":"platformer-game:animation-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:z-depth-rendering-system","to":"platformer-game:animation-rendering-engine","relationType":"enhances"}
{"type":"relation","from":"platformer-game:per-frame-collision-data","to":"platformer-game:animation-data-management","relationType":"extends"}
{"type":"relation","from":"platformer-game:multi-phase-animation-refactoring","to":"platformer-game:animation-system-architecture","relationType":"transformed"}
{"type":"relation","from":"platformer-game:animation-system-architecture","to":"platformer-game:rendering-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:animation-system-architecture","to":"platformer-game:ai-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:animation-system-architecture","to":"platformer-game:collision-system","relationType":"integrates_with"}
{"type":"entity","name":"platformer-game:behavior-tree-architecture","entityType":"ai_system","observations":["Comprehensive Behavior Tree AI system with 5 interconnected files and 2000+ lines of code","Tick-based evaluation system with SUCCESS/FAILURE/RUNNING status returns","Composite nodes (Selector/Sequence) for decision flow control","Decorator nodes (Cooldown) for behavior modification","Leaf nodes (Condition/Action) for atomic behaviors","Universal enemy BT factory based on rarity/intelligence levels","Boss phase management with dynamic difficulty scaling","Script system integration for custom enemy behaviors","Performance optimizations with caching and batch operations","Debug interfaces for AI monitoring and development"]}
{"type":"entity","name":"platformer-game:bt-node-system","entityType":"ai_component","observations":["BTNode base class with tick() method for evaluation","Selector node: Executes children until one succeeds, priority-based fallback","Sequence node: Executes children in order until one fails, AND logic","Decorator nodes: Modify child behavior (Cooldown prevents spam attacks)","Condition nodes: Boolean checks (hasTarget, targetInRange, canBlock, etc.)","Action nodes: Return commands (idle, patrol, chase, attack, move_up/down)","STATUS enum: SUCCESS, FAILURE, RUNNING for tree traversal","Node composition: Trees built by nesting different node types","Tick evaluation: Depth-first traversal with status propagation","Command generation: Actions return structured command objects to FSM"]}
{"type":"entity","name":"platformer-game:ai-configuration-system","entityType":"ai_configuration","observations":["Rarity-based AI: common/basic, elite/normal, boss/advanced enemy types","Intelligence scaling: thinking duration multipliers (1.0x to 2.0x)","Dynamic behavior configs: patrol radius, chase speed, attack ranges by rarity","Situation-aware adjustments: player_detected (0.6x), attack_complete (0.8x), boundary (0.9x)","Centralized constants: AI timing, collision buffers, screen margins","Behavior constraints: movement boundaries, patrol limits, awareness radius","Configuration helpers: calculateThinkingDuration(), getIntelligenceMultiplier()","Script system types: FULL/PARTIAL/BONUS with validation functions","Boss phase configurations: HP thresholds, capability changes, attack profiles","Performance tuning: cache sizes, load timeouts, batch processing limits"]}
{"type":"entity","name":"platformer-game:ai-utility-functions","entityType":"ai_utility","observations":["Screen boundary detection with configurable margins and caching","Entity collision detection with Z-depth support for 2.5D gameplay","Direction calculations and normalized vectors for AI movement","Obstacle avoidance with collision-free pathfinding","Terrain awareness with ground/air/platform type detection","Patrol waypoint calculation with configurable patterns","Distance utilities with Z-coordinate inclusion for 3D collision","Range queries with entity filtering and sorting by distance","Performance optimizations: batch collision detection, cached boundaries","BT integration helpers: constraint checking, obstacle detection ahead"]}
{"type":"entity","name":"platformer-game:script-system-architecture","entityType":"ai_script_system","observations":["Script types: FULL (100% behavior override), PARTIAL (30-70% selective), BONUS (10-30% additional)","Script validation: structure checking, type validation, behavior compatibility","Runtime script switching for boss phases and dynamic difficulty","Script registry: Map-based storage with auto-registration","Behavior tree integration: script-aware selectors prioritize scripted behaviors","Merge logic: combines base AI with script overrides using priority system","Async loading with error handling and timeout protection","Performance monitoring with load time tracking and cache statistics","Debug interfaces: script inspection, force loading, performance metrics","Test scripts: development tools for AI behavior validation"]}
{"type":"entity","name":"platformer-game:script-management-system","entityType":"ai_management","observations":["EnemyScriptManager class handles loading, caching, runtime management","LRU cache system with configurable size limits (default 20 scripts)","Async script compilation with validation and optimization","Runtime script switching for boss phase changes","Performance stats: cache hit rates, load times, memory usage","Preloading system for batch script loading with progress callbacks","Script validation: structure checking, behavior tree validation","Memory management: cache eviction, size monitoring, cleanup functions","Debug tools: cache inspection, script forcing, performance monitoring","Error handling: load timeouts, validation failures, fallback behaviors"]}
{"type":"entity","name":"platformer-game:boss-phase-system","entityType":"ai_dynamic_system","observations":["BossPhaseManager class handles dynamic difficulty scaling","HP-based phase transitions with configurable thresholds","Capability changes: block/evade abilities unlock at phase changes","Attack profile switching: light ‚Üí light+medium ‚Üí light+medium+heavy","Intelligence scaling: aggression and reaction speed increases","Phase-specific behaviors: special attacks become available","Boss phase configurations stored in bossPhases array","Runtime phase updates during combat","Phase transition triggers: script switching, capability updates","Difficulty progression: HP thresholds (100% ‚Üí 66% ‚Üí 33%) for phase changes"]}
{"type":"entity","name":"platformer-game:bt-performance-optimizations","entityType":"ai_performance","observations":["Screen boundary caching prevents repeated canvas queries","Batch collision detection reduces individual collision checks","Optimized distance calculations with early exit for performance","LRU script caching minimizes loading overhead","Memory usage estimation for asset management","Performance statistics tracking for monitoring","Batch operations for entity processing","Cached constraint calculations for AI decisions","Async script loading prevents blocking operations","Debug performance monitoring interfaces"]}
{"type":"entity","name":"platformer-game:cooldown-system","entityType":"ai_mechanic","observations":["Cooldown decorator prevents behavior spam with configurable timeouts","Attack cooldowns (1.5s default) ensure proper combat pacing","Cooldown tracking with performance.now() for high precision","Decorator pattern: wraps actions without modifying core logic","Cooldown status checking before action execution","Last execution time tracking for interval management","Configurable cooldown periods for different behaviors","Prevention of rapid-fire attacks and movement spam","Integration with BT evaluation for seamless behavior control","Performance monitoring of cooldown effectiveness"]}
{"type":"entity","name":"platformer-game:constraint-based-ai","entityType":"ai_decision_system","observations":["Physical constraint integration for realistic AI movement","Boundary-aware patrol prevents enemies from walking off-screen","Entity collision avoidance using unified collision system","Direction constraint checking (patrol_left/right blocked?)","Dynamic constraint updates during BT consultation","Constraint-based command generation for patrol decisions","Movement validity checking before action execution","Obstacle detection ahead of movement direction","Screen boundary enforcement with configurable margins","Integration with collision system for real-time constraint updates"]}
{"type":"entity","name":"platformer-game:situation-aware-decision-making","entityType":"ai_intelligence","observations":["Context-aware AI decisions based on current situation","Situation types: idle_timeout, patrol_end, screen_boundary, entity_collision, player_detected, attack_complete","Thinking duration adjustments based on situation urgency","Consultation context tracking for BT decision making","Priority-based behavior selection with situation modifiers","Dynamic response scaling (0.6x for player_detected, 0.8x for attack_complete)","Situation-specific behavior overrides","Context propagation through BT evaluation","Decision history for adaptive AI behavior","Integration with FSM thinking phases for strategic decisions"]}
{"type":"entity","name":"platformer-game:target-selection-system","entityType":"ai_targeting","observations":["Z-depth aware target selection for 2.5D gameplay","Distance calculation includes X, Y, Z coordinates","Awareness radius based on enemy rarity/intelligence","Target filtering by entity type and distance","Closest target selection with score-based prioritization","Range queries with entity position validation","Performance optimized entity filtering","Target distance caching for repeated evaluations","Integration with BT condition checking","Debug logging for target selection decisions"]}
{"type":"entity","name":"platformer-game:behavior-tree-integration","entityType":"ai_integration","observations":["BT commands translated to FSM actions for unified AI control","tickEnemyAI() function coordinates BT evaluation and command generation","Context preparation with targets, behaviors, capabilities for BT","Command routing: BT outputs ‚Üí FSM state changes ‚Üí entity actions","Thinking phase integration with BT consultation pauses","Pending command queuing for smooth behavior transitions","BT state persistence across evaluation cycles","Error handling for BT evaluation failures","Performance monitoring of BT tick execution","Debug interfaces for BT state inspection and command flow"]}
{"type":"relation","from":"platformer-game:behavior-tree-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:bt-node-system","to":"platformer-game:behavior-tree-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:ai-configuration-system","to":"platformer-game:behavior-tree-architecture","relationType":"configures"}
{"type":"relation","from":"platformer-game:ai-utility-functions","to":"platformer-game:behavior-tree-architecture","relationType":"supports"}
{"type":"relation","from":"platformer-game:script-system-architecture","to":"platformer-game:behavior-tree-architecture","relationType":"extends"}
{"type":"relation","from":"platformer-game:script-management-system","to":"platformer-game:behavior-tree-architecture","relationType":"manages"}
{"type":"relation","from":"platformer-game:boss-phase-system","to":"platformer-game:behavior-tree-architecture","relationType":"enhances"}
{"type":"relation","from":"platformer-game:bt-performance-optimizations","to":"platformer-game:behavior-tree-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:cooldown-system","to":"platformer-game:bt-node-system","relationType":"enhances"}
{"type":"relation","from":"platformer-game:constraint-based-ai","to":"platformer-game:ai-utility-functions","relationType":"uses"}
{"type":"relation","from":"platformer-game:situation-aware-decision-making","to":"platformer-game:ai-configuration-system","relationType":"implements"}
{"type":"relation","from":"platformer-game:target-selection-system","to":"platformer-game:ai-utility-functions","relationType":"enhances"}
{"type":"relation","from":"platformer-game:behavior-tree-integration","to":"platformer-game:ai-system","relationType":"connects"}
{"type":"relation","from":"platformer-game:behavior-tree-architecture","to":"platformer-game:ai-system","relationType":"implements"}
{"type":"entity","name":"platformer-game:base-enemy-architecture","entityType":"ai_system","observations":["BaseEnemy class: Universal foundation for all enemy types with 1000+ lines of sophisticated AI code","BlueSlime subclass: Specific enemy implementation inheriting universal AI capabilities","BT AI Integration: Rarity/intelligence-based Behavior Tree system with dynamic configurations","Script System Support: FULL/PARTIAL/BONUS script overrides for custom enemy behaviors","FSM Behavior Control: Finite State Machine managing idle/walking/running/attack states","Thinking Phase System: Strategic decision making with configurable timing durations","Vertical Movement: Z-depth movement capabilities with targetZ and boundary enforcement","Collision Awareness: Advanced collision detection and response with boundary constraints","Unified Combat Integration: Proper damage handling through CombatResolver system","Performance Optimizations: Batch operations, caching, and memory management","Runtime Script Switching: Dynamic boss phase changes with script loading","Debug Capabilities: Comprehensive logging and state inspection interfaces"]}
{"type":"entity","name":"platformer-game:bt-ai-integration-system","entityType":"ai_component","observations":["Universal BT Factory: createUniversalEnemyBehaviorTree() based on rarity/intelligence levels","Rarity Levels: common/basic, elite/normal, boss/advanced with different behavior complexity","Intelligence Scaling: basic(3s)/advanced(2s)/expert(1.5s) thinking durations","Dynamic Configurations: ENEMY_BEHAVIORS object with patrol/chase/attack/block/evade settings","BT Context Management: aiContext with self/targets/capabilities/behaviors for decision making","Boss Phase Integration: BossPhaseManager with HP thresholds and capability changes","Attack Profile System: Light/medium/heavy attack selection based on phase capabilities","Intelligence Modifiers: blockChance/evadeChance/aggression scaling per phase","Behavior Tree Creation: Automatic BT generation with rarity/intelligence configurations","Context Updates: Real-time game state integration for BT decision making","Fallback System: Graceful degradation when BT system unavailable"]}
{"type":"entity","name":"platformer-game:enemy-script-system-integration","entityType":"ai_script_system","observations":["Script Configuration: scriptConfig object with scriptId and type (FULL/PARTIAL/BONUS)","Async Initialization: initializeScript() with error handling and validation","Runtime Switching: switchScript() for boss phase changes and dynamic behavior","FULL Scripts: Complete BT override ignoring base system entirely","PARTIAL Scripts: Merges with base BT using priority system and command merging","BONUS Scripts: Additional capabilities layered on top of base system","Script Validation: Type checking, structure validation, compatibility verification","Merge Logic: mergeCommands() function combining script and base commands","Script Context: createScriptContext() for script execution with proper parameters","Error Handling: Fallback to base system when script loading fails","Performance Monitoring: Script loading times and execution statistics"]}
{"type":"entity","name":"platformer-game:fsm-behavior-control-system","entityType":"ai_state_management","observations":["State Machine Integration: AnimationStateMachine for enemy state transitions","Enemy States: enemy_idle/enemy_walking/enemy_running/enemy_attack variants","Idle Behavior: Thinking phase with negative timer countdown to strategic decisions","Walking Behavior: Patrol movement with collision avoidance and vertical movement support","Running Behavior: Chase player with distance and collision checking","Attack Behavior: Animation completion detection and BT consultation for next action","Vertical Movement: targetZ-based movement with boundary enforcement","Collision Response: Boundary hits and entity collisions trigger state changes","Player Detection: Distance-based and collision-based detection during patrol","State Transitions: Command-based transitions with behavior configuration","Debug Logging: Comprehensive state change and behavior logging"]}
{"type":"entity","name":"platformer-game:thinking-phase-system","entityType":"ai_decision_system","observations":["Strategic Decision Making: Idle state as transitional phase for BT consultation","Thinking Duration: Rarity/intelligence-based timing (3s basic, 2s advanced, 1.5s expert)","Negative Timer Logic: Count up from negative value to 0 for smooth transitions","Situation Modifiers: attack_complete(0.8x), player_detected(0.6x), boundary(0.9x) multipliers","Pending Command System: Queue commands during thinking phase for smooth execution","Interruption Handling: Player detection during thinking immediately switches behavior","Context Preservation: Maintains consultation context for BT decision making","Dynamic Timing: getThinkingDuration() with centralized configuration","Fair Gameplay: Minimum 1-second thinking time for player responsiveness","Debug Visualization: Thinking phase logs with duration and interruption tracking","BT Consultation: Strategic behavior decisions during thinking completion"]}
{"type":"entity","name":"platformer-game:vertical-movement-system","entityType":"ai_movement_feature","observations":["Z-Depth Movement: targetZ property for vertical positioning in 2.5D space","Displacement Commands: move_up/move_down with dynamic distance parameters","Boundary Enforcement: Z_MIN/Z_MAX limits with automatic boundary checking","Movement Velocity: vz property for vertical movement speed","Distance Tracking: verticalMovementStartZ for progress calculation","Completion Detection: Target distance reached triggers next behavior","Boundary Collision: Automatic vz reset and behavior transition on boundary hits","Command Generation: Contextual patrol commands respecting Z-boundaries","Debug Logging: Movement progress, boundary hits, and completion tracking","Performance Optimization: Boundary checks during movement updates","Integration: Works with FSM walking state and BT command system"]}
{"type":"entity","name":"platformer-game:enemy-collision-awareness-system","entityType":"ai_collision_system","observations":["Boundary Detection: checkScreenBoundaries() with configurable margins","Entity Collision: detectEntityCollisions() with Z-depth support","Collision Correction: applyCollisionCorrection() with AI buffer (8px)","Player Collision Priority: Direct attack on player collision detection","Boundary Interruption: Screen boundary hits trigger BT consultation","Entity Collision Response: Distance-based corrections with fallback to idle","Movement Validation: Constraint checking before patrol direction selection","Obstacle Detection: Ahead-of-movement collision prediction","Z-Depth Integration: 3D collision in 2D space with thickness support","Performance Buffers: AI buffer (8px) vs player precision (2px) for smooth movement","Debug Visualization: Collision detection and correction logging"]}
{"type":"entity","name":"platformer-game:blueslime-enemy-implementation","entityType":"enemy_implementation","observations":["BlueSlime Subclass: Inherits from BaseEnemy with specialized configurations","Common Rarity: Basic intelligence level with light attack profile","Sprite-based Animation: animationEntityType: 'blue_slime' for specialized sprites","Stats Scaling: maxHealth(80+20/level), baseAttack(8+2/level), speed(40)","Experience Rewards: 150 + 50/level for defeating Blue Slime","Gold Rewards: 15 + 5/level for defeating Blue Slime","Attack Profile: Light attacks only through createAttackProfile() override","Death Sequence: Custom die() method with animation state management","Damage Handling: takeDamage() with hurt animation triggering","Combat Integration: Unified combat system with proper damage application","Level-based Progression: All stats scale with enemy level parameter"]}
{"type":"entity","name":"platformer-game:enemy-combat-integration-system","entityType":"combat_integration","observations":["Character Info: CharacterInfo integration for combat system compatibility","Combat Resolver: takeDamage() calls unified damage application","Resource Management: No resource consumption for enemies (resource-free combat)","Death Handling: die() method with animation state and cleanup timing","Experience Rewards: getExperienceReward() for player progression","Gold Rewards: getGoldReward() for player economy","Damage Feedback: hit flag setting and visual feedback","Combat Registration: enemyCombatManager integration for damage tracking","Unified System: All enemy damage goes through CombatResolver.resolveAttackNoResourceCheck()","Animation Integration: Hurt/death animations triggered by damage events","Debug Logging: Combat events and damage tracking for development"]}
{"type":"entity","name":"platformer-game:enemy-performance-optimizations","entityType":"ai_performance","observations":["Batch Operations: Efficient entity processing and collision detection","Caching System: Boundary calculations and constraint validations","Memory Management: Proper cleanup and resource disposal","Async Operations: Script loading without blocking game loop","Distance Calculations: Optimized Euclidean distance with early exits","Context Updates: Minimal BT context updates for performance","Collision Buffers: AI-specific buffers for smoother movement","State Machine Optimization: Efficient state transitions and validation","Debug Conditional Logging: Performance-aware debug output","Timer Management: Efficient thinking phase countdown logic","Entity Filtering: Spatial queries with distance-based filtering"]}
{"type":"entity","name":"platformer-game:target-selection-system","entityType":"ai_targeting","observations":["X-Z Distance Calculation: 2.5D target selection with Z-coordinate inclusion","Closest Player Algorithm: Distance-based prioritization with entity validation","Awareness Radius: Rarity-based detection ranges (common: 300, elite: 350, boss: 500)","Target Entity Validation: Entity existence and position checking","Distance Caching: Repeated evaluations with performance optimization","BT Context Updates: Real-time target information for decision making","Player Array Processing: Multiple player support with distance sorting","Target Distance Logging: Debug information for AI behavior validation","Entity Type Filtering: Player entity prioritization in target selection","Performance Optimization: Efficient distance calculations and caching"]}
{"type":"entity","name":"platformer-game:enemy-command-execution-system","entityType":"ai_command_system","observations":["Immediate Execution: Arcade-style command execution without delays","Pending Command Queue: executePendingCommand() for smooth transitions","Command Types: idle/patrol/chase/attack/move_up/move_down with parameters","State Machine Integration: Automatic FSM state changes on command execution","Behavior Configuration: Command-specific duration and parameter handling","Vertical Movement Setup: targetZ and vz initialization for Z-depth movement","Patrol Direction Logic: Left/right patrol with constraint-based selection","Attack Type Mapping: Light/medium/heavy attack to FSM action conversion","Debug Logging: Command execution tracking with cyan-colored logs","Error Handling: Graceful fallback for invalid commands","Performance Monitoring: Command execution timing and success rates"]}
{"type":"entity","name":"platformer-game:enemy-initialization-system","entityType":"ai_initialization","observations":["Constructor Parameters: x/y/z position, level, rarity, intelligence, scriptConfig","BT AI Setup: initializeBT() with universal factory configuration","Script System: initializeScript() with async loading and validation","Combat Registration: enemyCombatManager.registerEnemy() for damage tracking","Animation Registration: Automatic animation system integration","FSM Creation: State machine creation after animation registration","Stats Calculation: Level-based scaling for health, attack, defense","Character Info Setup: Combat system compatibility with stat integration","Debug Logging: Comprehensive initialization tracking and error reporting","Memory Cleanup: Proper disposal and unregistering on death","Performance Setup: Caching and optimization configurations"]}
{"type":"relation","from":"platformer-game:base-enemy-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:bt-ai-integration-system","to":"platformer-game:base-enemy-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:enemy-script-system-integration","to":"platformer-game:base-enemy-architecture","relationType":"extends"}
{"type":"relation","from":"platformer-game:fsm-behavior-control-system","to":"platformer-game:base-enemy-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:thinking-phase-system","to":"platformer-game:base-enemy-architecture","relationType":"enhances"}
{"type":"relation","from":"platformer-game:vertical-movement-system","to":"platformer-game:base-enemy-architecture","relationType":"extends"}
{"type":"relation","from":"platformer-game:enemy-collision-awareness-system","to":"platformer-game:base-enemy-architecture","relationType":"supports"}
{"type":"relation","from":"platformer-game:blueslime-enemy-implementation","to":"platformer-game:base-enemy-architecture","relationType":"implements"}
{"type":"relation","from":"platformer-game:enemy-combat-integration-system","to":"platformer-game:base-enemy-architecture","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:enemy-performance-optimizations","to":"platformer-game:base-enemy-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:target-selection-system","to":"platformer-game:base-enemy-architecture","relationType":"supports"}
{"type":"relation","from":"platformer-game:enemy-command-execution-system","to":"platformer-game:base-enemy-architecture","relationType":"executes"}
{"type":"relation","from":"platformer-game:enemy-initialization-system","to":"platformer-game:base-enemy-architecture","relationType":"initializes"}
{"type":"relation","from":"platformer-game:base-enemy-architecture","to":"platformer-game:ai-system","relationType":"implements"}
{"type":"relation","from":"platformer-game:base-enemy-architecture","to":"platformer-game:combat-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:base-enemy-architecture","to":"platformer-game:collision-system","relationType":"uses"}
{"type":"relation","from":"platformer-game:base-enemy-architecture","to":"platformer-game:animation-system","relationType":"integrates_with"}
{"type":"entity","name":"platformer-game:character-info-architecture","entityType":"character_system","observations":["CharacterInfo class: Comprehensive character progression system managing statistics, leveling, and experience","Multi-character support: blue, orange, green, red characters with unique Bulgarian display names","Experience system: Level-based XP requirements (level * 100) with automatic level progression","Stat distribution: Manual allocation system for strength, speed, intelligence with free points","Automatic progression: +1 to each stat per level up, 5 free points for manual distribution","Skill integration: 2 skill points awarded per level for ability unlocking","Resource restoration: Full HP/mana/energy recovery on level up","Combat integration: Links with combat system for stat-based damage calculations","UI methods: Comprehensive interface for stat modification with validation","Bulgarian localization: Native language support for character names and UI feedback","Debug logging: Detailed console output for experience gains and level progression","Performance: Lightweight system with direct stat access and minimal overhead"]}
{"type":"entity","name":"platformer-game:experience-leveling-system","entityType":"progression_system","observations":["Experience calculation: Simple but scalable formula (level * 100 XP for next level)","Level progression: Automatic level advancement when XP threshold is reached","Multi-level support: Handles multiple level-ups from single XP gain","Experience tracking: Current XP, XP to next level, and level display","Level-up rewards: Automatic stat increases, free points allocation, skill points","Resource restoration: Complete HP/mana/energy recovery on level advancement","Experience logging: Detailed console feedback for XP gains and level changes","Progressive difficulty: XP requirements scale with character level","Overflow handling: Multiple level-ups processed sequentially","Validation: XP cannot go negative, level minimum is 1","Integration: Works with player objects for resource and skill point management","Feedback system: Bulgarian language notifications for level progression"]}
{"type":"entity","name":"platformer-game:stat-distribution-system","entityType":"character_mechanic","observations":["Three core stats: Strength (damage), Speed (movement), Intelligence (magic/special abilities)","Base values: All stats start at 10 points","Automatic increases: +1 to each stat per level (strength/speed/intelligence)","Free points system: 5 points awarded per level for manual distribution","Manual allocation: Increase/decrease methods with validation","Stat boundaries: Cannot decrease below auto-level minimum (10 + level - 1)","Point tracking: Free points counter with validation","UI integration: Methods for stat modification from interface","Validation logic: Prevents invalid stat distributions","Balance considerations: All stats have equal base progression","Debug feedback: Console logging for stat changes","Resource cost: 1 free point per stat point increase"]}
{"type":"entity","name":"platformer-game:resource-management-integration","entityType":"character_mechanic","observations":["Level-up restoration: Full recovery of HP/mana/energy when leveling","Resource types: Health (physical damage), Mana (magical abilities), Energy (physical skills)","Automatic restoration: Triggered during levelUp() method","Player integration: Links with player.maxHealth/maxMana/maxEnergy properties","Resource validation: Ensures values don't exceed maximums","Recovery timing: Instant restoration on level advancement","Resource logging: Console feedback for restoration events","Integration points: Works with player object resource management","Resource preservation: Maintains current/maximum ratios","Performance: Lightweight restoration with direct property access","Balance design: Encourages strategic leveling timing","Bulgarian feedback: Native language resource restoration messages"]}
{"type":"entity","name":"platformer-game:bulgarian-localization-system","entityType":"localization_system","observations":["Character names: Bulgarian translations for all four characters (–°–∏–Ω/–û—Ä–∞–Ω–∂–µ–≤/–ó–µ–ª–µ–Ω/–ß–µ—Ä–≤–µ–Ω –≥–µ—Ä–æ–π)","Display names mapping: characterId to localized display names","UI feedback: Bulgarian console messages for experience and leveling","Cultural adaptation: Native language support for Bulgarian players","Name consistency: Standardized naming convention across the game","Localization scope: Character names and progression feedback","Language integration: Direct Bulgarian text in code for immediate feedback","Accessibility: Native language support improves player experience","Translation quality: Accurate Bulgarian translations for game elements","Code organization: Centralized display names in CharacterInfo class","Future extensibility: Foundation for additional Bulgarian localization"]}
{"type":"entity","name":"platformer-game:character-combat-integration","entityType":"combat_integration","observations":["Combat attributes initialization: Links with combat system during CharacterInfo construction","Stat-based combat: Strength/speed/intelligence affect damage calculations","Combat system compatibility: CharacterInfo properties used by combat resolver","Base stats: baseAttack, baseDefense, criticalChance derived from character stats","Combat balance: Stat values directly influence combat effectiveness","Integration timing: Combat attributes initialized in constructor","Stat synchronization: CharacterInfo stats used for combat calculations","Performance: Direct property access for combat calculations","Balance considerations: Base stats (10) plus level bonuses","Critical integration: Critical chance and defense calculations","System coupling: Tight integration between character and combat systems"]}
{"type":"entity","name":"platformer-game:character-ui-interaction-methods","entityType":"interface_system","observations":["Stat modification methods: modifyStrength/Speed/Intelligence() with validation","Increase/decrease logic: Point allocation with free points checking","Boundary validation: Prevents stats below auto-level minimum","UI integration: Methods called from character stats interface","Point management: Automatic free points adjustment","Error handling: Returns false for invalid operations","Validation feedback: Boolean return values for UI response","Stat calculation: Dynamic minimum calculations based on level","Interface compatibility: Designed for UI button interactions","User experience: Immediate feedback through return values","Code organization: Centralized stat modification logic","Safety checks: Prevents negative free points and invalid stat values"]}
{"type":"entity","name":"platformer-game:skill-points-system","entityType":"progression_mechanic","observations":["Skill point rewards: 2 points awarded per level for ability unlocking","Level-up integration: Automatic skill point allocation during levelUp()","Player integration: skillPoints property management","Skill progression: Points used for unlocking abilities and upgrades","Balance design: Consistent 2 points per level reward","Integration timing: Points added during level advancement","Player object linkage: Requires player parameter for skill point assignment","Progress tracking: Total skill points available for spending","UI feedback: Console logging for skill point gains","System coupling: Works with skill tree system","Resource management: Skill points as separate from stat points","Future extensibility: Foundation for skill-based progression"]}
{"type":"relation","from":"platformer-game:character-info-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:experience-leveling-system","to":"platformer-game:character-info-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:stat-distribution-system","to":"platformer-game:character-info-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-management-integration","to":"platformer-game:character-info-architecture","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:bulgarian-localization-system","to":"platformer-game:character-info-architecture","relationType":"localizes"}
{"type":"relation","from":"platformer-game:character-combat-integration","to":"platformer-game:character-info-architecture","relationType":"enhances"}
{"type":"relation","from":"platformer-game:character-ui-interaction-methods","to":"platformer-game:character-info-architecture","relationType":"provides_interface"}
{"type":"relation","from":"platformer-game:skill-points-system","to":"platformer-game:character-info-architecture","relationType":"rewards"}
{"type":"relation","from":"platformer-game:character-info-architecture","to":"platformer-game:skill-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:character-info-architecture","to":"platformer-game:combat-system","relationType":"provides_stats_for"}
{"type":"relation","from":"platformer-game:character-info-architecture","to":"platformer-game:ui-architecture","relationType":"provides_data_for"}
{"type":"entity","name":"platformer-game:collision-system-architecture","entityType":"physics_system","observations":["Comprehensive 3D collision detection system with 400+ lines of advanced collision logic","Z-depth collision support for 2.5D gameplay with X, Y, Z coordinate system","Unified collision system integrating per-frame hit boxes from animation system","Buffer system with configurable collision tolerances (AI 8px, player 2px, attacks 0px)","Separation vector approach for smooth collision correction and position adjustment","Animation integration with per-frame collision data from sprite animations","Hit box mirroring system for proper directional collision handling","Cross-system integration with AI, combat, animation, and physics systems","Performance optimizations with batch collision detection and spatial queries","Debug capabilities with comprehensive collision logging and visualization","Legacy compatibility with fallback to static collision dimensions","Entity filtering and spatial partitioning concepts for optimization"]}
{"type":"entity","name":"platformer-game:3d-collision-detection","entityType":"physics_component","observations":["Z-depth collision detection with effectiveZThickness = azThickness + tzThickness","Z-tolerance system allowing small Z-differences for smooth 2.5D gameplay","Basic collision functions: checkCollision() with X/Y/Z overlap detection","Enhanced collision: checkCollisionWithBuffer() with configurable buffer zones","3D overlap calculation: ax1 < bx2 && ax2 > bx1 && ay1 < by2 && ay2 > by1 && dz <= zTolerance","Buffer support for different collision types (movement vs attack precision)","Performance optimized with early exit conditions for distance checks","Integration with animation system for per-frame collision dimensions","Debug logging capabilities for collision detection troubleshooting","Fallback mechanisms for entities without Z-depth properties"]}
{"type":"entity","name":"platformer-game:unified-collision-system","entityType":"physics_component","observations":["checkEntityCollision() as central collision function with per-frame hit box priority","Animation system integration: getCurrentHitBoxPosition() and getCurrentHitBoxDimensions()","Static fallback: Uses entity.collisionW/H when animation data unavailable","Proposed position support: Allows checking collisions at future positions","Buffer configuration: Different tolerances for movement (8px AI buffer) vs attacks (0px)","Z-tolerance variation: 30 units for movement, 10 units for attacks","Facing direction support: Proper collision handling for left/right facing entities","Performance optimization: Entity filtering and spatial proximity checks","Debug visualization: Collision logging with position and dimension details","Cross-entity compatibility: Works with players, enemies, allies, and projectiles"]}
{"type":"entity","name":"platformer-game:collision-correction-system","entityType":"physics_component","observations":["applyCollisionCorrection() using separation vector approach for position adjustment","Overlap calculation: Determines X/Y overlap amounts between colliding entities","Separation logic: Splits overlap equally between entities for fair correction","Direction determination: Uses entity centers to decide push direction (left/right)","Hit box precision: Uses per-frame hit box data when available for accurate correction","Buffer consideration: Applies AI buffer (8px) for smoother enemy movement","Performance safety: Returns current position if correction calculation fails","Debug logging: Detailed separation calculations and position adjustments","Movement axis support: Currently X-axis focused with Y/Z axis extensibility","Integration requirements: Depends on animation system for hit box data"]}
{"type":"entity","name":"platformer-game:attack-collision-system","entityType":"combat_physics","observations":["checkHitboxCollision() for precise attack collision with animation timing","Animation frame integration: Only damages when attackBox is active in current frame","Attack box positioning: calculateBoxPosition() with facing direction mirroring","Hit box targeting: Uses target's per-frame hit box for damage calculation","Z-depth attack collision: 3D collision for vertical attack ranges","Mirroring system: Proper attack box flipping for left-facing entities","Damage timing: Frame-perfect collision detection for fair combat","Combat integration: Works with unified damage calculation system","Debug logging: Attack collision detection with position details","Performance optimization: Only logs successful hits to reduce spam","FSM compatibility: Integrates with attack state machine transitions"]}
{"type":"entity","name":"platformer-game:movement-validation-system","entityType":"physics_component","observations":["canMoveTo() function for pre-movement collision validation","Proposed position checking: Validates movement before applying velocity","Entity filtering: Excludes self from collision checks for accurate validation","Buffer application: Uses 2px buffer for smoother player movement","Spatial queries: Efficient entity proximity filtering","Legacy compatibility: Works with older collision detection methods","Performance optimization: Early collision detection prevents invalid moves","Integration flexibility: Compatible with both unified and legacy systems","Debug support: Movement validation logging for troubleshooting","Safety mechanism: Prevents entities from moving through solid objects"]}
{"type":"entity","name":"platformer-game:behavior-constraints-system","entityType":"ai_physics","observations":["getBehaviorConstraints() determines physically possible AI behaviors","Screen boundary checking: Prevents patrol beyond canvas limits","Entity collision detection: Blocks patrol when obstacles are present","Vertical movement constraints: Z_MIN/Z_MAX boundary enforcement","Direction validation: Separate left/right movement constraint checking","AI integration: Uses enemyAIUtils for consistent constraint calculations","Constraint sets: allowed/blocked behaviors with reasoning","Performance optimization: Cached boundary calculations","Debug logging: Comprehensive constraint state reporting","BT integration: Provides physical constraints for AI decision making"]}
{"type":"entity","name":"platformer-game:screen-boundaries-system","entityType":"physics_component","observations":["applyScreenBoundaries() with per-frame hit box awareness","Hit box offset calculation: Accounts for sprite positioning relative to entity center","Boundary enforcement: X boundaries based on full hit box visibility","Z-boundary support: Vertical movement constraints (Z_MIN/Z_MAX)","Velocity reset: Stops movement when boundaries are hit","Per-frame precision: Uses current animation frame hit box data","Fallback mechanism: Static dimensions when animation data unavailable","Debug logging: Boundary hit detection and position corrections","Performance: Efficient boundary checking with minimal calculations","Integration: Works with all entity types (players, enemies, projectiles)"]}
{"type":"entity","name":"platformer-game:hit-box-mirroring-system","entityType":"physics_component","observations":["Facing direction mirroring: Proper collision handling for left-facing entities","Center-based calculation: Uses entity center for accurate mirroring","Attack box mirroring: Flips attack boxes around entity center for left attacks","Hit box mirroring: Maintains collision accuracy when facing changes","Distance calculations: Proper offset adjustments for mirrored boxes","Animation system integration: calculateBoxPosition() with mirroring logic","Combat balance: Ensures fair collision detection in both directions","Debug support: Mirroring calculation logging for verification","Performance: Lightweight calculations with cached entity centers","Compatibility: Works with all directional sprite animations"]}
{"type":"entity","name":"platformer-game:buffer-collision-system","entityType":"physics_mechanic","observations":["Configurable buffer zones: AI (8px) for smooth movement, player (2px) for precision, attacks (0px)","Movement tolerance: Larger buffers prevent AI getting stuck in tight spaces","Attack precision: Zero buffer for exact hit detection in combat","Collision type differentiation: Separate logic for movement vs combat collisions","Performance balance: Buffers reduce collision check frequency","AI smoothing: Larger buffers prevent jittery enemy movement","Player responsiveness: Smaller buffers for precise player control","Combat fairness: Exact collision detection for damage calculation","Configurable system: Easy adjustment of buffer values per entity type","Debug visualization: Buffer zone logging for collision troubleshooting"]}
{"type":"entity","name":"platformer-game:animation-collision-integration","entityType":"physics_animation","observations":["Per-frame collision data: frameData.hitBox and attackBox from animation definitions","Animation system coupling: getCurrentHitBoxPosition() and getCurrentHitBoxDimensions()","Frame-based precision: Collision changes with each animation frame","Timing accuracy: Damage occurs only when attackBox is active","Visual consistency: Collision boxes match sprite dimensions","Performance integration: Animation data used efficiently without duplication","State synchronization: Collision updates with animation state changes","Debug compatibility: Animation frame logging with collision details","Flexibility: Supports different collision shapes per animation frame","Cross-system harmony: Animation and physics systems work together seamlessly"]}
{"type":"relation","from":"platformer-game:collision-system-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:3d-collision-detection","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:unified-collision-system","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:collision-correction-system","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:attack-collision-system","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:movement-validation-system","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:behavior-constraints-system","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:screen-boundaries-system","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:hit-box-mirroring-system","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:buffer-collision-system","to":"platformer-game:collision-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:animation-collision-integration","to":"platformer-game:collision-system-architecture","relationType":"enhances"}
{"type":"relation","from":"platformer-game:collision-system-architecture","to":"platformer-game:collision-system","relationType":"extends"}
{"type":"relation","from":"platformer-game:collision-system-architecture","to":"platformer-game:animation-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:collision-system-architecture","to":"platformer-game:ai-system","relationType":"supports"}
{"type":"relation","from":"platformer-game:collision-system-architecture","to":"platformer-game:combat-system","relationType":"enables"}
{"type":"entity","name":"platformer-game:combat-system-architecture","entityType":"combat_system","observations":["Comprehensive RPG combat system with 500+ lines of advanced combat logic","Multi-class architecture with CombatAttributes, CombatCalculator, CombatResolver, EnemyCombatManager, DamageNumberManager","Unified damage calculation system supporting players and enemies with different formulas","Skill tree integration with damageModifier, accuracyModifier, and resource consumption","Resource management through ResourceManager for mana/energy tracking","Critical hit system with 10% player chance and 5% enemy chance","Accuracy/dodge mechanics with 70% base accuracy and skill modifiers","Enemy attack coordination with 1.5 second cooldown system","Death sequence handling with 1.5 second blinking animation","Experience rewards system awarding 200 XP for enemy defeats","Combat event logging with timestamp tracking and damage details","Multiplayer support for multiple players in combat scenarios","Performance optimizations with efficient calculations and minimal overhead","Debug capabilities with comprehensive console logging and event tracking","Integration with animation system for attack timing and visual feedback","Cross-system compatibility with character progression, skill trees, and AI"]}
{"type":"entity","name":"platformer-game:combat-attributes-class","entityType":"combat_component","observations":["CombatAttributes class manages default combat properties for all characters","Base stats: baseAttack (5), baseDefense (0), criticalChance (10%), hitChance (95%)","Combat chances: dodgeChance (5%), blockChance (5%) for defensive mechanics","Magic resistance system: water/fire/air/earth resistances (0-100%)","Character initialization: Links with CharacterInfo during construction","Display utilities: getCriticalChanceDisplay(), getMagicResistanceDisplay() methods","Extensibility: Framework for equipment bonuses and passive abilities","Balance design: Conservative base values requiring progression","Integration: Works with CombatCalculator for stat-based damage calculations","Future-proof: Structure supports additional combat properties","Compatibility: Vanilla JavaScript implementation without dependencies"]}
{"type":"entity","name":"platformer-game:combat-calculator-class","entityType":"combat_component","observations":["CombatCalculator class handles all damage calculation logic and stat modifiers","Attack power calculation: baseAttack + strength + equipment + buffs - debuffs + skillModifier","Defense calculation: baseDefense + equipment + buffs - debuffs","Damage formula: max(0, attackPower - defense) * skillModifier * criticalMultiplier","Skill tree integration: damageModifier read from skillTreeManager for percentage bonuses","Equipment system: weaponBonus, armorBonus, shieldBonus calculations","Buff/Debuff mechanics: activeBuffs/activeDebuffs for temporary modifiers","Critical hit checking: 10% for players, 5% for enemies with Math.random() rolls","Stat validation: Ensures non-negative values with Math.max(0, value)","Performance: Lightweight calculations with direct property access","Debug: Detailed console logging for damage calculation steps","Compatibility: Works with both player and enemy entity types"]}
{"type":"entity","name":"platformer-game:combat-resolver-class","entityType":"combat_component","observations":["CombatResolver class manages attack resolution and combat event flow","resolveAttack() and resolveAttackNoResourceCheck() for different consumption patterns","Resource validation: canAffordSkill() checks before attack execution","Accuracy system: checkAccuracyAndDodge() with hit chance calculations","Damage application: applyDamage() with health reduction and hit feedback","Enemy defeat handling: startEnemyDeathSequence() with death animation triggering","Experience rewards: Automatic 200 XP awards for enemy defeats","Combat logging: logCombatEvent() with timestamp and damage tracking","Event structure: timestamp, attacker, defender, skillType, damageResult, actualDamage","Multi-entity support: Handles players, enemies, and allies in combat","Performance: Efficient event logging with max 50 entries management","Integration: Works with ResourceManager, skillTreeManager, and animation system"]}
{"type":"entity","name":"platformer-game:enemy-combat-manager-class","entityType":"combat_component","observations":["EnemyCombatManager class coordinates enemy attacks in arcade-style RPG combat","Attack cooldown system: 1.5 second default cooldown between enemy attacks","Registration system: registerEnemy()/unregisterEnemy() for combat tracking","Cooldown management: enemyAttackCooldowns Map for per-enemy timing","Attack execution: performEnemyAttack() with cooldown validation","Batch updates: updateCooldowns() for all registered enemies","Combat-ready queries: getReadyEnemies() returns enemies with cooldown <= 0","Performance: Efficient Map-based storage and iteration","Debug support: Console logging for registration and attack events","Balance: Prevents enemy attack spam while maintaining combat flow","Integration: Works with CombatResolver for unified damage application","Extensibility: Framework supports different enemy types and attack patterns"]}
{"type":"entity","name":"platformer-game:damage-number-manager-class","entityType":"ui_component","observations":["DamageNumberManager class handles floating damage number display system","Canvas integration: init() method for canvas reference management","Damage spawning: addDamageNumber() creates floating damage with position and type","Critical hit support: Larger scale (1.5x) and different colors for crits","Animation system: Velocity-based movement with upward drift and horizontal spread","Fade-out mechanics: Alpha reduction over 2-second lifetime","Render integration: render() method called during game rendering loop","Performance: Efficient active number filtering and removal","Visual feedback: Red for normal damage, Yellow for critical hits","Font scaling: 32px base font with critical multiplier","Positioning: World coordinates converted to screen display","Debug: Lifetime tracking and position updates for troubleshooting"]}
{"type":"entity","name":"platformer-game:resource-consumption-system","entityType":"combat_mechanic","observations":["Resource consumption through ResourceManager integration for mana/energy","Skill-based costs: resourceType (mana/energy) and resourceCost from skill definitions","Resource validation: canAffordSkill() checks before attack execution","Consumption timing: Resources consumed at attack start for players","Enemy exceptions: Enemies skip resource consumption (no mana/energy pools)","Resource types: MANA for magical skills, ENERGY for physical skills","Cost modifiers: skill resourceCostModifier for efficiency upgrades","Balance design: Prevents resource-less spam attacks","Integration: Works with skillTreeManager for cost calculations","Performance: Efficient resource checking with minimal overhead","Debug: Resource consumption logging for balance verification","Compatibility: Supports multiple resource types and cost structures"]}
{"type":"entity","name":"platformer-game:accuracy-dodge-system","entityType":"combat_mechanic","observations":["Accuracy system with 70% base hit chance for players","Skill modifiers: accuracyModifier from skill tree affects hit probability","Dodge mechanics: defender dodgeChance (0-50%) reduces hit probability","Hit calculation: accuracy * (1 - dodgeChance) with clamping","Enemy accuracy: Perfect accuracy (100%) for enemies currently","Miss reasons: 'dodged', 'inaccurate' for different failure types","Probability clamping: Hit chance between 5% and 95%","Integration: Works with CombatResolver for attack validation","Balance: Skill tree can improve accuracy or reduce dodge","Performance: Lightweight probability calculations","Debug: Accuracy calculation logging for verification","Extensibility: Framework supports additional accuracy modifiers"]}
{"type":"entity","name":"platformer-game:critical-hit-system","entityType":"combat_mechanic","observations":["Critical hit system with damage doubling on successful crits","Player crit chance: 10% from characterInfo.criticalChance","Enemy crit chance: 5% fixed probability for balance","Crit detection: Math.random() rolls against crit probability","Damage multiplier: 2x damage on critical hits","Skill integration: criticalChanceModifier for additional crit bonuses","Visual feedback: Critical hits flagged in damage results","Balance design: Rare but impactful damage increases","Integration: Works with CombatCalculator for damage application","Performance: Efficient random number generation","Debug: Critical hit logging for balance verification","Future-proof: Structure supports variable crit multipliers"]}
{"type":"entity","name":"platformer-game:combat-event-logging","entityType":"combat_system","observations":["Combat event logging system with timestamp tracking and damage details","Combat log storage: combatLog array with max 50 entries","Event structure: timestamp, attacker, defender, skillType, damageResult, actualDamage","Miss event handling: Special events for missed attacks with reason codes","Log management: Automatic oldest entry removal when limit exceeded","Event queries: getRecentEvents() for retrieving recent combat history","Performance: Efficient array management with shift operations","Debug support: Console logging for all combat events","Integration: Works with UI systems for combat feedback","Data persistence: Combat history available during gameplay","Analysis: Framework for combat statistics and balance monitoring","Multiplayer: Event logging supports multiple player combat scenarios"]}
{"type":"entity","name":"platformer-game:enemy-death-sequence","entityType":"combat_mechanic","observations":["Enemy death sequence with 1.5 second blinking animation","Death state management: isDying flag and deathTimer tracking","Blink mechanics: 3 total blinks with 0.5 seconds per blink cycle","Visual feedback: Alternating visibility during death animation","Experience rewards: 200 XP awarded immediately upon defeat","Performance: updateEnemyDeath() called during game loop","Integration: Works with CombatResolver for defeat handling","Animation coordination: Prevents multiple death sequences","Cleanup: Automatic enemy removal after animation completion","Balance: Consistent timing across all enemy types","Debug: Death sequence logging for verification","Extensibility: Framework supports different death animations"]}
{"type":"relation","from":"platformer-game:combat-system-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:combat-attributes-class","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:combat-calculator-class","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:combat-resolver-class","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:enemy-combat-manager-class","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:damage-number-manager-class","entityType":"ui_component","observations":["DamageNumberManager class handles floating damage number display system","Canvas integration: init() method for canvas reference management","Damage spawning: addDamageNumber() creates floating damage with position and type","Critical hit support: Larger scale (1.5x) and different colors for crits","Animation system: Velocity-based movement with upward drift and horizontal spread","Fade-out mechanics: Alpha reduction over 2-second lifetime","Render integration: render() method called during game rendering loop","Performance: Efficient active number filtering and removal","Visual feedback: Red for normal damage, Yellow for critical hits","Font scaling: 32px base font with critical multiplier","Positioning: World coordinates converted to screen display","Debug: Lifetime tracking and position updates for troubleshooting"]}
{"type":"relation","from":"platformer-game:damage-number-manager-class","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-consumption-system","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:accuracy-dodge-system","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:critical-hit-system","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:combat-event-logging","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:enemy-death-sequence","to":"platformer-game:combat-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:combat-system-architecture","to":"platformer-game:skill-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:combat-system-architecture","to":"platformer-game:resource-management","relationType":"uses"}
{"type":"relation","from":"platformer-game:combat-system-architecture","to":"platformer-game:ui-architecture","relationType":"provides_feedback"}
{"type":"relation","from":"platformer-game:combat-system-architecture","to":"platformer-game:animation-system","relationType":"coordinates_with"}
{"type":"entity","name":"platformer-game:enemy-data-architecture","entityType":"enemy_system","observations":["EnemyData class manages enemy types, stats, and rewards for scalable RPG combat","Level-based progression system with 20% stat increase per level","Three-tier enemy classification: basic/common, elite/advanced, boss/high-threat","Bulgarian localization with native language display names","Reward system for experience and gold with future item drop framework","Data-driven design supporting easy addition of new enemy types","Stat scaling calculations with Math.round() precision for integer values","Critical chance preservation across levels for balance","Integration with BaseEnemy class for AI and combat systems","Future-proof architecture with extensible item drop arrays","Performance optimized with direct property access and minimal overhead","Debug-friendly with comprehensive enemy info structures"]}
{"type":"entity","name":"platformer-game:enemy-types-system","entityType":"enemy_mechanic","observations":["Three enemy archetypes with distinct roles and difficulty levels","Basic enemies: Low threat (50 HP, 3 attack, 1 defense, 50 speed, 5% crit, 200 XP base)","Elite enemies: Medium threat (100 HP, 6 attack, 3 defense, 60 speed, 10% crit, 500 XP base)","Boss enemies: High threat (2100 HP, 12 attack, 8 defense, 40 speed, 20% crit, 2000 XP base)","Stat balance: Bosses have overwhelming health but slower speed for strategic combat","Critical chance progression: Basic (5%) ‚Üí Elite (10%) ‚Üí Boss (20%) for increasing threat","Experience scaling: Basic (200) ‚Üí Elite (500) ‚Üí Boss (2000) for meaningful progression","Combat roles: Basic for quantity, Elite for quality, Boss for challenge","Difficulty curve: 2x health/attack/defense from Basic to Elite, 21x/2x/2.7x from Elite to Boss","Speed variations: Elite fastest (60), Basic medium (50), Boss slowest (40) for tactical depth","Strength scaling: Basic (5) ‚Üí Elite (8) ‚Üí Boss (15) for damage progression"]}
{"type":"entity","name":"platformer-game:level-scaling-mechanics","entityType":"enemy_mechanic","observations":["Linear scaling formula: stat * (1 + (level - 1) * 0.2) for 20% increase per level","Integer precision: Math.round() ensures clean stat values without decimals","Critical chance preservation: No scaling to maintain base difficulty ratios","Speed conservation: Movement speed remains constant across levels","Level multiplier calculation: 1 + (level-1) * 0.2 creates progressive difficulty","Base level (1): No scaling applied, raw baseStats used","Level 2: 1.2x multiplier (+20% increase)","Level scaling: Each level adds 20% to previous level's stats","Experience reward scaling: Follows same formula for meaningful XP progression","Balance design: Consistent scaling prevents exponential difficulty spikes","Performance: Lightweight calculations with direct multiplication","Debug support: Clear scaling formula for balance verification"]}
{"type":"entity","name":"platformer-game:enemy-reward-system","entityType":"progression_system","observations":["Experience rewards: Basic (50), Elite (100), Boss (200) base values","Gold rewards: Basic (10), Elite (25), Boss (100) currency progression","Level scaling: Both XP and gold scale with 20% per level formula","Progression incentives: Higher tier enemies provide better rewards","Experience balance: Boss provides 4x Basic, 2x Elite for meaningful advancement","Gold economy: Boss provides 10x Basic, 4x Elite for strategic resource management","Reward structure: Separate experience (character progression) and gold (economy)","Future item drops: Empty arrays ready for loot table implementation","Reward calculation: getRewardsForType() with scaling applied","Integration points: Experience feeds character leveling, gold feeds economy","Balance design: Rewards scale with difficulty and threat level","Extensibility: Framework supports additional reward types (items, buffs, etc.)"]}
{"type":"entity","name":"platformer-game:enemy-bulgarian-localization","entityType":"localization_system","observations":["Native Bulgarian enemy names: '–û—Å–Ω–æ–≤–µ–Ω –≤—Ä–∞–≥', '–ï–ª–∏—Ç–µ–Ω –≤—Ä–∞–≥', '–ë–æ—Å'","Cultural adaptation: Bulgarian terms for game immersion","Display name mapping: enemyType to localized string conversion","getDisplayName() method: Centralized localization access","Language consistency: Standardized Bulgarian terminology","Player experience: Native language improves engagement","Code organization: Localized strings within EnemyData class","Translation quality: Accurate Bulgarian gaming terminology","Accessibility: Native language support for Bulgarian players","Future extensibility: Foundation for additional localizations","Integration: Works with UI systems and combat feedback","Consistency: Same localization pattern as character names"]}
{"type":"entity","name":"platformer-game:enemy-future-expansion-framework","entityType":"development_framework","observations":["Extensible enemy type system: Easy addition of new enemy classifications","Item drop framework: Empty items arrays ready for loot implementation","Reward system extensibility: Framework supports new reward types","Stat system flexibility: Base stats structure supports additional properties","Localization ready: Display name mapping supports new enemy types","Level scaling universal: Formula applies to any new enemy stats","Data-driven design: JSON-like structure for easy modification","Balance framework: Consistent scaling and reward patterns","Integration hooks: Ready for AI, combat, and animation system integration","Performance considerations: Lightweight structure supports expansion","Debug support: getEnemyInfo() provides complete data inspection","Community contribution: Clear structure for adding new enemy types"]}
{"type":"entity","name":"platformer-game:enemy-stat-balance-design","entityType":"game_balance","observations":["Health progression: Basic (50) ‚Üí Elite (100) ‚Üí Boss (2100) creates difficulty curve","Attack scaling: Basic (3) ‚Üí Elite (6) ‚Üí Boss (12) for damage progression","Defense balance: Basic (1) ‚Üí Elite (3) ‚Üí Boss (8) provides defensive scaling","Speed variations: Elite (60) fastest for mobility, Boss (40) slowest for strategy","Critical chance: 5% ‚Üí 10% ‚Üí 20% increases threat unpredictability","Strength scaling: 5 ‚Üí 8 ‚Üí 15 for consistent damage multipliers","Experience rewards: 50 ‚Üí 100 ‚Üí 200 for meaningful progression incentives","Gold rewards: 10 ‚Üí 25 ‚Üí 100 creates economic progression","Level multipliers: 20% per level adds consistent difficulty scaling","Combat pacing: Speed differences create tactical variety","Threat assessment: Clear power scaling from basic to boss encounters","Balance testing: Framework supports stat adjustment and verification"]}
{"type":"relation","from":"platformer-game:enemy-data-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:enemy-types-system","to":"platformer-game:enemy-data-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:level-scaling-mechanics","to":"platformer-game:enemy-data-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:enemy-reward-system","to":"platformer-game:enemy-data-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:enemy-bulgarian-localization","to":"platformer-game:enemy-data-architecture","relationType":"localizes"}
{"type":"relation","from":"platformer-game:enemy-future-expansion-framework","to":"platformer-game:enemy-data-architecture","relationType":"extends"}
{"type":"relation","from":"platformer-game:enemy-stat-balance-design","to":"platformer-game:enemy-data-architecture","relationType":"balances"}
{"type":"relation","from":"platformer-game:enemy-data-architecture","to":"platformer-game:combat-system","relationType":"provides_data_for"}
{"type":"relation","from":"platformer-game:enemy-data-architecture","to":"platformer-game:character-info-architecture","relationType":"provides_rewards_for"}
{"type":"relation","from":"platformer-game:enemy-data-architecture","to":"platformer-game:base-enemy-architecture","relationType":"provides_stats_for"}
{"type":"entity","name":"platformer-game:game-state-management-architecture","entityType":"core_infrastructure","observations":["GameState class: Comprehensive entity management system with 150+ lines of critical game infrastructure","Map-based storage: ID ‚Üí entity mapping for O(1) constant-time entity access and retrieval","Dual storage paradigm: Map for internal storage + specialized arrays for specific entity types","Entity lifecycle management: Automatic ID assignment, type tagging, add/remove operations with validation","Player management integration: Separate players array for backwards compatibility and multiplayer support","Bulgarian documentation: Native language comments and console logging for Bulgarian developers","Performance optimization: Map-based lookups avoid linear searches, direct access patterns","Memory management: clear() method for complete state reset, proper cleanup mechanisms","Debug capabilities: getDebugInfo() with real-time statistics and entity type breakdowns","Integration hub: Central point connecting AI, combat, rendering, and physics systems","Type-based categorization: entityType property system for efficient filtering and queries","Error handling: Comprehensive validation with warnings for non-existent entities and invalid operations"]}
{"type":"entity","name":"platformer-game:entity-storage-management-system","entityType":"data_structure","observations":["Map-based storage: ES6 Map with entity ID keys for constant-time O(1) access operations","Incremental ID system: nextEntityId counter ensuring unique entity identification across game sessions","Entity registration: Automatic ID assignment and entityType tagging during addEntity() operations","Reference management: Direct object references stored in Map for immediate access","Storage efficiency: Map provides better performance than arrays for frequent lookups","Memory optimization: No duplicate storage, single source of truth for entity data","Type annotation: entityType property automatically set during registration","ID persistence: Entity IDs remain consistent throughout entity lifecycle","Removal handling: Clean deletion from Map with proper reference cleanup","Query preparation: Map structure enables efficient filtering and iteration","Scalability: Map can handle hundreds of entities without performance degradation","Debug support: Direct Map inspection for development and troubleshooting"]}
{"type":"entity","name":"platformer-game:player-management-integration","entityType":"multiplayer_system","observations":["Backwards compatibility: players array maintained alongside Map for legacy code support","Player registration: Automatic addition to players array when entityType === 'player'","Dual tracking: Entities stored in both Map and players array for different access patterns","Multiplayer foundation: players array structure ready for multiple player management","Player lifecycle: Automatic removal from players array during entity deletion","Access patterns: Map for ID-based access, array for ordered player iteration","Type validation: Strict 'player' type checking for players array management","Player queries: getEntitiesByType('player') returns from Map, players array for direct access","Synchronization: Both storage mechanisms kept in sync during add/remove operations","Future extensibility: players array can be extended for player-specific features","Performance balance: Map for fast lookups, array for sequential operations","Debug consistency: Player counts tracked in both systems for validation"]}
{"type":"entity","name":"platformer-game:entity-query-access-systems","entityType":"query_system","observations":["getEntitiesByType(): O(n) filtering operation returning arrays of entities by type","getAllEntities(): Complete entity collection for rendering and global operations","getEntity(): O(1) direct access by ID using Map lookup","getEntityId(): Reverse lookup finding ID for entity reference","hasEntity(): O(1) existence checking without full retrieval","getEntityCount(): Type-specific counting with optional total entity count","Type-based filtering: Efficient entity categorization for system-specific queries","Performance optimization: Map lookups for ID-based operations, array operations for type filtering","Query flexibility: Support for single entity access and bulk collection operations","Debug queries: getDebugInfo() providing comprehensive state statistics","Validation support: hasEntity() for safe entity existence checking","Integration ready: Query methods designed for AI, combat, and rendering system needs"]}
{"type":"entity","name":"platformer-game:entity-lifecycle-management","entityType":"entity_system","observations":["addEntity(): Complete entity registration with ID assignment, type tagging, and storage","removeEntity(): Safe entity removal with existence checking and cleanup","ID assignment: Automatic incremental ID generation and entity.id property setting","Type management: entityType parameter with default 'neutral' classification","Player integration: Special handling for player entities in dual storage system","Validation: Existence checking before operations with appropriate warnings","Cleanup: Proper removal from all storage mechanisms (Map and arrays)","Reference management: Direct object references maintained throughout lifecycle","State consistency: Both Map and specialized arrays kept synchronized","Debug logging: Console output for all add/remove operations with entity details","Performance: O(1) Map operations with minimal overhead","Error recovery: Graceful handling of invalid operations and missing entities"]}
{"type":"entity","name":"platformer-game:debug-monitoring-features","entityType":"development_tool","observations":["getDebugInfo(): Real-time statistics generation with entity type breakdowns","Type counting: Automatic categorization and counting of entities by entityType","Player tracking: Dedicated player count monitoring for multiplayer validation","Statistics aggregation: Total entity count with per-type distribution","Performance monitoring: Entity count tracking for memory usage assessment","State inspection: Complete game state visibility for debugging purposes","Console logging: Informative add/remove messages with entity details","Development support: Tools for understanding entity distribution and system load","Validation checks: hasEntity() and getEntityId() for entity integrity verification","Memory awareness: clear() method with logging for complete state reset","Debug integration: Designed for development workflow and troubleshooting","Quality assurance: Comprehensive state monitoring for game stability"]}
{"type":"entity","name":"platformer-game:performance-characteristics","entityType":"performance_system","observations":["Map-based efficiency: O(1) constant-time complexity for ID-based entity access","Array-based queries: O(n) linear complexity for type-based filtering operations","Storage optimization: Map provides better memory efficiency than object-based storage","Lookup performance: Direct Map.get() operations faster than array.find() methods","Scalability: Map can handle large numbers of entities without performance degradation","Memory usage: Efficient storage with minimal overhead per entity","Query optimization: Type-based arrays pre-filtered for common access patterns","Dual storage trade-offs: Map for speed, arrays for ordered access","Performance monitoring: Entity count tracking enables performance analysis","Optimization opportunities: Map structure supports future indexing improvements","Development performance: Debug operations remain lightweight during gameplay","Production ready: Performance characteristics suitable for real-time game execution"]}
{"type":"entity","name":"platformer-game:game-state-system-integration","entityType":"integration_system","observations":["AI system integration: getEntitiesByType('enemy') for AI target selection and pathfinding","Combat system dependency: getAllEntities() for collision detection and attack resolution","Rendering system connection: getAllEntities() for entity drawing and Z-sorting","Physics integration: Entity access for collision system and movement validation","Multiplayer support: players array for multiple player management and coordination","State synchronization: Central state management for game loop consistency","Entity sharing: Single source of truth prevents data duplication across systems","Lifecycle coordination: Entity creation/removal triggers system updates","Performance coordination: Centralized entity storage optimizes cross-system queries","Debug integration: getDebugInfo() provides system-wide state visibility","Future extensibility: Architecture supports additional game systems integration","System decoupling: Clean interfaces allow independent system development"]}
{"type":"entity","name":"platformer-game:entity-type-categorization","entityType":"classification_system","observations":["entityType property: String-based categorization system for entity classification","Standard types: 'player', 'enemy', 'ally', 'neutral' with extensible type system","Type assignment: Automatic during addEntity() with configurable defaults","Query optimization: Type-based filtering enables efficient system-specific queries","AI compatibility: Enemy types accessed by AI systems for target selection","Combat integration: Player/enemy types used for damage calculation and resolution","Rendering support: Type-based rendering decisions for visual differentiation","System specialization: Different systems can focus on specific entity types","Type validation: Consistent type checking across all operations","Extensibility: New entity types easily added without system modification","Debug support: Type distribution tracking in debug statistics","Performance: Type-based queries reduce unnecessary entity processing"]}
{"type":"relation","from":"platformer-game:game-state-management-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:entity-storage-management-system","to":"platformer-game:game-state-management-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:player-management-integration","to":"platformer-game:game-state-management-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:entity-query-access-systems","to":"platformer-game:game-state-management-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:entity-lifecycle-management","to":"platformer-game:game-state-management-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:debug-monitoring-features","to":"platformer-game:game-state-management-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:performance-characteristics","to":"platformer-game:game-state-management-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:game-state-system-integration","to":"platformer-game:game-state-management-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:entity-type-categorization","to":"platformer-game:game-state-management-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:game-state-management-architecture","to":"platformer-game:ai-system","relationType":"provides_entities_for"}
{"type":"relation","from":"platformer-game:game-state-management-architecture","to":"platformer-game:combat-system","relationType":"provides_entities_for"}
{"type":"relation","from":"platformer-game:game-state-management-architecture","to":"platformer-game:collision-system","relationType":"provides_entities_for"}
{"type":"relation","from":"platformer-game:game-state-management-architecture","to":"platformer-game:rendering-system","relationType":"provides_entities_for"}
{"type":"relation","from":"platformer-game:game-state-management-architecture","to":"platformer-game:animation-system","relationType":"provides_entities_for"}
{"type":"entity","name":"platformer-game:game-loop-architecture","entityType":"core_system","observations":["Main game orchestration system with 900+ lines of comprehensive game logic","RequestAnimationFrame loop with precise timing calculations and delta time tracking","Update/render cycle separation with clear responsibility boundaries","Animation system integration with async initialization and state machine coordination","Damage number system updates for floating damage feedback","Enemy combat manager cooldown updates with configurable attack intervals","Resource manager regeneration for all entities with consistent timing","Menu system coordination preventing gameplay updates during UI interactions","Performance monitoring with 60 FPS target and frame rate optimization","Debug integration with comprehensive logging and development tools","Bulgarian localization with native language console messages","Backwards compatibility with legacy system fallbacks and migration support"]}
{"type":"entity","name":"platformer-game:multiplayer-character-selection","entityType":"ui_system","observations":["4-player character selection system with device detection and dynamic UI","Player joining mechanism with 1-4 number keys and gamepad button support","Character assignment logic with first available character auto-selection","Confirmation system requiring all joined players to confirm before starting","Device detection with keyboard + gamepad enumeration and status display","Selection cycling with next/previous navigation skipping taken characters","Bulgarian character names with cultural adaptation and localization","UI state management with temporary/confirmed selection states","Auto-confirmation for Players 3&4 to facilitate testing and development","Start button logic with single-player and multiplayer confirmation rules","Player removal system with selection cleanup and UI state reset","Status display with joined player counts and device detection information"]}
{"type":"entity","name":"platformer-game:game-initialization-system","entityType":"startup_system","observations":["Canvas setup with 1920x1080 resolution and 2D context initialization","Animation system async initialization with promise-based loading","GameState system creation with entity management and ID assignment","Player creation with CharacterInfo integration and color-based character selection","Enemy spawning with Blue Slime creation and position scaling for different canvases","Animation system registration with entity type specification and state machine setup","FSM initialization for both players and enemies with behavior state management","Enemy combat manager registration for attack coordination and cooldowns","Resource manager setup with mana/energy regeneration for all entities","Menu system initialization for UI coordination and skill tree management","Responsive positioning with canvas size scaling (900‚Üí1920 width adjustment)","Debug logging throughout initialization with success/failure status tracking"]}
{"type":"entity","name":"platformer-game:input-processing-integration","entityType":"input_system","observations":["Skill tree key handling with 3-tier toggle system (keys 5/6/7/8 for players 1-4)","Tab navigation within skill trees (t/y/u/i keys for page switching)","Character stats key handling (keys 9/0/-/= for players 1-4)","300ms debounce system preventing rapid menu toggling","Per-player menu management with individual skill tree and stats access","Menu state coordination preventing gameplay during UI interactions","Controller support with gamepad enumeration and button mapping","Keyboard override for skill tree and stats access during gameplay","Input validation with player existence checks and menu state verification","Debug logging for input processing and state transitions","Performance optimization with key press tracking and state management","Integration with menu system for proper UI state transitions"]}
{"type":"entity","name":"platformer-game:combat-resolution-system","entityType":"combat_orchestration","observations":["FSM-based combat resolution with state machine attack detection","Player attack processing with collision detection and damage calculation","Enemy attack coordination with unified damage application system","Damage dealing flags to prevent multiple hits per attack animation","Combat event logging with attacker/defender tracking and damage results","Floating damage numbers with critical hit color differentiation","Experience rewards and gold distribution for enemy defeats","Death sequence triggering with animation state management","Combat resolver integration with unified damage calculation","Resource consumption validation for skill-based attacks","Hit flag management for visual feedback and damage prevention","Debug logging for combat events with detailed state information"]}
{"type":"entity","name":"platformer-game:enemy-management-system","entityType":"ai_orchestration","observations":["BT-based AI updates for Blue Slime with intelligent behavior patterns","Simple AI fallback for other enemy types with random attack generation","Enemy movement physics with boundary checking and collision response","Death sequence updates with 1.5-second blinking animation and cleanup","Enemy respawn system with 2-second delay and full system reintegration","Combat manager cooldown updates with configurable attack intervals","Hit flag reset for visual feedback consistency","Boundary interruption detection for AI behavior adaptation","Performance optimization with conditional updates for dying enemies","Debug logging for AI decisions and state transitions","Integration with game state for entity lifecycle management","Coordination with animation system for state-based behavior control"]}
{"type":"entity","name":"platformer-game:animation-coordination-system","entityType":"rendering_orchestration","observations":["Animation system updates after physics for velocity-based state changes","State machine coordination for player and enemy animation transitions","Animation registration during game initialization with entity type mapping","FSM integration with animation state changes and transition handling","Per-frame animation progression with timing and frame management","Sprite rendering coordination with Z-depth and layering support","Animation completion callbacks for state machine synchronization","Debug information access for animation state inspection","Performance optimization with batch animation processing","Integration with rendering pipeline for visual consistency","State persistence across animation cycles and transitions","Error handling for missing animation systems and fallback behaviors"]}
{"type":"entity","name":"platformer-game:resource-regeneration-system","entityType":"gameplay_mechanic","observations":["Resource manager integration with per-entity regeneration tracking","Mana and energy recovery with consistent timing across all entities","Regeneration updates called during main game loop with delta time","Player resource synchronization with CharacterInfo mana/energy values","Enemy resource management with resource-free combat mechanics","Performance optimization with efficient Map-based resource tracking","Resource validation and bounds checking during regeneration","Integration with combat system for resource consumption tracking","Debug support for resource state monitoring and regeneration rates","Balance design with configurable regeneration rates and caps","System-wide resource coordination across all game entities","Error handling for missing resource managers and invalid entities"]}
{"type":"entity","name":"platformer-game:menu-system-integration","entityType":"ui_orchestration","observations":["Skill tree management with per-player access and 3-tier toggle system","Character stats UI with individual player stat windows and modifications","Menu state coordination preventing gameplay updates during UI interactions","Skill tree page navigation with tab-based switching (t/y/u/i keys)","Menu initialization during game startup with UI component setup","Performance optimization with conditional updates during menu display","Integration with input system for key handling and state management","UI state persistence and restoration for seamless transitions","Debug support for menu state inspection and transition logging","Accessibility features with keyboard navigation and visual feedback","Multiplayer support with per-player menu access and coordination","Error handling for missing menu systems and invalid player references"]}
{"type":"entity","name":"platformer-game:debug-development-features","entityType":"development_tool","observations":["Comprehensive console logging with Bulgarian language messages","Combat event debugging with detailed damage and state information","Player initialization logging with success/failure status tracking","Enemy AI decision logging with behavior state transitions","Animation system debugging with state machine and frame information","Input processing logging with key press and state change tracking","Resource management debugging with regeneration and consumption details","Menu system logging with toggle states and navigation information","Performance monitoring with entity counts and update timing","Error handling with graceful fallbacks and warning messages","Development shortcuts for testing (auto-confirmation for players 3&4)","Backwards compatibility logging with legacy system migration tracking"]}
{"type":"entity","name":"platformer-game:entity-sorting-rendering","entityType":"rendering_system","observations":["Z-depth entity sorting for proper 2.5D rendering order","getSortedEntitiesForRendering() function with Y-Z coordinate calculation","Enemy health status calculation with color-coded visual feedback","Health percentage computation with damage state categorization","Bulgarian status text with cultural localization ('–ñ–∏–≤', '–†–∞–Ω–µ–Ω', '–ö—Ä–∏—Ç–∏—á–Ω–æ')","Color-coded health display (green/yellow/orange/red progression)","Integration with rendering pipeline for UI overlay display","Performance optimization with efficient entity iteration","Debug support for health calculation and status determination","Accessibility features with clear visual health indicators","Multiplayer compatibility with per-entity health tracking","Error handling for missing enemy data and invalid health values"]}
{"type":"relation","from":"platformer-game:game-loop-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:multiplayer-character-selection","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:game-initialization-system","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:input-processing-integration","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:combat-resolution-system","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:enemy-management-system","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:animation-coordination-system","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-regeneration-system","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:menu-system-integration","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:debug-development-features","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:entity-sorting-rendering","to":"platformer-game:game-loop-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:game-loop-architecture","to":"platformer-game:animation-system","relationType":"coordinates_with"}
{"type":"relation","from":"platformer-game:game-loop-architecture","to":"platformer-game:combat-system","relationType":"orchestrates"}
{"type":"relation","from":"platformer-game:game-loop-architecture","to":"platformer-game:ai-system","relationType":"manages"}
{"type":"relation","from":"platformer-game:game-loop-architecture","to":"platformer-game:resource-management","relationType":"coordinates"}
{"type":"relation","from":"platformer-game:game-loop-architecture","to":"platformer-game:ui-architecture","relationType":"integrates_with"}
{"type":"entity","name":"platformer-game:input-handling-architecture","entityType":"input_system","observations":["Sophisticated input handling system with state-based filtering and menu/gameplay separation","50+ lines of intelligent keyboard input management with context-aware key processing","Event-driven architecture using DOM keydown/keyup events with capture phase priority","State-based input filtering preventing gameplay input during menus and start screen","Menu key priority system ensuring UI controls work regardless of game state","Bulgarian documentation with native language comments for Bulgarian developers","Global key state management with window.keys export for cross-module access","Performance optimized with efficient event handling and minimal processing overhead","Debug capabilities with comprehensive console logging for input event tracking","Integration with game state system for proper menu/gameplay transitions","Backwards compatibility with default values for undefined global state","Error prevention with capture: true event handling to ensure input priority","Utility functions for key state checking with isKeyPressed() helper method"]}
{"type":"entity","name":"platformer-game:state-based-input-filtering","entityType":"input_mechanic","observations":["Intelligent input filtering based on current game state and UI conditions","Menu keys always active: Escape, m, 5/6/7/8, 9/0/- /=, t/y/u/i work in all states","Gameplay keys filtered: All other keys only work when !menuActive && gameStateString !== 'start'","State validation: Checks menuActive, rebindingAction, gameStateString before key registration","Context-aware processing: Different rules for menu navigation vs gameplay controls","Priority system: Menu keys bypass all filtering with early return statements","Game state integration: Proper separation between character selection, menus, and gameplay","Input sanitization: Prevents unwanted input during critical game state transitions","Performance optimization: Early exit for menu keys reduces unnecessary processing","Debug support: Detailed logging shows which keys are processed and why","Backwards compatibility: Default values for undefined global state variables","Error handling: Graceful handling of missing state information"]}
{"type":"entity","name":"platformer-game:menu-key-priority-system","entityType":"input_mechanic","observations":["Critical UI controls that must work in all game states regardless of context","Menu navigation: Escape (close menus), m (main menu toggle) always available","Player-specific controls: Keys 5-8 for player 1-4 skill tree access","Character stats: Keys 9/0/- /= for player 1-4 character stat windows","Skill tree navigation: Keys t/y/u/i for tab switching within open skill trees","Priority override: These keys bypass all game state filtering","Always accessible: Ensures players can access UI features from any game state","Input reliability: Critical for game usability and player experience","State independence: Works during character selection, menus, and gameplay","Performance priority: Immediate processing without state checks","Debug logging: Special logging for menu key detection and processing","User experience: Prevents input blocking during important UI interactions"]}
{"type":"entity","name":"platformer-game:game-state-input-integration","entityType":"input_integration","observations":["Seamless integration with game state management for proper input routing","Game state awareness: gameStateString ('start', 'playing') determines input availability","Menu state coordination: menuActive flag prevents gameplay input during UI","Rebinding protection: rebindingAction flag blocks input during control customization","State validation: Multiple state checks ensure proper input context","Transition handling: Smooth input switching between different game modes","Character selection: Special handling for start screen input filtering","Gameplay isolation: Gameplay keys only active during actual game session","UI priority: Menu keys override game state restrictions","State synchronization: Input system stays synchronized with game flow","Error recovery: Default values prevent crashes from missing state information","Performance balance: Efficient state checking without blocking input processing"]}
{"type":"entity","name":"platformer-game:event-capture-system","entityType":"input_infrastructure","observations":["DOM event handling with keydown and keyup event listeners on window object","Event capture phase: capture: true ensures input priority over other event handlers","Key state management: keys object maintains current state of all pressed keys","Event persistence: keydown sets keys[key] = true, keyup sets keys[key] = false","Cross-browser compatibility: Standard DOM Level 2 Events implementation","Performance optimization: Minimal event processing with direct object property access","Memory efficiency: Simple boolean state tracking without complex data structures","Event propagation control: Menu keys use return statements to prevent further processing","Global accessibility: Window-level event handling captures all keyboard input","Debug integration: Console logging for all key events with key identification","Error prevention: Event capture ensures input reliability even with other scripts","Responsive input: Immediate key state updates for real-time game control"]}
{"type":"entity","name":"platformer-game:key-state-management","entityType":"input_mechanic","observations":["Continuous key state tracking with persistent boolean values for all keys","Real-time updates: keydown events set keys to true, keyup events set keys to false","State persistence: Keys remain true while held down, false when released","Global state access: window.keys export provides cross-module key state access","Synchronous state: Key states updated immediately on DOM events","Performance optimized: Direct object property access for state checking","Memory efficient: Simple boolean values without complex state objects","Multi-key support: Unlimited simultaneous key combinations supported","State reliability: No key state loss during rapid pressing/releasing","Debug support: Key state inspection through console logging","Integration ready: Compatible with game loop polling and event-driven systems","Input buffering: Natural key state buffering through continuous tracking"]}
{"type":"entity","name":"platformer-game:global-key-access","entityType":"input_api","observations":["Cross-module key state access through window.keys global export","API simplicity: Direct object property access (keys['ArrowLeft'], keys[' '])","Global availability: Keys object accessible from any JavaScript module","State synchronization: Single source of truth for all keyboard input","Module integration: Used by game.js, player controls, UI systems","API consistency: Same interface across all input-consuming systems","Performance access: Direct property access without function calls","Debug capabilities: Runtime key state inspection and modification","Backwards compatibility: Global export ensures legacy code compatibility","Extension ready: Object structure allows easy addition of new input methods","Documentation: Clear API with predictable key name mapping","Reliability: Global scope ensures input availability throughout application lifecycle"]}
{"type":"entity","name":"platformer-game:input-utility-functions","entityType":"input_helper","observations":["isKeyPressed() helper function for clean key state checking","Parameter validation: Function accepts key string and returns boolean","API simplicity: Single function call instead of direct object property access","Error handling: Safe key checking without undefined errors","Performance wrapper: Optional abstraction layer over direct key access","Debug support: Function can be instrumented for input tracking","Code readability: More descriptive than direct keys[key] access","Consistency: Standardized input checking pattern across codebase","Flexibility: Function-based approach allows future enhancements","Integration: Used by game logic for clean input state queries","Documentation: Clear function signature and return value","Extensibility: Framework for additional input utility functions"]}
{"type":"entity","name":"platformer-game:bulgarian-input-documentation","entityType":"localization_system","observations":["Native Bulgarian comments and documentation in input.js","Cultural adaptation: Bulgarian language for Bulgarian development team","Code comments: Bulgarian explanations for input logic and state management","Developer experience: Native language improves code comprehension","Documentation quality: Detailed Bulgarian explanations of complex logic","Language consistency: Matches other Bulgarian documentation in project","Accessibility: Improves code maintainability for Bulgarian developers","Translation accuracy: Precise technical terminology in Bulgarian","Code culture: Supports Bulgarian development community","Knowledge transfer: Easier onboarding for Bulgarian team members","Documentation standards: Consistent Bulgarian technical writing","Future maintenance: Sustainable documentation in native language"]}
{"type":"entity","name":"platformer-game:input-performance-characteristics","entityType":"performance_system","observations":["Minimal event processing with direct property assignments","Event capture optimization with capture: true for handler priority","Memory efficiency with simple boolean key state tracking","CPU optimization with early returns for menu keys","No input buffering delays with immediate DOM event processing","Scalable architecture supporting unlimited simultaneous key presses","Low memory footprint with lightweight keys object structure","Performance monitoring through console logging capabilities","Event handler efficiency with minimal conditional logic","Cross-browser performance with standard DOM events","Resource optimization with no polling loops or timers","Real-time responsiveness with immediate state updates","Debug performance with optional logging controls","Production ready with efficient event processing pipeline"]}
{"type":"entity","name":"platformer-game:input-system-integration","entityType":"input_integration","observations":["Game loop integration with keys object polling in updatePlayer() functions","Player control mapping through getCurrentControls() system","Skill tree integration with input filtering for menu/gameplay separation","Character stats integration with per-player key assignments","Combat system coordination with input state awareness","UI system integration with menu key priority handling","Animation system integration with input-driven state transitions","Multiplayer support with per-player input mapping","State machine integration with input event triggering","Debug system integration with input event logging","Performance integration with efficient input processing","Error handling integration with graceful input fallbacks","Global state integration with window.keys accessibility","Backwards compatibility with legacy input consumers"]}
{"type":"relation","from":"platformer-game:input-handling-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:state-based-input-filtering","to":"platformer-game:input-handling-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:menu-key-priority-system","to":"platformer-game:input-handling-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:game-state-input-integration","to":"platformer-game:input-handling-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:event-capture-system","to":"platformer-game:input-handling-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:key-state-management","to":"platformer-game:input-handling-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:global-key-access","to":"platformer-game:input-handling-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:input-utility-functions","to":"platformer-game:input-handling-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:bulgarian-input-documentation","to":"platformer-game:input-handling-architecture","relationType":"documents"}
{"type":"relation","from":"platformer-game:input-performance-characteristics","to":"platformer-game:input-handling-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:input-system-integration","to":"platformer-game:input-handling-architecture","relationType":"connects"}
{"type":"relation","from":"platformer-game:input-handling-architecture","to":"platformer-game:game-loop-architecture","relationType":"provides_input_for"}
{"type":"relation","from":"platformer-game:input-handling-architecture","to":"platformer-game:ui-architecture","relationType":"supports"}
{"type":"relation","from":"platformer-game:input-handling-architecture","to":"platformer-game:combat-system","relationType":"enables"}
{"type":"relation","from":"platformer-game:input-handling-architecture","to":"platformer-game:animation-system","relationType":"drives"}
{"type":"entity","name":"platformer-game:sprite-sheet-loading-architecture","entityType":"asset_loading_system","observations":["Specialized sprite sheet loading system for skill icons with 40+ lines of efficient asset management","5√ó10 grid layout supporting 50 individual skill icons from single sprite sheet","Mathematical position calculation system for precise icon extraction","Promise-based asynchronous loading with error handling and resolution","Canvas-based icon extraction using drawImage() for memory-efficient individual icons","Bulgarian documentation with native language comments for Bulgarian developers","Integration with skill tree system for dynamic icon loading","Performance optimized with individual canvas creation and minimal memory overhead","Asset path resolution supporting Assets/ directory structure","Debug-friendly with commented example usage and clear parameter documentation","Scalable architecture supporting variable grid sizes and icon dimensions","Error handling with promise rejection for failed image loads"]}
{"type":"entity","name":"platformer-game:sprite-sheet-configuration","entityType":"asset_configuration","observations":["5√ó10 grid layout providing 50 total skill icons in organized rows and columns","Icon dimensions of 65√ó65 pixels for consistent UI scaling and readability","Margin system with 30px border for proper sprite sheet spacing","Row spacing of 25px between horizontal icon rows","Column spacing of 1px between vertical icon columns","Mathematical layout ensuring no icon overlap and clean visual separation","Asset specification for Swordsman-Skill-Icons.webp sprite sheet","Grid-based addressing system with 1-based row and column indexing","Scalable configuration allowing future sprite sheet expansions","Visual consistency across all skill tree interfaces","Performance consideration with optimal spacing for rendering","Integration ready with clear parameter definitions for calculations"]}
{"type":"entity","name":"platformer-game:position-calculation-system","entityType":"mathematical_system","observations":["getIconPosition(row, col) function calculating pixel coordinates for icon extraction","1-based indexing system for user-friendly row and column specification","X-coordinate formula: x = MARGIN + (col - 1) * (ICON_SIZE + COL_SPACING)","Y-coordinate formula: y = MARGIN + (row - 1) * (ICON_SIZE + ROW_SPACING)","Mathematical precision ensuring exact pixel positioning for sprite extraction","Consistent spacing application preventing icon overlap","Reusable calculation system for any grid-based sprite sheet","Performance optimized with simple arithmetic operations","Error prevention with validated input ranges","Integration with canvas drawing system for seamless extraction","Debug support with clear coordinate calculation visibility","Scalable formula supporting variable grid dimensions and spacing"]}
{"type":"entity","name":"platformer-game:canvas-rendering-system","entityType":"rendering_system","observations":["loadSkillIcon(row, col) function returning Promise with extracted canvas element","Asynchronous image loading with onload event handling","Individual canvas creation (65√ó65) for each extracted icon","drawImage() method for precise sprite sheet region extraction","Canvas-based approach providing memory-efficient icon storage","Promise resolution returning ready-to-use canvas elements","Error handling with promise rejection for loading failures","Performance optimization with minimal canvas operations","Integration with DOM manipulation for UI element insertion","Debug capabilities with visual canvas inspection","Scalable rendering supporting various icon sizes","Cross-browser compatibility with standard Canvas API"]}
{"type":"entity","name":"platformer-game:promise-based-api","entityType":"async_interface","observations":["Modern Promise-based API for asynchronous skill icon loading","resolve(canvas) pattern returning extracted icon canvases","reject(error) handling for failed image loading scenarios","Async/await compatibility with modern JavaScript patterns","Non-blocking loading preventing UI thread interruption","Error propagation maintaining clean error handling chains","Integration with skill tree system for seamless icon loading","Performance benefits with concurrent loading capabilities","Debug support with promise state inspection","Scalable interface supporting future async enhancements","Backwards compatibility with callback-based systems","Developer-friendly API with clear success/failure patterns"]}
{"type":"entity","name":"platformer-game:bulgarian-sprite-documentation","entityType":"localization_system","observations":["Native Bulgarian comments explaining sprite sheet loading mechanics","Parameter descriptions in Bulgarian for local developer comprehension","Formula explanations in native language for mathematical clarity","Cultural adaptation with Bulgarian technical terminology","Code maintainability improved with native language documentation","Developer experience enhanced with familiar language","Translation accuracy ensuring precise technical explanations","Documentation consistency with other Bulgarian codebase elements","Knowledge transfer facilitated for Bulgarian development team","Code culture support with localized technical writing","Future maintenance supported with sustainable documentation","Professional documentation standards in Bulgarian"]}
{"type":"entity","name":"platformer-game:skill-tree-integration","entityType":"ui_integration","observations":["Direct integration with skill tree system for dynamic icon loading","50 available skill icons supporting comprehensive skill progression","Canvas-based icons compatible with HTML DOM insertion","Promise-based loading enabling smooth UI transitions","Performance optimized for skill tree rendering requirements","Visual consistency across all skill tree interfaces","Error handling preventing skill tree display failures","Scalable icon system supporting skill tree expansions","Debug capabilities for skill icon loading verification","Integration with skill tree navigation and selection","Memory efficient with individual icon caching","UI responsiveness with asynchronous loading patterns"]}
{"type":"entity","name":"platformer-game:sprite-performance-characteristics","entityType":"performance_system","observations":["Individual canvas creation providing memory-efficient icon storage","Minimal memory overhead with 65√ó65 pixel canvas elements","Asynchronous loading preventing main thread blocking","Fast mathematical calculations for position determination","Scalable performance with grid size independence","Resource optimization with on-demand icon loading","Caching potential with canvas element reusability","Performance monitoring capabilities through promise timing","Cross-browser optimization with standard Canvas API","Memory management with automatic garbage collection","Loading performance with image caching benefits","UI performance with non-blocking rendering operations"]}
{"type":"entity","name":"platformer-game:error-handling-system","entityType":"error_management","observations":["Promise rejection pattern for comprehensive error handling","Image loading failure detection with onerror event","Error propagation maintaining clean exception chains","Failed load recovery preventing application crashes","Debug information provided through error rejection","User feedback capabilities for loading failure scenarios","Graceful degradation with fallback icon options","Error logging for development and troubleshooting","Integration with broader error handling systems","Performance impact minimization during error conditions","Developer debugging support with detailed error information","Production stability with robust error management"]}
{"type":"entity","name":"platformer-game:sprite-usage-patterns","entityType":"integration_patterns","observations":["loadSkillIcon(row, col) usage with 1-based row and column parameters","Promise consumption with .then(canvas => {}) for successful loads","Error handling with .catch(error => {}) for failed operations","DOM integration with document.body.appendChild(canvas) for display","Skill tree implementation with icon loading for skill nodes","Example usage pattern with commented test code","Integration with UI systems for dynamic icon insertion","Batch loading capabilities for multiple icon requirements","Performance patterns with async/await for modern JavaScript","Debug patterns with console logging for development","Scalable usage supporting various integration scenarios","Best practices established through documented examples"]}
{"type":"entity","name":"platformer-game:asset-path-resolution","entityType":"asset_management","observations":["Assets/Swordsman-Skill-Icons.webp path resolution for sprite sheet location","Directory structure integration with Assets/ folder organization","File naming conventions for clear asset identification","Path resolution supporting relative and absolute paths","Asset validation with file existence checking","Loading reliability with proper path construction","Integration with resource management systems","Performance optimization with cached path resolution","Debug support with path logging and verification","Scalability with configurable asset directory structures","Error handling for missing asset files","Future extensibility with dynamic path resolution"]}
{"type":"relation","from":"platformer-game:sprite-sheet-loading-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:sprite-sheet-configuration","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"configures"}
{"type":"relation","from":"platformer-game:position-calculation-system","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"calculates"}
{"type":"relation","from":"platformer-game:canvas-rendering-system","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"renders"}
{"type":"relation","from":"platformer-game:promise-based-api","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"provides_interface"}
{"type":"relation","from":"platformer-game:bulgarian-sprite-documentation","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"documents"}
{"type":"relation","from":"platformer-game:skill-tree-integration","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:sprite-performance-characteristics","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:error-handling-system","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"handles_errors"}
{"type":"relation","from":"platformer-game:sprite-usage-patterns","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"demonstrates"}
{"type":"relation","from":"platformer-game:asset-path-resolution","to":"platformer-game:sprite-sheet-loading-architecture","relationType":"resolves_paths"}
{"type":"relation","from":"platformer-game:sprite-sheet-loading-architecture","to":"platformer-game:resource-management","relationType":"specializes"}
{"type":"relation","from":"platformer-game:sprite-sheet-loading-architecture","to":"platformer-game:ui-architecture","relationType":"provides_assets"}
{"type":"relation","from":"platformer-game:sprite-sheet-loading-architecture","to":"platformer-game:skill-system","relationType":"supports"}
{"type":"entity","name":"platformer-game:main-entry-point-architecture","entityType":"startup_system","observations":["Main entry point file (main.js) coordinating entire game initialization with 50+ lines of critical bootstrap logic","System orchestration role separating concerns between game logic (game.js) and UI logic (ui.js)","Global state management with window.gameState variable for UI coordination","Animation system initialization with Promise-based async loading and error handling","UI system coordination with delayed start screen initialization","System availability polling with setTimeout mechanism for script loading dependencies","Error recovery patterns allowing game continuation even when subsystems fail","Backwards compatibility support for missing or unloaded system components","Performance optimization through asynchronous initialization preventing blocking operations","Debug logging integration with console messages for initialization tracking","Integration hub connecting all major game systems during startup sequence","Modular design supporting independent system development and testing"]}
{"type":"entity","name":"platformer-game:animation-system-initialization","entityType":"startup_component","observations":["Promise-based animation system initialization with initializeAnimationSystem() function","System availability checking with window.animationSystem && window.spriteManager validation","Canvas integration using document.getElementById('game') for rendering setup","Async initialization with window.animationSystem.initialize(canvas) promise chain","Error handling with .catch() blocks allowing graceful failure recovery","Polling mechanism with 100ms intervals for system readiness verification","Continuation logic allowing game startup even when animation system fails","Debug logging with '[MAIN] Animation system ready/initialized' messages","Performance optimization preventing main thread blocking during asset loading","Integration with rendering pipeline through canvas context setup","Fallback support for systems without animation dependencies","Loading coordination ensuring proper initialization sequence timing"]}
{"type":"entity","name":"platformer-game:game-state-management-entry","entityType":"state_management","observations":["Global game state variable window.gameState initialized to 'start' for UI coordination","State values: 'start' (character selection), 'playing' (active gameplay)","Global accessibility allowing cross-module state checking and updates","UI system integration enabling state-based interface switching","Game loop coordination preventing updates during menu states","Input filtering integration with state-based key processing restrictions","Multiplayer coordination supporting state synchronization across players","Debug support with console logging for state transition tracking","Performance optimization with direct global variable access","Backwards compatibility maintaining legacy state checking patterns","Error prevention with default 'start' initialization value","Integration with all game systems requiring state awareness"]}
{"type":"entity","name":"platformer-game:ui-system-coordination","entityType":"startup_component","observations":["Start screen initialization through window.UISystem.initStartScreen() coordination","System availability polling with setTimeout(initStartScreen, 100) for UI loading","Dependency checking ensuring window.UISystem exists before initialization","Delayed execution allowing script loading completion before UI setup","Error prevention with availability checks preventing undefined function calls","Integration with character selection and menu systems","Performance optimization with non-blocking initialization sequence","Debug support with console messages for UI system state","Backwards compatibility with fallback mechanisms for missing UI systems","Sequence coordination ensuring proper UI/game system loading order","User experience focus with immediate visual feedback after loading","Integration with input system for menu navigation readiness"]}
{"type":"entity","name":"platformer-game:system-availability-checking","entityType":"startup_mechanism","observations":["Polling mechanism with recursive setTimeout(checkSystemReady, 100) for async loading","System dependency validation checking window.animationSystem && window.spriteManager","UI system availability checking with window.UISystem && window.UISystem.initStartScreen","Script loading coordination allowing time for HTML-loaded scripts to initialize","Performance optimization with short 100ms intervals balancing responsiveness and CPU usage","Error recovery allowing continuation when systems fail to load","Debug logging providing visibility into system loading progress","Integration with Promise-based patterns for modern async coordination","Backwards compatibility supporting both loaded and missing system states","Loading sequence management ensuring proper initialization order","User experience optimization preventing loading screen hangs","Development support with clear error messages for missing dependencies"]}
{"type":"entity","name":"platformer-game:main-error-handling-system","entityType":"error_management","observations":["Promise rejection handling with .catch(error) blocks for animation system failures","Graceful degradation allowing game continuation when subsystems fail","Console error logging with '[MAIN] Failed to initialize animation system:' prefix","Missing system handling with setTimeout fallbacks for delayed initialization","Error propagation prevention ensuring main execution continues","Debug information provision with detailed error messages and context","Integration with broader error handling patterns across the application","Performance impact minimization during error conditions","User experience preservation preventing complete game failure","Development debugging support with clear error identification","Backwards compatibility with error-tolerant loading mechanisms","System stability focus with fail-safe initialization patterns"]}
{"type":"entity","name":"platformer-game:main-integration-coordination","entityType":"system_coordinator","observations":["Central coordination hub connecting animation, UI, game state, and input systems","Script loading synchronization ensuring proper initialization sequence","Global variable management providing cross-module communication channels","System dependency resolution preventing race conditions during startup","Integration with HTML script loading providing proper execution timing","Performance coordination optimizing startup sequence for minimal loading time","Error coordination allowing partial system failures without complete breakdown","Debug integration providing comprehensive startup logging and tracking","Backwards compatibility maintaining connections with legacy system patterns","User experience coordination ensuring smooth transition from loading to gameplay","Development coordination supporting modular system development and testing","Cross-system communication enabling proper inter-system dependencies"]}
{"type":"entity","name":"platformer-game:main-performance-characteristics","entityType":"performance_system","observations":["Asynchronous initialization preventing main thread blocking during system loading","Promise-based loading enabling concurrent asset and system initialization","Polling optimization with 100ms intervals balancing responsiveness and efficiency","Non-blocking execution allowing UI responsiveness during startup sequence","Memory management with minimal global variable footprint","CPU optimization through short polling intervals and immediate error recovery","Loading time optimization with parallel system initialization paths","Resource efficiency with on-demand system checking and initialization","Performance monitoring through console logging and timing measurements","Scalability support with extensible polling and initialization patterns","Browser compatibility with standard Promise and setTimeout implementations","Development performance with debug logging controls and timing analysis"]}
{"type":"entity","name":"platformer-game:main-debug-development-features","entityType":"development_tool","observations":["Console logging with '[MAIN]' prefix for clear initialization tracking","Animation system readiness logging with 'Animation system ready' messages","Initialization success logging with 'Animation system initialized successfully'","Error logging with detailed failure information and context","System availability debug messages for script loading verification","Performance logging for initialization timing and bottleneck identification","UI system coordination logging for start screen initialization tracking","Global state debug support with window.gameState inspection capabilities","Development shortcuts for testing initialization failure scenarios","Error recovery logging for graceful degradation verification","Backwards compatibility logging for legacy system integration tracking","Comprehensive startup debugging enabling rapid development iteration"]}
{"type":"entity","name":"platformer-game:main-architecture-separation","entityType":"system_design","observations":["Clean separation of concerns with game logic in game.js and UI logic in ui.js","Main.js focused solely on initialization and system coordination","Modular design allowing independent development of game and UI systems","Entry point clarity with single responsibility for startup orchestration","System decoupling enabling parallel development and testing","Integration flexibility with clear interfaces between main systems","Performance optimization through focused initialization responsibilities","Debug isolation allowing targeted debugging of startup vs gameplay issues","Backwards compatibility maintenance through centralized initialization logic","User experience coordination ensuring smooth loading and startup flow","Development efficiency with clear boundaries between system responsibilities","Scalability support with extensible initialization framework"]}
{"type":"relation","from":"platformer-game:main-entry-point-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:animation-system-initialization","to":"platformer-game:main-entry-point-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:game-state-management-entry","to":"platformer-game:main-entry-point-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:ui-system-coordination","to":"platformer-game:main-entry-point-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:system-availability-checking","to":"platformer-game:main-entry-point-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:main-error-handling-system","to":"platformer-game:main-entry-point-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:main-integration-coordination","to":"platformer-game:main-entry-point-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:main-performance-characteristics","to":"platformer-game:main-entry-point-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:main-debug-development-features","to":"platformer-game:main-entry-point-architecture","relationType":"supports"}
{"type":"relation","from":"platformer-game:main-architecture-separation","to":"platformer-game:main-entry-point-architecture","relationType":"designs"}
{"type":"relation","from":"platformer-game:main-entry-point-architecture","to":"platformer-game:animation-system","relationType":"initializes"}
{"type":"relation","from":"platformer-game:main-entry-point-architecture","to":"platformer-game:ui-architecture","relationType":"coordinates"}
{"type":"relation","from":"platformer-game:main-entry-point-architecture","to":"platformer-game:game-state-management","relationType":"manages"}
{"type":"relation","from":"platformer-game:main-entry-point-architecture","to":"platformer-game:game-loop-architecture","relationType":"bootstraps"}
{"type":"entity","name":"platformer-game:menu-system-architecture","entityType":"ui_system","observations":["Comprehensive menu system with 700+ lines of sophisticated UI management code","Multi-tier menu hierarchy with main/controls/skills/characterStats navigation","Menu state management with menuActive flag and currentMenu tracking","Skill tree system with 6√ó5 grid navigation and prerequisite-based unlocking","Character stats integration with per-player stat modification","Multiplayer controls configuration supporting 4 players with keyboard and controller","Bulgarian localization with native language UI text and skill descriptions","Gamepad detection and support with PS3/PS4 button mapping","localStorage persistence for custom control configurations","Dynamic HTML generation with modular UI component creation","Input handling integration with menu/gameplay separation","Performance optimization with event delegation and efficient DOM updates"]}</observations>
{"type":"entity","name":"platformer-game:multiplayer-controls-configuration","entityType":"input_configuration","observations":["4-player control system with individual keyboard and controller mappings per player","Input mode switching allowing players to toggle between keyboard and controller input","Player-specific key assignments with unique keyboard layouts for each player","Controller button mapping supporting PS3/PS4 standard button layouts","Control persistence through localStorage with JSON serialization","Rebinding interface allowing custom key/button remapping","Input validation preventing conflicting key assignments","Default control schemes optimized for local multiplayer gameplay","Control display system with readable button names and key identifiers","Input mode coordination ensuring proper device switching","Configuration UI with table-based control visualization","Player isolation preventing cross-player control conflicts"]}</observations>
{"type":"entity","name":"platformer-game:skill-tree-navigation-system","entityType":"ui_navigation","observations":["6√ó5 grid navigation system with WASD and arrow key movement support","Cursor-based selection with visual feedback and position tracking","Skill page system with main/secondary tab switching using t/y/u/i keys","Skill state visualization with unlocked/available/locked status indicators","Connection line drawing with SVG-based prerequisite relationship visualization","Level indicator system showing current/max skill levels","Skill type indicators for active/passive/active-passive skills","Prerequisites display with formatted Bulgarian text descriptions","Resource cost display with mana/energy consumption information","Skill point cost calculation with dynamic leveling progression","Effect comparison showing current vs next level benefits","Unlock confirmation system with Enter/Space key activation"]}</observations>
{"type":"entity","name":"platformer-game:character-stats-ui-integration","entityType":"ui_component","observations":["Character stats display system integrated with menu navigation","Per-player stat modification with increase/decrease controls","Free points management with validation and UI feedback","Stat boundary enforcement preventing invalid point allocation","Real-time UI updates reflecting stat changes and point spending","Bulgarian interface with native language stat labels","Stat modification validation with automatic minimum calculations","Point allocation tracking with remaining points display","UI state coordination with menu system navigation","Player-specific stat interfaces with individual player data","Input handling integration with keyboard navigation support","Visual feedback system for successful/failed stat modifications"]}</observations>
{"type":"entity","name":"platformer-game:bulgarian-menu-localization","entityType":"localization_system","observations":["Native Bulgarian language support throughout menu system interface","Skill names and descriptions translated to Bulgarian","UI text localization including menu titles and button labels","Prerequisites display in Bulgarian with proper grammar","Status messages and feedback text in native language","Character stat labels translated to Bulgarian","Menu navigation text in Bulgarian for better user experience","Skill tree interface text fully localized","Error messages and validation feedback in Bulgarian","Cultural adaptation with appropriate Bulgarian terminology","Professional translation quality for gaming interface","Consistent Bulgarian language usage across all menu components"]}</observations>
{"type":"entity","name":"platformer-game:gamepad-detection-system","entityType":"input_hardware","observations":["Automatic gamepad detection using navigator.getGamepads() API","Real-time connection monitoring with gamepadconnected/disconnected events","Multi-gamepad support with device enumeration and status tracking","PS3/PS4 controller identification with device ID recognition","Button name mapping system converting button indices to readable names","Connection status display showing connected gamepad information","Hot-plug support allowing gamepads to be connected/disconnected during gameplay","Device compatibility with standard gamepad button layouts","Status visualization in menu interface with device information","Performance optimization with efficient polling mechanisms","Error handling for unsupported or malfunctioning gamepads","User feedback system for gamepad connection status changes"]}</observations>
{"type":"entity","name":"platformer-game:localstorage-controls-persistence","entityType":"data_persistence","observations":["Control configuration persistence using browser localStorage API","JSON serialization of complex control objects with nested structures","Automatic loading on menu initialization with error handling","Save operations triggered by control modifications","Cross-session persistence maintaining custom configurations","Data validation ensuring loaded configurations are valid","Error recovery with fallback to default controls","Performance optimization with minimal storage operations","User experience preservation across browser sessions","Configuration backup preventing accidental loss","Data integrity checking with structure validation","Migration support for future control scheme changes"]}</observations>
{"type":"entity","name":"platformer-game:dynamic-ui-generation","entityType":"ui_construction","observations":["Modular HTML generation creating complete menu interfaces programmatically","Menu container creation with structured div hierarchy","Skill tree grid generation with dynamic icon placement and state indicators","Controls table construction with player-specific configuration displays","Character stats interface building with stat modification controls","SVG integration for skill tree connection line visualization","DOM manipulation optimization with efficient element creation","CSS class application for visual state management","Event listener attachment for interactive UI components","Memory management with proper element cleanup on menu transitions","Responsive design support with flexible layout structures","Performance optimization with batch DOM operations"]}</observations>
{"type":"entity","name":"platformer-game:skill-prerequisites-validation","entityType":"game_logic","observations":["Multi-type prerequisite system supporting skill_level, player_level, quest_completed, achievement_unlocked","Skill level prerequisites requiring specific skills at minimum levels","Player level requirements checking character progression thresholds","Quest completion validation for story-driven unlocks","Achievement system integration for reward-based progression","Prerequisites display formatting with Bulgarian language support","Validation logic processing all prerequisite types sequentially","Dependency chain management preventing circular requirements","Unlock eligibility calculation combining all prerequisite types","UI feedback system showing blocking prerequisites clearly","Performance optimization with cached prerequisite evaluations","Extensibility framework for additional prerequisite types"]}</observations>
{"type":"entity","name":"platformer-game:menu-state-coordination","entityType":"ui_state_management","observations":["Menu state tracking with menuActive boolean and currentMenu string indicators","Menu hierarchy management with main/controls/skills/characterStats states","State transition coordination preventing invalid menu combinations","Input system integration blocking gameplay input during menu display","Menu cleanup procedures ensuring proper resource deallocation","Event listener management with add/remove during menu transitions","UI visibility coordination with display property manipulation","Player-specific state tracking for skill tree and character stats","State persistence prevention across menu type switches","Performance optimization with conditional update blocking","Error prevention with state validation before operations","User experience coordination ensuring smooth menu transitions"]}</observations>
{"type":"entity","name":"platformer-game:skill-level-progression-system","entityType":"game_progression","observations":["Multi-level skill system supporting 1-N skill progression levels","Dynamic cost calculation using levelCosts arrays for progression scaling","Level display system showing current/max level indicators","Effect accumulation calculating total bonuses from all unlocked levels","Upgrade validation checking skill points and prerequisite requirements","Level cap enforcement preventing over-leveling progression","UI feedback showing current vs next level effect comparisons","Resource cost scaling with skill progression difficulty","Unlock progression tracking with visual level indicators","Balance design with increasing costs for meaningful progression","Performance tracking of skill level distribution","Extensibility support for unlimited skill level potential"]}</observations>
{"type":"entity","name":"platformer-game:menu-performance-optimization","entityType":"ui_performance","observations":["Event delegation system minimizing individual element event listeners","DOM batch operations reducing reflow and repaint cycles","Memory management with proper element cleanup and garbage collection","Lazy loading for skill icons and UI components optimization","Efficient grid rendering with minimal DOM manipulation","SVG optimization for connection line drawing performance","Control display caching reducing repeated calculations","Input handling optimization with key event debouncing","UI update batching preventing excessive rendering cycles","Memory leak prevention with proper event listener cleanup","Responsive design with efficient layout calculations","Performance monitoring with operation timing tracking"]}</observations>
{"type":"entity","name":"platformer-game:micro-skill-tree-system","entityType":"ui_specialization","observations":["Specialized skill tree for active skill specializations and modifications","One Per Row progression system limiting one specialization per skill tier","Modal-based interface separate from main skill tree navigation","Specialization selection system with unique skill modifications","Integration with main skill tree through active skill prerequisites","Bulgarian interface with native language specialization descriptions","Resource cost system for specialization activation","Visual feedback system showing specialization effects","Progression tracking with specialization unlock status","UI coordination with main skill tree modal system","Performance optimization with modal-specific rendering","Extensibility framework for additional specialization types"]}</observations>
{"type":"relation","from":"platformer-game:menu-system-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:multiplayer-controls-configuration","to":"platformer-game:menu-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:skill-tree-navigation-system","to":"platformer-game:menu-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:character-stats-ui-integration","to":"platformer-game:menu-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:bulgarian-menu-localization","to":"platformer-game:menu-system-architecture","relationType":"documents"}
{"type":"relation","from":"platformer-game:gamepad-detection-system","to":"platformer-game:menu-system-architecture","relationType":"supports"}
{"type":"relation","from":"platformer-game:localstorage-controls-persistence","to":"platformer-game:menu-system-architecture","relationType":"persists"}
{"type":"relation","from":"platformer-game:dynamic-ui-generation","to":"platformer-game:menu-system-architecture","relationType":"constructs"}
{"type":"relation","from":"platformer-game:skill-prerequisites-validation","to":"platformer-game:menu-system-architecture","relationType":"validates"}
{"type":"relation","from":"platformer-game:menu-state-coordination","to":"platformer-game:menu-system-architecture","relationType":"manages"}
{"type":"relation","from":"platformer-game:skill-level-progression-system","to":"platformer-game:menu-system-architecture","relationType":"progresses"}
{"type":"relation","from":"platformer-game:menu-performance-optimization","to":"platformer-game:menu-system-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:micro-skill-tree-system","to":"platformer-game:menu-system-architecture","relationType":"extends"}
{"type":"relation","from":"platformer-game:menu-system-architecture","to":"platformer-game:ui-architecture","relationType":"implements"}
{"type":"relation","from":"platformer-game:menu-system-architecture","to":"platformer-game:input-handling-architecture","relationType":"coordinates_with"}
{"type":"relation","from":"platformer-game:menu-system-architecture","to":"platformer-game:skill-system","relationType":"provides_interface"}
{"type":"relation","from":"platformer-game:menu-system-architecture","to":"platformer-game:character-info-architecture","relationType":"provides_interface"}
{"type":"entity","name":"platformer-game:micro-skill-tree-architecture","entityType":"specialization_system","observations":["Modal-based skill specialization system with 350+ lines of advanced UI code","3√ó4 grid layout providing 12 specialization slots per active skill","One Per Row progression system limiting one specialization per skill tier","Cursor-based navigation with WASD and arrow key movement support","Modal overlay interface separate from main skill tree navigation","Bulgarian localization with native language UI text and descriptions","Integration with active skill prerequisites and progression systems","Visual state management with unlocked/available/locked status indicators","Effect comparison system showing current vs next specialization benefits","Resource cost tracking and skill point consumption for specializations","Performance optimized with efficient DOM updates and event handling","Extensibility framework supporting 4 different progression systems (OnePerRow, LevelBased, Absolute, Instant)"]}</observations>
{"type":"entity","name":"platformer-game:micro-grid-navigation-system","entityType":"ui_navigation","observations":["3√ó4 grid layout with 12 total specialization positions (4 rows √ó 3 columns)","skillIndex calculation using row * 3 + col formula for array indexing","Cursor positioning with center alignment over selected micro skill icons","WASD and arrow key navigation support with boundary checking","Visual cursor feedback with selected class application to micro skill icons","Grid boundary enforcement preventing cursor movement outside valid ranges","Position calculation for cursor centering (iconCenterX/Y - cursor dimensions)","Dynamic cursor updates with smooth visual transitions","Navigation bounds checking (row 0-3, column 0-2)","Performance optimized with minimal DOM queries and updates","Integration with micro skill selection logic","Debug support with cursor position logging"]}</observations>
{"type":"entity","name":"platformer-game:micro-modal-ui-management","entityType":"modal_interface","observations":["Modal overlay system with dedicated microTreeModal container","Dynamic title updates based on parent active skill (microTreeTitle)","System description display showing progression type in Bulgarian","Split-panel layout with left grid panel and right info panel","Modal lifecycle management with show/hide state coordination","currentMenu state tracking ('microTree' when active)","Event listener cleanup on modal hide to prevent memory leaks","CSS-based modal positioning with flex display system","Parent skill integration through currentMicroSkillParent tracking","UI state synchronization between modal and main skill tree","Performance optimization with conditional rendering","User experience focus with smooth modal transitions"]}</observations>
{"type":"entity","name":"platformer-game:micro-progression-system-integration","entityType":"progression_mechanics","observations":["4 progression system types: OnePerRow, LevelBased, Absolute, Instant","OnePerRowSystem: Single specialization per row with prerequisite progression","LevelBasedSystem: Unlocks at specific player levels without skill point cost","AbsoluteSystem: All specializations available with individual point costs","InstantSystem: One per row without skill point requirements","Progression delegation through MicroSkillTreeManager.canSelectMicroSkill()","System-specific validation logic for each progression type","Resource consumption based on progression system requirements","Skill point management with system-appropriate cost structures","Integration with main skill tree progression mechanics","Balance design with varying complexity across system types","Extensibility framework for additional progression patterns"]}</observations>
{"type":"entity","name":"platformer-game:micro-bulgarian-localization","entityType":"localization_system","observations":["Native Bulgarian interface text for modal titles and descriptions","Progression system descriptions in Bulgarian ('One Per Row' explanations)","Skill effect descriptions in Bulgarian with proper grammar","UI feedback messages in native language for user experience","Prerequisites display in Bulgarian with dependency information","Status messages ('–ù–µ –µ –∏–∑–±—Ä–∞–Ω', '–ú–∞–∫—Å–∏–º–∞–ª–Ω–æ —Ä–∞–∑–≤–∏—Ç–∏–µ') in Bulgarian","System type descriptions with cultural adaptation","Professional translation quality maintaining technical accuracy","User experience enhancement through native language support","Consistency with main skill tree Bulgarian localization","Cultural adaptation for Bulgarian gaming community","Accessibility improvement with familiar language interface"]}</observations>
{"type":"entity","name":"platformer-game:micro-selection-validation-logic","entityType":"validation_system","observations":["canSelectMicroSkill() integration with progression system requirements","Parent skill prerequisite checking (active skill must be unlocked)","Progression system validation based on current selections","Resource availability checking for specialization costs","Skill point verification for progression system requirements","Selection conflict prevention for One Per Row system","Availability state calculation (unlocked/available/locked)","Integration with MicroSkillTreeManager for state persistence","Real-time validation updates on cursor movement","User feedback through UI state changes","Error prevention through comprehensive validation","Performance optimization with cached validation results"]}</observations>
{"type":"entity","name":"platformer-game:micro-visual-state-management","entityType":"ui_feedback","observations":["Three-state visual system: unlocked (green), available (blue), locked (gray)","CSS class application based on selection availability status","isSelected state checking for unlocked visual feedback","canSelect validation for available state determination","Icon rendering with sprite sheet clipping for micro skills","Visual cursor positioning with center alignment calculations","Selected class management for current cursor position","State synchronization between logic and visual representation","Performance optimization with efficient DOM class manipulation","User experience enhancement through clear visual feedback","Integration with progression system state changes","Debug support with visual state inspection capabilities"]}</observations>
{"type":"entity","name":"platformer-game:micro-input-handling-system","entityType":"input_mechanics","observations":["Keyboard navigation with WASD and arrow key support","Enter/Space key activation for micro skill selection","Escape key modal closure functionality","Event listener management with add/remove for proper cleanup","Input state coordination with currentMenu === 'microTree' checking","Navigation bounds enforcement preventing invalid cursor movement","Input event prevention with preventDefault() calls","Performance optimization with efficient key handling","Integration with modal lifecycle management","User experience focus with intuitive key mappings","Debug support with input event logging","Accessibility considerations with standard key navigation"]}</observations>
{"type":"entity","name":"platformer-game:micro-effect-display-system","entityType":"ui_information","observations":["Current effect display showing active specialization benefits","Next effect comparison showing benefits upon selection","Effect accumulation for multi-level specializations","Bulgarian effect descriptions with technical accuracy","Status-based display logic ('–ù–µ –µ –∏–∑–±—Ä–∞–Ω' vs '–ú–∞–∫—Å–∏–º–∞–ª–Ω–æ —Ä–∞–∑–≤–∏—Ç–∏–µ')","Effect parsing from levelEffects arrays with multiple effect support","Visual effect comparison in requirements panel","Integration with selection status for dynamic content","User experience enhancement with clear benefit communication","Performance optimization with cached effect calculations","Debug support with effect display validation","Extensibility for additional effect display formats"]}</observations>
{"type":"entity","name":"platformer-game:micro-integration-coordination","entityType":"system_integration","observations":["Active skill integration through parent skill prerequisite system","Modal overlay coordination with main skill tree interface","Progression system synchronization between micro and main trees","Resource management integration for specialization costs","Skill point consumption coordination with main progression","Visual state synchronization between systems","Input handling coordination between modal and main interfaces","UI state management across modal lifecycle","Performance coordination with efficient state updates","Debug integration with comprehensive logging","User experience continuity across interface transitions","Extensibility framework for additional specialization types"]}</observations>
{"type":"entity","name":"platformer-game:micro-sprite-rendering-system","entityType":"asset_rendering","observations":["Sprite sheet integration for micro skill icon display","getIconPosition() calculation for precise icon extraction","CSS object-fit: none for pixel-perfect sprite rendering","Fallback error handling with alternative text display","Icon positioning using row/col coordinates from skill definitions","Canvas compatibility with sprite sheet clipping","Performance optimization with efficient image loading","Visual consistency with main skill tree icon system","Integration with micro skill grid positioning","Debug support with coordinate logging","Scalability for additional micro skill icons","Memory management with proper image cleanup"]}</observations>
{"type":"entity","name":"platformer-game:micro-requirements-display-system","entityType":"ui_information","observations":["Prerequisites display in Bulgarian with dependency information","Resource cost display for mana/energy consumption","Skill point cost calculation based on progression system","Status information showing selection availability","Effect comparison system with current vs next benefits","Dynamic content updates based on cursor position","Integration with validation system for accurate information","User guidance through clear requirement presentation","Performance optimization with efficient DOM updates","Visual hierarchy with structured information layout","Debug support with requirement calculation logging","Extensibility for additional requirement types"]}</observations>
{"type":"entity","name":"platformer-game:micro-performance-optimization","entityType":"ui_performance","observations":["Efficient DOM manipulation with minimal element queries","Event listener cleanup preventing memory leaks","Cursor positioning optimization with cached calculations","Grid rendering efficiency with batch DOM operations","State update optimization with conditional processing","Memory management with proper modal cleanup","Performance monitoring with operation timing","Input handling efficiency with event delegation","Visual update batching for smooth transitions","Resource optimization with lazy icon loading","Browser compatibility with standard DOM APIs","Debug performance tracking capabilities"]}</observations>
{"type":"relation","from":"platformer-game:micro-skill-tree-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:micro-grid-navigation-system","to":"platformer-game:micro-skill-tree-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:micro-modal-ui-management","to":"platformer-game:micro-skill-tree-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:micro-progression-system-integration","to":"platformer-game:micro-skill-tree-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:micro-bulgarian-localization","to":"platformer-game:micro-skill-tree-architecture","relationType":"documents"}
{"type":"relation","from":"platformer-game:micro-selection-validation-logic","to":"platformer-game:micro-skill-tree-architecture","relationType":"validates"}
{"type":"relation","from":"platformer-game:micro-visual-state-management","to":"platformer-game:micro-skill-tree-architecture","relationType":"manages"}
{"type":"relation","from":"platformer-game:micro-input-handling-system","to":"platformer-game:micro-skill-tree-architecture","relationType":"handles"}
{"type":"relation","from":"platformer-game:micro-effect-display-system","to":"platformer-game:micro-skill-tree-architecture","relationType":"displays"}
{"type":"relation","from":"platformer-game:micro-integration-coordination","to":"platformer-game:micro-skill-tree-architecture","relationType":"coordinates"}
{"type":"relation","from":"platformer-game:micro-sprite-rendering-system","to":"platformer-game:micro-skill-tree-architecture","relationType":"renders"}
{"type":"relation","from":"platformer-game:micro-requirements-display-system","to":"platformer-game:micro-skill-tree-architecture","relationType":"shows"}
{"type":"relation","from":"platformer-game:micro-performance-optimization","to":"platformer-game:micro-skill-tree-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:micro-skill-tree-architecture","to":"platformer-game:micro-skill-tree-system","relationType":"implements"}
{"type":"relation","from":"platformer-game:micro-skill-tree-architecture","to":"platformer-game:skill-system","relationType":"extends"}
{"type":"relation","from":"platformer-game:micro-skill-tree-architecture","to":"platformer-game:ui-architecture","relationType":"enhances"}
{"type":"entity","name":"platformer-game:render-coordination-architecture","entityType":"rendering_system","observations":["Main rendering coordination system with 80+ lines of visual composition logic","Central render() function called every frame at 60 FPS target","Canvas clearing and frame preparation with ctx.clearRect() operations","Z-depth debug visualization with Z_MIN/Z_MAX boundary lines","Entity sorting integration with getSortedEntitiesForRendering() for proper 2.5D layering","Animation system coordination through AnimationRenderer.drawAnimatedEntities()","Damage number rendering system for floating combat feedback","Entity labels system with universal information display framework","UI rendering integration with player portraits and interface overlays","Bulgarian documentation with native language comments for Bulgarian developers","Debug labels system with Z-depth coordinates and rendering order information","Performance optimization with efficient canvas operations and minimal overhead"]}</observations>
{"type":"entity","name":"platformer-game:z-depth-debug-visualization","entityType":"debug_system","observations":["Z-depth boundary line drawing with green and purple stroke colors","Z_MIN line calculation using baselineY - Z_MIN * scale factor","Z_MAX line calculation using baselineY - Z_MAX * scale factor","Canvas width spanning lines for full viewport coverage","Real canvas height integration for accurate baseline positioning","Development debugging tool for 2.5D depth system validation","Visual depth boundary representation for collision system verification","Performance monitoring integration with rendering pipeline","Debug visualization toggle capability for production builds","Cross-browser compatibility with standard Canvas API","Integration with animation system Z-coordinate calculations","Real-time depth boundary adjustment for dynamic environments"]}</observations>
{"type":"entity","name":"platformer-game:entity-sorting-coordination","entityType":"rendering_mechanic","observations":["getSortedEntitiesForRendering() integration for proper 2.5D entity layering","Y-Z coordinate calculation for depth-based sorting algorithm","Entity array preprocessing before rendering operations","Z-order preservation ensuring correct visual depth relationships","Performance optimization with pre-sorted entity arrays","AnimationRenderer.drawAnimatedEntities() with skip sorting parameter","Multi-entity scene management with depth-based occlusion","Collision system integration with Z-depth sorting validation","Rendering pipeline efficiency with optimized entity iteration","Debug support with rendering order visualization","Cross-system coordination between game logic and rendering","Scalable sorting system supporting dynamic entity counts"]}</observations>
{"type":"entity","name":"platformer-game:animation-renderer-integration","entityType":"rendering_coordination","observations":["AnimationRenderer.drawAnimatedEntities() centralized entity drawing system","Pre-sorted entity array passing with skip sorting optimization","Generic entity rendering support for all animated and non-animated types","Z-depth calculation integration through getZOffset() method","Per-frame collision box positioning with entity state awareness","Debug visualization system for hit boxes and attack ranges","Batch rendering capabilities for performance optimization","Sprite sheet rendering with facing direction transformations","Memory efficient rendering with optimized canvas operations","Integration with animation state machines and collision system","Camera support with viewport culling for large scenes","Multiplayer rendering support with player-specific views"]}</observations>
{"type":"entity","name":"platformer-game:damage-numbers-rendering","entityType":"ui_feedback","observations":["DamageNumberManager.render() integration for floating combat feedback","Canvas context passing for damage number drawing operations","Critical hit support with enhanced visual scaling effects","Animation system coordination with velocity-based number movement","Fade-out mechanics with alpha reduction over time spans","World-to-screen coordinate conversion for proper positioning","Performance optimization with active number filtering","Color-coded damage display (red normal, yellow critical)","Font scaling system with critical multiplier effects","Real-time damage tracking with timestamp integration","Multiplayer compatibility with per-player damage display","Debug support with damage number lifetime visualization"]}</observations>
{"type":"entity","name":"platformer-game:entity-labels-framework","entityType":"information_system","observations":["Universal renderEntityLabels() function for all entity information display","Entity type routing with enemy/player specific label functions","Z-order preservation with labels rendered on top of entities","Debug label integration with comprehensive development information","Performance optimization with conditional entity type checking","Scalable label system supporting custom entity types","Integration with entity lifecycle and rendering pipeline","Bulgarian localization support for native language display","Real-time information updates with entity state synchronization","Debug visualization toggle for production builds","Cross-system data access for entity information retrieval","Extensible framework for additional label types"]}</observations>
{"type":"entity","name":"platformer-game:enemy-health-status-display","entityType":"ui_component","observations":["getEnemyHealthStatus() integration for health percentage calculation","Color-coded health display with green/yellow/orange/red progression","Bulgarian status text with cultural localization ('–ñ–∏–≤', '–†–∞–Ω–µ–Ω', '–ö—Ä–∏—Ç–∏—á–Ω–æ')","Enemy information display with displayName, level, and health values","Text positioning above enemy entities with Z-depth awareness","Real-time health updates during combat sequences","Performance optimization with cached health calculations","Visual feedback system for player combat awareness","Integration with enemy data system for stat display","Debug support with health calculation validation","Accessibility features with clear health indicators","Multiplayer compatibility with per-entity health tracking"]}</observations>
{"type":"entity","name":"platformer-game:ui-rendering-coordination","entityType":"interface_system","observations":["UISystem.renderPlayerPortraits() integration for player interface display","Canvas context passing for UI rendering operations","Player portrait rendering with multiplayer support","Interface overlay positioning above game world elements","Performance optimization with conditional UI rendering","Real-time UI updates during gameplay sequences","Integration with game state for UI visibility control","Cross-system coordination between rendering and UI systems","Debug support with UI element visualization","Scalable UI system supporting multiple interface components","Responsive design with canvas size adaptation","User experience focus with clear interface presentation"]}</observations>
{"type":"entity","name":"platformer-game:bulgarian-render-documentation","entityType":"localization_system","observations":["Native Bulgarian comments explaining rendering system mechanics","Cultural adaptation with Bulgarian technical terminology","Code maintainability improved with native language documentation","Developer experience enhanced with familiar language","Documentation quality with detailed Bulgarian explanations","Language consistency with other Bulgarian codebase elements","Accessibility improvement for Bulgarian development team","Translation accuracy maintaining technical precision","Code culture support with localized technical writing","Future maintenance supported with sustainable documentation","Professional documentation standards in Bulgarian","Knowledge transfer facilitated for Bulgarian developers"]}</observations>
{"type":"entity","name":"platformer-game:debug-labels-rendering","entityType":"development_tool","observations":["Z-depth coordinate display with Z:${entity.z.toFixed(1)} formatting","Effective Y calculation with EffY:${effectiveY.toFixed(1)} display","Rendering order tracking with Order:${index+1} information","Debug text positioning above entity sprites with proper spacing","Performance monitoring with entity count and rendering statistics","Development debugging tool for Z-depth system validation","Visual feedback system for rendering pipeline verification","Real-time debug information during gameplay sequences","Integration with entity iteration and rendering loops","Debug toggle capability for production builds","Comprehensive development support for rendering issues","Cross-system debugging with entity state information"]}</observations>
{"type":"entity","name":"platformer-game:render-performance-characteristics","entityType":"performance_system","observations":["60 FPS rendering target with optimized canvas operations","Minimal canvas clearing with efficient ctx.clearRect() operations","Entity iteration optimization with pre-sorted arrays","Conditional rendering checks preventing unnecessary operations","Memory efficient rendering with shared canvas context","Batch operation support for damage numbers and UI elements","Debug rendering toggle for performance monitoring","Cross-browser compatibility with standard Canvas API","Scalable rendering system supporting variable entity counts","Performance profiling integration with rendering statistics","Resource optimization with lazy loading capabilities","Real-time performance monitoring during gameplay"]}</observations>
{"type":"entity","name":"platformer-game:render-system-integration","entityType":"system_coordination","observations":["Animation system integration through AnimationRenderer coordination","Damage number system integration with DamageNumberManager","UI system integration through UISystem.renderPlayerPortraits()","Entity sorting integration with getSortedEntitiesForRendering()","Debug visualization integration with Z-lines and labels","Game loop integration called after update() operations","Performance monitoring integration with frame rate tracking","Cross-system data sharing with entity information access","Real-time synchronization with game state updates","Multiplayer support with player-specific rendering","Error handling integration with graceful system fallbacks","Extensibility framework for additional rendering components"]}</observations>
{"type":"relation","from":"platformer-game:render-coordination-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:z-depth-debug-visualization","to":"platformer-game:render-coordination-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:entity-sorting-coordination","to":"platformer-game:render-coordination-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:animation-renderer-integration","to":"platformer-game:render-coordination-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:damage-numbers-rendering","to":"platformer-game:render-coordination-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:entity-labels-framework","to":"platformer-game:render-coordination-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:enemy-health-status-display","to":"platformer-game:render-coordination-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:ui-rendering-coordination","to":"platformer-game:render-coordination-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:bulgarian-render-documentation","to":"platformer-game:render-coordination-architecture","relationType":"documents"}
{"type":"relation","from":"platformer-game:debug-labels-rendering","to":"platformer-game:render-coordination-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:render-performance-characteristics","to":"platformer-game:render-coordination-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:render-system-integration","to":"platformer-game:render-coordination-architecture","relationType":"coordinates"}
{"type":"relation","from":"platformer-game:render-coordination-architecture","to":"platformer-game:rendering-system","relationType":"implements"}
{"type":"relation","from":"platformer-game:render-coordination-architecture","to":"platformer-game:animation-system","relationType":"coordinates_with"}
{"type":"relation","from":"platformer-game:render-coordination-architecture","to":"platformer-game:ui-architecture","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:render-coordination-architecture","to":"platformer-game:game-loop-architecture","relationType":"executes"}
{"type":"entity","name":"platformer-game:resource-manager-architecture","entityType":"resource_system","observations":["Comprehensive ResourceManager class with 250+ lines implementing Resource Manager Pattern","Observer Pattern implementation with listeners array for UI update notifications","Entity-based instances creating dedicated ResourceManager for each game entity","Global registry system with window.resourceManagers Map for entity-to-manager mapping","Resource types constants (HEALTH, MANA, ENERGY) with configurable regeneration rates","Automatic regeneration system with mana (2/sec) and energy (5/sec) for players only","Skill resource consumption integration with consumeSkillResources() method","Dual property synchronization updating both player and characterInfo objects","Bounds checking with Math.max(0, Math.min(maxValue, newValue)) clamping","Observer notifications with notifyListeners(resourceType, oldValue, newValue, entity)","Performance optimization with efficient resource tracking and minimal overhead","Error handling with graceful fallbacks for invalid operations and missing data"]}</observations>
{"type":"entity","name":"platformer-game:observer-pattern-implementation","entityType":"design_pattern","observations":["Listeners array storing UI update callback functions for resource change notifications","addListener(callback) method registering UI components for resource updates","removeListener(callback) method cleaning up listeners to prevent memory leaks","notifyListeners(resourceType, oldValue, newValue, entity) broadcasting changes to all subscribers","Error handling in listener callbacks with try/catch blocks preventing UI crashes","Character stats UI integration with automatic refreshDisplay() calls on resource changes","Performance optimization with direct callback execution without complex event systems","Loose coupling between resource logic and UI components through observer pattern","Real-time UI synchronization ensuring immediate visual feedback for resource changes","Extensibility framework supporting multiple UI components listening to same resource","Memory management with proper listener cleanup on entity removal","Debug support with error logging for failed listener callbacks"]}</observations>
{"type":"entity","name":"platformer-game:resource-types-system","entityType":"resource_mechanic","observations":["Three resource types: HEALTH (no auto-regen), MANA (2/sec regen), ENERGY (5/sec regen)","Resource constants with RESOURCE_TYPES.HEALTH/MANA/ENERGY for type safety","getResource() method accessing entity properties with fallback to characterInfo","getMaxResource() method providing maximum values for bounds checking","Resource initialization with default values (health: 100, mana: 30, energy: 50)","Regeneration rates configuration allowing different recovery speeds per resource","Player-only regeneration preventing enemies from infinite resource recovery","Resource validation with canAfford() checks before consumption","Percentage calculations with getResourcePercentage() for UI progress bars","Formatted strings with getResourceString() returning 'current/max' format","Resource fullness checking with isResourceFull() utility method","Extensibility framework supporting additional resource types in future"]}</observations>
{"type":"entity","name":"platformer-game:regeneration-mechanics","entityType":"gameplay_mechanic","observations":["Automatic resource regeneration called every frame through updateRegeneration(dt)","Player-only regeneration system excluding enemies from resource recovery","Mana regeneration at 2 points per second for magical abilities","Energy regeneration at 5 points per second for physical skills","Delta time integration ensuring consistent regeneration across frame rates","Maximum value enforcement preventing regeneration beyond resource caps","Regeneration only when not at maximum optimizing unnecessary calculations","Integration with game loop calling updateRegeneration() during update cycle","Balance design differentiating mana (slower) and energy (faster) recovery","Performance optimization with conditional regeneration checks","Resource management encouraging strategic resource usage","Real-time resource recovery providing dynamic gameplay pacing"]}</observations>
{"type":"entity","name":"platformer-game:skill-resource-consumption","entityType":"resource_mechanic","observations":["consumeSkillResources(skillType) integration with skill tree system","Skill info retrieval through window.skillTreeManager.getSkillInfo(skillType)","Resource type mapping converting 'mana'/'energy' to internal constants","Resource cost extraction from skillInfo.resourceCost and resourceType","Affordability validation with canAfford() checks before consumption","Resource deduction using modifyResource() with 'skill_skillType' reason logging","Error handling with false return for unaffordable or invalid skills","Integration with combat system for skill activation resource validation","Balance design preventing resource-less skill spamming","Performance optimization with efficient skill info lookups","Debug logging with detailed consumption information","Extensibility supporting additional resource types for skills"]}</observations>
{"type":"entity","name":"platformer-game:global-registry-system","entityType":"system_infrastructure","observations":["window.resourceManagers Map providing entity-to-ResourceManager mapping","getResourceManager(entity) factory function with lazy initialization","Automatic ResourceManager creation for entities without existing managers","Map-based storage ensuring O(1) constant-time manager lookups","removeResourceManager(entity) cleanup function for removed entities","Memory management preventing resource manager leaks for deleted entities","Global accessibility allowing any system to access entity resource managers","Performance optimization with cached manager instances","Integration with entity lifecycle managing manager creation/destruction","Error prevention with null checks and graceful handling","Debug support with Map inspection for development monitoring","Scalability supporting hundreds of entities with individual managers"]}</observations>
{"type":"entity","name":"platformer-game:resource-ui-integration","entityType":"interface_system","observations":["Automatic character stats UI updates through listener system","characterStatsUI.refreshDisplay() integration for real-time resource feedback","Conditional listener attachment only for player entities (not enemies)","Player identification through entity.entityType !== 'enemy' checks","UI synchronization ensuring immediate visual feedback on resource changes","Listener callback with (resourceType, oldValue, newValue, entity) parameters","Integration timing with resource modifications triggering UI updates","Performance optimization with targeted UI updates only for relevant changes","User experience enhancement with instant resource bar updates","Multiplayer support with per-player UI refresh coordination","Error handling preventing UI crashes from resource system failures","Extensibility supporting additional UI components through listener pattern"]}</observations>
{"type":"entity","name":"platformer-game:resource-bounds-checking","entityType":"validation_system","observations":["Math.max(0, Math.min(maxValue, newValue)) clamping preventing invalid values","Lower bound enforcement preventing negative resource values","Upper bound enforcement preventing resource values exceeding maximums","modifyResource() method applying bounds checking before value assignment","setResource() method using bounds checking for direct value setting","Resource integrity maintaining valid ranges for all operations","Balance protection preventing resource exploits through bounds violations","Error prevention ensuring game stability with invalid resource calculations","Performance optimization with efficient Math operations","Debug support with bounds checking validation","User experience protection from visual glitches with out-of-bounds values","Extensibility framework supporting configurable bounds per resource type"]}</observations>
{"type":"entity","name":"platformer-game:resource-synchronization-system","entityType":"data_synchronization","observations":["Dual property updates maintaining consistency between player and characterInfo","Entity.mana synchronization with entity.characterInfo.mana for mana resources","Entity.energy synchronization with entity.characterInfo.energy for energy resources","Health resource updates applied only to entity.health (no characterInfo equivalent)","Data integrity ensuring resource values consistent across object structures","Combat system compatibility with synchronized resource access patterns","UI system support with unified resource value access","Performance optimization with simultaneous property updates","Error prevention with conditional characterInfo checks","Backwards compatibility supporting legacy property access patterns","Debug validation ensuring synchronization accuracy","Integration flexibility with multiple data structure access points"]}</observations>
{"type":"entity","name":"platformer-game:resource-error-handling","entityType":"error_management","observations":["Unknown resource type warnings with console.warn() logging","Invalid skill info handling with graceful false returns","Missing skill tree manager checks preventing system crashes","Listener callback error handling with try/catch blocks","Entity property access validation with fallback to default values","Resource cost validation preventing negative consumption","Skill resource type conversion error handling","Performance degradation prevention through error boundary containment","Debug information provision with detailed error context","User experience preservation during error conditions","System stability maintenance with graceful error recovery","Development support with comprehensive error logging and reporting"]}</observations>
{"type":"entity","name":"platformer-game:resource-performance-characteristics","entityType":"performance_system","observations":["Efficient Map-based storage with O(1) constant-time lookups","Lazy initialization preventing unnecessary ResourceManager creation","Method binding optimization with pre-bound function references","Minimal overhead with lightweight property access patterns","Regeneration calculations optimized with conditional checks","Listener notification efficiency with direct callback execution","Memory management with proper cleanup on entity removal","Performance monitoring through regeneration rate calculations","Scalable architecture supporting hundreds of entities","Resource validation efficiency with simple bounds checking","Cross-browser compatibility with standard JavaScript operations","Real-time performance with frame-rate independent regeneration"]}</observations>
{"type":"entity","name":"platformer-game:resource-system-integration","entityType":"system_coordination","observations":["Combat system integration through resource consumption validation","Skill tree system connection via consumeSkillResources() method","Character info synchronization with dual property updates","UI system coordination through observer pattern notifications","Game loop integration with updateRegeneration() calls","Entity lifecycle management through global registry system","Player management integration with player-specific resource handling","Enemy system exclusion from regeneration mechanics","Multiplayer support with per-entity resource manager instances","Performance coordination with efficient resource tracking","Error handling integration across all consuming systems","Extensibility framework for additional resource-dependent systems"]}</observations>
{"type":"entity","name":"platformer-game:resource-utility-methods","entityType":"utility_system","observations":["getResourcePercentage(resourceType) returning 0-100 scale for UI bars","isResourceFull(resourceType) boolean check for maximum value conditions","getResourceString(resourceType) formatted 'current/max' display strings","setResource(resourceType, value) direct value setting with bounds checking","restoreResource(resourceType) convenience method for maximum restoration","Resource access utilities providing common operations","UI compatibility with percentage and string formatting methods","Performance utilities with efficient calculation methods","Debug utilities supporting resource state inspection","Integration utilities for common resource operations","Extensibility framework for additional utility methods","User experience utilities for resource display and management"]}</observations>
{"type":"relation","from":"platformer-game:resource-manager-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:observer-pattern-implementation","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-types-system","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:regeneration-mechanics","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:skill-resource-consumption","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:global-registry-system","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-ui-integration","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-bounds-checking","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-synchronization-system","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-error-handling","to":"platformer-game:resource-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:resource-performance-characteristics","to":"platformer-game:resource-manager-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:resource-system-integration","to":"platformer-game:resource-manager-architecture","relationType":"coordinates"}
{"type":"relation","from":"platformer-game:resource-utility-methods","to":"platformer-game:resource-manager-architecture","relationType":"extends"}
{"type":"relation","from":"platformer-game:resource-manager-architecture","to":"platformer-game:combat-system","relationType":"provides_resources_for"}
{"type":"relation","from":"platformer-game:resource-manager-architecture","to":"platformer-game:skill-system","relationType":"validates_costs_for"}
{"type":"relation","from":"platformer-game:resource-manager-architecture","to":"platformer-game:ui-architecture","relationType":"notifies_changes_to"}
{"type":"relation","from":"platformer-game:resource-manager-architecture","to":"platformer-game:game-loop-architecture","relationType":"regenerates_in"}
{"type":"entity","name":"platformer-game:skill-tree-manager-architecture","entityType":"skill_system","observations":["Comprehensive SkillTreeManager class with 500+ lines of advanced skill progression logic","Unified skill unlocking system supporting both single-level and multi-level skills","canUnlockSkill() method with prerequisite checking and skill point validation","unlockSkill() implementation handling level progression and passive effect application","Prerequisites validation system supporting skill_level, player_level, quest_completed, achievement_unlocked types","Passive effect application with dot notation property navigation for nested stat modifications","Level-based progression system with dynamic cost calculation from levelCosts arrays","Skill point management with cost validation and consumption tracking","Effect accumulation system supporting multiple bonuses per skill level","UI integration methods providing upgrade information for menu displays","Skill state persistence through unlockedSkills Set and skillLevels Map tracking","Backwards compatibility support for legacy skill systems","Performance optimization with efficient prerequisite checking and effect application"]}</observations>
{"type":"entity","name":"platformer-game:prerequisites-validation-system","entityType":"dependency_system","observations":["Data-driven prerequisites framework supporting multiple dependency types","skill_level prerequisites requiring specific skills at minimum levels","player_level prerequisites checking character progression thresholds","quest_completed prerequisites for story-driven skill unlocks","achievement_unlocked prerequisites for reward-based progression","checkPrerequisites() method processing all prerequisite types sequentially","Validation logic combining AND conditions across all prerequisite requirements","Error handling for unknown prerequisite types with warning logging","Performance optimization with early exit on failed prerequisites","Extensibility framework supporting additional prerequisite types","Integration with skill tree data structure for flexible dependency definition","Debug support with detailed prerequisite validation logging"]}</observations>
{"type":"entity","name":"platformer-game:passive-effect-application-system","entityType":"stat_modification","observations":["Dot notation property navigation supporting nested stat modifications","applyPassiveEffect() method handling complex property path resolution","characterInfo.baseDefense and similar nested property modifications","Effect value accumulation with proper type checking and validation","Multiple effects per level support with array processing logic","Stat modification logging with before/after value tracking","Error handling for invalid property paths with graceful degradation","Performance optimization with cached property navigation","Integration with skill leveling system for progressive stat bonuses","Balance design supporting various stat types and modification patterns","Debug support with detailed effect application tracking","Extensibility framework for custom stat modification patterns"]}</observations>
{"type":"entity","name":"platformer-game:level-based-skill-progression","entityType":"progression_mechanic","observations":["Multi-level skill system with configurable maximum levels","levelCosts arrays defining progressive difficulty scaling","Dynamic cost calculation based on current skill level","Level progression tracking with skillLevels Map for per-skill level storage","Max level enforcement preventing over-leveling progression","Effect accumulation across multiple skill levels","UI feedback system showing current vs maximum level indicators","Balance design with increasing costs for meaningful progression","Backwards compatibility with legacy single-level skill systems","Performance optimization with efficient level lookup operations","Integration with skill point system for cost validation","Extensibility supporting unlimited skill level potential"]}</observations>
{"type":"entity","name":"platformer-game:micro-skill-progression-framework","entityType":"specialization_system","observations":["4 distinct micro skill progression systems with unique gameplay mechanics","OnePerRowSystem: Row-based progression requiring previous row completion","LevelBasedSystem: Player level requirements without skill point costs","AbsoluteSystem: All skills available with individual point costs","InstantSystem: One per row progression without skill point requirements","Progression delegation architecture routing to appropriate system logic","System-specific validation methods for selection availability checking","Resource consumption patterns varying by progression system type","Effect application coordination for parent skill modifications","Balance design providing different progression experiences","Performance optimization with efficient system selection","Extensibility framework for additional progression patterns"]}</observations>
{"type":"entity","name":"platformer-game:micro-skill-tree-manager","entityType":"specialization_coordinator","observations":["MicroSkillTreeManager class coordinating skill specialization systems","initializePlayerMicroSkills() method setting up player specialization tracking","canSelectMicroSkill() delegation to appropriate progression system","selectMicroSkill() execution with resource consumption and effect application","isMicroSkillSelected() state checking for specialization availability","getMicroSkillStatus() status reporting for UI feedback","getSelectedMicroSkillsForPlayer() helper method for progression system access","Progression systems registry with 4 different system implementations","Player integration through window.players array access","Skill tree integration through SKILL_TREE data structure","Performance optimization with efficient state management","Debug support with comprehensive selection status reporting"]}</observations>
{"type":"entity","name":"platformer-game:skill-point-management-system","entityType":"resource_tracking","observations":["Skill point consumption tracking for skill unlocking and upgrading","Dynamic cost calculation from levelCosts arrays for progressive difficulty","Skill point availability validation before skill operations","Point deduction logic with proper state management","UI integration showing available skill points in menu displays","Balance design with meaningful progression costs","Resource management coordination with player skill point pools","Validation system preventing negative skill point states","Integration with skill leveling system for cost retrieval","Performance optimization with efficient point calculations","Debug support with skill point transaction logging","Extensibility supporting various cost calculation patterns"]}</observations>
{"type":"entity","name":"platformer-game:skill-ui-integration-methods","entityType":"interface_support","observations":["getSkillUpgradeInfo() method providing comprehensive UI data","Current level, maximum level, and upgrade availability information","Next level cost calculation for UI display requirements","Next level effect description extraction for user guidance","Can upgrade validation for button state management","UI data preparation with structured return objects","Integration with menu system for skill tree displays","Performance optimization with cached information retrieval","User experience enhancement with clear progression information","Debug support with upgrade information validation","Extensibility supporting additional UI data requirements","Menu system integration for real-time skill information updates"]}</observations>
{"type":"entity","name":"platformer-game:effect-accumulation-system","entityType":"bonus_calculation","observations":["Multi-level effect accumulation across skill progression levels","levelEffects arrays supporting single effects or multiple effect arrays","Effect parsing logic handling both single and array effect structures","Progressive bonus calculation with level-based stacking","Stat modification accumulation for meaningful progression","Effect description generation for UI display purposes","Balance design with carefully scaled effect progression","Performance optimization with efficient effect processing","Integration with passive effect application system","Debug support with effect accumulation tracking","Extensibility supporting complex effect combinations","User feedback system showing accumulated benefits"]}</observations>
{"type":"entity","name":"platformer-game:skill-state-persistence-system","entityType":"data_persistence","observations":["unlockedSkills Set tracking binary skill availability states","skillLevels Map storing per-skill level progression data","State persistence across game sessions and player actions","Backwards compatibility with legacy skill tracking systems","Performance optimization with efficient Set and Map operations","State validation preventing invalid skill states","Integration with save/load system for persistence","Debug support with skill state inspection capabilities","Memory management with proper data structure cleanup","Scalability supporting large numbers of skills and levels","Error prevention with state consistency checking","Player progression tracking across multiple game sessions"]}</observations>
{"type":"entity","name":"platformer-game:global-skill-instance-management","entityType":"system_coordination","observations":["window.skillTreeManager global instance for main skill tree operations","window.microSkillTreeManager global instance for specialization systems","Global accessibility enabling cross-module skill system access","Singleton pattern ensuring consistent skill system state","Integration with other game systems through global references","Performance optimization with pre-initialized instances","Debug support with global instance inspection","Backwards compatibility with legacy skill system access","Error prevention with instance availability checking","System coordination through centralized manager instances","Extensibility supporting additional skill system components","Module integration through global namespace management"]}</observations>
{"type":"entity","name":"platformer-game:skill-data-integration-system","entityType":"data_management","observations":["SKILL_TREE data structure integration from data/skill-data.js","SKILL_TYPES constants providing type safety for skill references","RESOURCE_TYPES integration for skill resource requirements","DAMAGE_TYPES, RANGE_TYPES, TARGET_TYPES constants for skill properties","Global exports making skill data accessible across modules","Data validation ensuring skill structure integrity","Performance optimization with pre-loaded skill definitions","Integration with skill tree manager for data access","Debug support with skill data structure inspection","Extensibility supporting additional skill data types","Module coordination through shared data references","Development support with comprehensive skill data access"]}</observations>
{"type":"entity","name":"platformer-game:skill-system-performance-optimization","entityType":"system_performance","observations":["Efficient Map and Set operations for skill state management","Prerequisite checking optimization with early exit strategies","Effect application caching for repeated stat modifications","Level cost calculation optimization with pre-computed arrays","UI data preparation efficiency with structured return objects","Memory management with proper data structure cleanup","Cross-system integration with minimal overhead","Scalable architecture supporting hundreds of skills","Real-time performance with frame-rate independent operations","Debug performance tracking with operation timing","Browser compatibility with standard JavaScript data structures","Optimization for both single-level and multi-level skill systems"]}</observations>
{"type":"relation","from":"platformer-game:skill-tree-manager-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:prerequisites-validation-system","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:passive-effect-application-system","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:level-based-skill-progression","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:micro-skill-progression-framework","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:micro-skill-tree-manager","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:skill-point-management-system","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:skill-ui-integration-methods","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:effect-accumulation-system","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:skill-state-persistence-system","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:global-skill-instance-management","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:skill-data-integration-system","to":"platformer-game:skill-tree-manager-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:skill-system-performance-optimization","to":"platformer-game:skill-tree-manager-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:skill-tree-manager-architecture","to":"platformer-game:skill-system","relationType":"implements"}
{"type":"relation","from":"platformer-game:skill-tree-manager-architecture","to":"platformer-game:character-info-architecture","relationType":"modifies_stats_of"}
{"type":"relation","from":"platformer-game:skill-tree-manager-architecture","to":"platformer-game:combat-system","relationType":"enhances"}
{"type":"relation","from":"platformer-game:skill-tree-manager-architecture","to":"platformer-game:ui-architecture","relationType":"provides_data_for"}
{"type":"relation","from":"platformer-game:skill-tree-manager-architecture","to":"platformer-game:resource-management","relationType":"consumes"}
{"type":"entity","name":"platformer-game:ui-system-architecture","entityType":"interface_system","observations":["Comprehensive UI system with 300+ lines of advanced user interface logic","Window.UISystem export providing centralized UI coordination interface","Character status display system with health/mana/energy bars for all players","Player portrait rendering with character icons and player number indicators","Start screen UI system for character selection and multiplayer setup","Multiplayer character selection supporting up to 4 players","Canvas-based rendering integration for status bars and portraits","Status bar rendering with background/fill/border layers and color coding","Half-screen positioning system for optimal 4-player UI layout","Start screen input handling with keyboard and gamepad support","Character selection logic with join/confirm mechanics","UI state management for start screen to gameplay transitions","Performance optimization with efficient canvas operations and minimal overhead"]}</observations>
{"type":"entity","name":"platformer-game:character-status-display-system","entityType":"ui_component","observations":["Complete character status UI rendering for individual players","Health bar display with red color coding and HP label","Mana bar display with blue color coding and MP label","Energy bar display with orange color coding and EN label","Status bar dimensions: 150px width, 20px height with 4px fill inset","Background bars with #333 background color and #666 borders","Fill bar calculations using (current/max) * (width-4) formula","Text positioning with left-aligned labels and proper spacing","Canvas context preservation with ctx.save()/ctx.restore() calls","Player-specific positioning with x/y coordinates for each player","Integration with render loop through renderCharacterStatusUI() calls","Real-time status updates reflecting current player stats","Multiplayer support with individual status displays per player"]}</observations>
{"type":"entity","name":"platformer-game:player-portrait-rendering-system","entityType":"ui_component","observations":["Player portrait rendering with character color squares and borders","Player number display positioned to the left of portrait with P1-P4 labels","Portrait dimensions: 60x60 pixels with 7.5px padding for character squares","Character color visualization using player.color property","Portrait background with #222 fill and #666 stroke border","Player index calculation using window.players.indexOf(player) + 1","Text alignment with ctx.textAlign = 'right' for player numbers","Font styling with '18px Arial' for clear player identification","Positioning coordination with status bars for cohesive UI layout","Canvas rendering integration for consistent visual presentation","Multiplayer support with unique portrait positioning for each player","Visual feedback system for player identification in multiplayer"]}</observations>
{"type":"entity","name":"platformer-game:start-screen-ui-system","entityType":"interface_system","observations":["Start screen HTML generation with dynamic character grid creation","Character option rendering with color squares and name labels","Selection indicator system showing current player selections","Start button logic with disabled state until all players confirm","Player status display with joined player count tracking","Character grid layout with 200px spacing between options","Selection visualization with P1-P4 labels on selected characters","HTML structure with start-screen class and proper CSS integration","Dynamic content updates based on player selections and confirmations","User guidance with instruction text for player joining","Start screen lifecycle management with show/hide transitions","Integration with character selection and game initialization systems"]}</observations>
{"type":"entity","name":"platformer-game:multiplayer-character-selection","entityType":"ui_mechanic","observations":["4-player character selection system with individual player workflows","Player joining mechanism using 1-4 number keys for player entry","Character selection cycling with ArrowLeft/Right for character navigation","Selection confirmation with Enter key for player commitment","Auto-confirmation for Players 3&4 to facilitate testing and development","Unique character assignment preventing duplicate character selection","Selection state management with temporary and confirmed states","Player removal capability with selection cleanup on exit","Character availability checking skipping already selected characters","First available character auto-selection for new players","UI feedback with real-time selection indicator updates","Multiplayer coordination with all players confirmed requirement","Start button activation when all joined players confirm selections"]}</observations>
{"type":"entity","name":"platformer-game:start-screen-input-handling","entityType":"input_system","observations":["Start screen input tracking with separate key state management","Dual key tracking system supporting both key and code properties","Key press consumption preventing input spam with one-time processing","Input validation with window.gameState === 'start' state checking","Player joining input with 1-4 key mapping to joinPlayer() calls","Character selection input with ArrowLeft/Right for selectCharacter() calls","Confirmation input with Enter key for confirmSelection() calls","Input event handling with keydown/keyup event listeners","Debug logging with detailed input event tracking and state changes","Error handling with function availability checks before calls","Performance optimization with efficient input processing","Integration with game logic functions for seamless UI coordination"]}</observations>
{"type":"entity","name":"platformer-game:status-bar-rendering-system","entityType":"ui_component","observations":["Universal status bar rendering function with configurable parameters","Background bar rendering with customizable background color","Fill bar calculation with current/max ratio and inset positioning","Border rendering with configurable stroke color and width","Text label rendering with left-aligned positioning and white color","Font styling with '14px Arial' for readable status information","Parameter flexibility with x/y/width/height/color/bgColor options","Canvas context management with proper coordinate system handling","Visual hierarchy with background, fill, border, and text layers","Performance optimization with efficient rectangle and text operations","Integration flexibility supporting various UI bar types","Scalable design supporting different bar sizes and colors"]}</observations>
{"type":"entity","name":"platformer-game:character-selection-logic","entityType":"ui_mechanic","observations":["Character selection workflow with join ‚Üí select ‚Üí confirm sequence","Player joining with automatic first available character assignment","Character cycling with next/previous navigation logic","Selection confirmation locking player choices","Character availability validation preventing duplicate selections","Selection state tracking with playerSelections and confirmedSelections","UI synchronization with real-time selection indicator updates","Player workflow management ensuring logical progression","Error prevention with availability checks before operations","User experience optimization with clear selection feedback","Multiplayer coordination with individual player state management","Start condition validation requiring all joined players to confirm"]}</observations>
{"type":"entity","name":"platformer-game:ui-rendering-integration","entityType":"interface_coordination","observations":["Canvas-based UI rendering integration with game rendering pipeline","RenderPlayerPortraits() called from render.js for status UI display","Half-screen positioning calculations for optimal 4-player layout","Canvas context passing for consistent rendering operations","Real-time UI updates during gameplay rendering cycles","Integration with render loop through consistent frame updates","Performance coordination with efficient rendering operations","Visual consistency with game world rendering pipeline","State synchronization with player array changes","Multiplayer support with dynamic player count handling","Error handling with fallback rendering for missing players","Scalable positioning supporting variable player counts"]}</observations>
{"type":"entity","name":"platformer-game:start-screen-loop-system","entityType":"ui_mechanic","observations":["RequestAnimationFrame-based rendering loop for start screen","Game state checking with window.gameState === 'start' condition","Continuous rendering until game state transitions to 'playing'","Canvas clearing with ctx.fillRect() for frame preparation","HTML title and instructions rendering on canvas","Player count display with dynamic joined player tracking","Character grid rendering with selection indicators","Start screen input processing during each frame","Performance optimization with efficient rendering operations","State transition handling with loop termination on game start","Integration with input handling for responsive user interaction","Visual feedback system for real-time player selection updates"]}</observations>
{"type":"entity","name":"platformer-game:ui-state-management","entityType":"interface_coordination","observations":["Start screen to gameplay state transitions with window.gameState management","Menu state coordination preventing UI conflicts during transitions","Start screen lifecycle with initialization and cleanup procedures","Game state synchronization ensuring proper UI state alignment","Transition timing with immediate visual feedback on state changes","UI visibility management with display property controls","State validation preventing invalid UI state combinations","Integration with game initialization for seamless transitions","Performance optimization with conditional rendering based on state","Error prevention with state checking before operations","User experience focus with clear state transition feedback","Backwards compatibility with legacy state management patterns"]}</observations>
{"type":"entity","name":"platformer-game:ui-performance-characteristics","entityType":"performance_system","observations":["Efficient canvas operations with minimal rendering overhead","Status bar calculations optimized with simple arithmetic operations","Player portrait rendering with lightweight rectangle and text operations","Start screen rendering with conditional updates based on state","Canvas context management with proper save/restore cycles","Memory efficient rendering with shared canvas context","Performance monitoring with requestAnimationFrame timing","Scalable rendering supporting variable player counts","Cross-browser compatibility with standard Canvas API","Real-time performance with 60 FPS rendering capability","Resource optimization with lazy initialization patterns","UI responsiveness with immediate visual feedback updates","Debug performance tracking with rendering operation logging","Optimization for both start screen and gameplay UI rendering"]}</observations>
{"type":"entity","name":"platformer-game:ui-system-integration","entityType":"interface_coordination","observations":["Game logic integration through window.players array access","Character data integration with window.characters array usage","Game state coordination with window.gameState synchronization","Input system integration with start screen input handling","Render system integration with renderPlayerPortraits() calls","Menu system coordination preventing UI conflicts","Player management integration with joinPlayer() and confirmSelection() calls","Character selection integration with selectCharacter() function calls","Game initialization integration with initGameWithSelections() coordination","Resource system integration with player stat display updates","Animation system coordination with player portrait positioning","Cross-system communication enabling seamless UI functionality","Error handling integration with function availability validation","Performance coordination with efficient cross-module communication"]}</observations>
{"type":"relation","from":"platformer-game:ui-system-architecture","to":"platformer-game:project","relationType":"contains"}
{"type":"relation","from":"platformer-game:character-status-display-system","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:player-portrait-rendering-system","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:start-screen-ui-system","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:multiplayer-character-selection","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:start-screen-input-handling","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:status-bar-rendering-system","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:character-selection-logic","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:ui-rendering-integration","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:start-screen-loop-system","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:ui-state-management","to":"platformer-game:ui-system-architecture","relationType":"part_of"}
{"type":"relation","from":"platformer-game:ui-performance-characteristics","to":"platformer-game:ui-system-architecture","relationType":"optimizes"}
{"type":"relation","from":"platformer-game:ui-system-integration","to":"platformer-game:ui-system-architecture","relationType":"coordinates"}
{"type":"relation","from":"platformer-game:ui-system-architecture","to":"platformer-game:ui-architecture","relationType":"implements"}
{"type":"relation","from":"platformer-game:ui-system-architecture","to":"platformer-game:input-handling-architecture","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:ui-system-architecture","to":"platformer-game:rendering-system","relationType":"provides_ui_for"}
{"type":"relation","from":"platformer-game:ui-system-architecture","to":"platformer-game:game-state-management","relationType":"responds_to"}
{"type":"relation","from":"platformer-game:ui-system-architecture","to":"platformer-game:character-info-architecture","relationType":"displays_stats_from"}
