{"type":"entity","name":"platformer-game:project","entityType":"software_project","observations":["Title: Platformer Browser Game with Z-Depth Physics","Description: Advanced 2D platformer game featuring 3D collision system, AI behavior trees, skill progression, and modular architecture","Language: Vanilla JavaScript (no frameworks)","Rendering: HTML5 Canvas API (1920x1080 resolution)","Architecture: Modular system-based design with clean separation of concerns","Unique Features: Z-depth collision system, Behavior Tree AI, Micro skill trees, Multiplayer support","Status: Active development (Last Updated: January 2026)","Complexity: High (6 major integrated systems: Combat, Animation, AI, Skill, Collision, Rendering)","Performance: 60 FPS target, optimized rendering pipeline","Code Quality: Comprehensive documentation, consistent patterns, Bulgarian localization"]}
{"type":"entity","name":"platformer-game:technology-stack","entityType":"technology","observations":["Vanilla JavaScript: Core game logic, no frameworks, maximum performance","HTML5 Canvas API: 2D graphics rendering with Z-depth simulation, hardware accelerated","Z-Depth Physics: Custom 3D collision system in 2D space using X, Y, Z coordinates","Benefits: Full control, lightweight, depth-based collision detection, unique 2.5D gameplay"]}
{"type":"entity","name":"platformer-game:combat-system","entityType":"game_system","observations":["Purpose: Combat resolution and damage calculation engine","Files: combat_system.js","Classes: CombatAttributes (base stats), CombatCalculator (damage formulas), CombatResolver (attack flow), EnemyCombatManager (enemy coordination), DamageNumberManager (UI feedback)","Player Attack Formula: baseAttack + strength + equipment + buffs - debuffs + skillModifier","Enemy Attack Formula: baseAttack * animation-based multiplier (attackBox.width/30)","Defense: baseDefense + armor + shield + buffs - debuffs (enemies: baseDefense + (level-1)*2)","Critical Hits: 10% for players, 5% for enemies, 2x damage multiplier","Accuracy System: 70% base + skillModifier ± dodgeChance","Resource Management: Mana (magical skills), Energy (physical skills) via ResourceManager","Combat Events: Logging with max 50 entries, timestamp tracking, damage details","Enemy Coordination: 1.5 second cooldown between enemy attacks via Cooldown decorator","Death Handling: 1.5s blinking animation, entity removal, experience/gold rewards","Experience Rewards: enemy XP scaled by level, Gold rewards for economy","Unified Combat: All entities use CombatResolver.resolveAttack() or resolveAttackNoResourceCheck()","Integration: character_info.js, skill system, animation system for attack timing"]}
{"type":"entity","name":"platformer-game:animation-system","entityType":"game_system","observations":["Purpose: Animation management and sprite rendering system","Files: Animation System/ folder (7 files): animation_data.js, animation_renderer.js, animation_state_machine.js, animation_system.js, animation_utils.js, entity_animation.js, sprite_manager.js","Architecture: 5-phase refactoring completed December 2025 for clean separation of concerns","Classes: AnimationStateMachine (state transitions), AnimationRenderer (all entity drawing), SpriteManager (asset loading/caching), EntityAnimation (per-entity state)","Data System: animation_data.js contains pure data (ANIMATION_TYPES, SPRITE_CONFIGS, ANIMATION_DEFINITIONS)","Per-frame Collision Data: frameData.hitBox and attackBox for precise collision timing","Z-Depth Rendering: getZOffset() method for unified depth calculations, Z-sorting for proper rendering order","State Machines: Player states (idle/walking/running/jumping/attack variants), Enemy states (idle/walking/running/attack/hurt/dead)","Rendering: Centralized AnimationRenderer handles ALL entity drawing (sprites, shapes), batch rendering, sprite caching","Performance: 60 FPS target, optimized canvas operations, memory management","Debug Features: Visual hit boxes, attack boxes, collision borders, Z-lines, entity labels","Entity Types Supported: Players (knight), enemies (generic rectangles, blue_slime with sprites)","Benefits after refactoring: No code duplication, centralized logic, maintainable changes, consistent API"]}
{"type":"entity","name":"platformer-game:ai-system","entityType":"game_system","observations":["Purpose: Enemy AI using Behavior Tree + FSM architecture with BT Memory system and comprehensive logging","Files: Behavior Tree/ folder (6 files), base_enemy.js, blue_slime.js, collision.js (distance calculations)","Architecture: FSM (state management) + BT (decision making) + BT Memory (persistent constraints) + Script system (custom behaviors)","BT Memory Improvement System: Dynamic blocked behaviors Set prevents infinite loops from repeated interruptions","Dynamic Blocked Behaviors: Set-based system remembers failed commands (patrol_right, move_up, etc.) across BT consultations","Unique Enemy Instance IDs: Static counter assigns unique IDs (1,2,3...) to each enemy instance for clear log differentiation","Comprehensive AI Logging: Full interruption→constraint→BT decision flow tracking with instance IDs","Instance ID Logging: All AI logs include enemy instance ID (BlueSlime #1, BlueSlime #2, etc.) for multi-enemy debugging","Logging Categories: [BT_QUERY], [BT_CONSTRAINTS], [BT_DECISION], [NORMAL BEHAVIOR], [COMMAND INTERRUPTED], [AI_SITUATION], [BT_MEMORY]","Dual Strategy Chase System: X-overlap detection with X-first vs Z-first repositioning based on hitbox positioning","Strategic Repositioning: X-overlapping scenarios use X-first approach, X-separated use Z-first approach with deadlock prevention","X-Overlap Detection: Dynamic threshold-based detection (minXSeparation = 170px) for hitbox overlapping scenarios","Multi-Phase Logic: Strategy Selection → X/Z-Repositioning → X-Pursuit → Attack transitions with state protection","BT Node Types: Selector (priority OR), Sequence (AND), Decorator (Cooldown), Condition (checks), Action (commands)","BT Commands: idle, patrol, chase, attack, move_up, move_down","Chase State Tracking: chaseState object monitors strategy, Z-alignment, X-separation status, failure counts, escape distances","Deadlock Prevention: 4-phase boundary handling (detection → safe distance → fallback → recovery) with X-escape protection","Z-Alignment Thresholds: Configurable ±10px precision for reliable attack triggering","BT Context Enrichment: self/targets include w, h, collisionW, collisionH, zThickness for accurate distance calculations","Animation System Integration: Real-time hitbox access via animationSystem reference in BT context","Unified Distance System: calculateEntityDistance() with 3D support (X,Y,Z) and intelligent fallbacks","Rarity System: common/basic, elite/normal, boss/advanced with different behavior complexity","Intelligence Scaling: basic (3s thinking), advanced (2s), expert (1.5s) durations","Thinking Phase: Idle state with negative timer for strategic BT consultation","Pending Command System: Queue commands during thinking for smooth transitions","Script Types: FULL (100% override), PARTIAL (30-70% merge), BONUS (10-30% enhancement)","Script Manager: Async loading with LRU caching (default 20 scripts), validation, performance monitoring","Boss Phase System: HP-based transitions (100%→66%→33%), capability changes, attack profile switching","Target Selection: 3D distance calculations (X,Y,Z) for accurate 2.5D gameplay, awareness radius by rarity (common:1000, elite:350, boss:500)","Constraint Safety: Null checks prevent undefined entity errors in getBehaviorConstraints(ctx.self)","Animation Readiness Checks: isAnimationSystemReadyForEntity() prevents calculations before animation initialization","Constraint-Based AI: getBehaviorConstraints() for boundary and obstacle-aware movement","Vertical Movement: targetZ system with vz velocity and Z_MIN/Z_MAX boundaries","Collision Awareness: Direct attack on player collision, boundary interruption triggers BT consultation","Attack Completion Cleanup: Removed redundant animation completion checks to prevent timing interference","Debug: window.debugEnemyScripts interface, comprehensive logging, [Z_CHASE_STRATEGY] and [Z_CHASE] prefixes","Memory Persistence: Enemy remembers what doesn't work and adapts behavior across BT consultations","Scalable Solution: Works with any number of simultaneous enemies and constraints","Instance Tracking: Every enemy instance distinguishable in logs and debugging","Complete AI Transparency: Full logging of thinking process from interruption to decision"]}
{"type":"entity","name":"platformer-game:base-enemy-system","entityType":"ai_implementation","observations":["Purpose: Universal foundation for all enemy types with BT context enrichment","Files: base_enemy.js (1000+ lines), blue_slime.js (subclass example)","BaseEnemy Class: Universal AI inheritance with BT integration, FSM control, combat integration","BT Context Enrichment: self/targets include w, h, collisionW, collisionH, zThickness for accurate distance calculations","Animation System Integration: Real-time hitbox access via animationSystem reference in BT context","BlueSlime Implementation: Common rarity, light attacks, sprite-based animation, stats scaling (80+20/lvl HP, 8+2/lvl attack)","Initialization: Constructor with position, level, rarity, intelligence, scriptConfig parameters","BT Setup: initializeBT() with universal factory, createAttackProfile() for attack types","FSM States: enemy_idle, enemy_walking, enemy_running, enemy_attack variants","Combat Integration: CharacterInfo for stats, takeDamage() and die() methods, experience/gold rewards","Command Execution: executePendingCommand() with immediate arcade-style execution","Performance: Batch operations, caching, async script loading without blocking","Rewards: BlueSlime gives 150 + 50/level XP, 15 + 5/level gold"]}
{"type":"entity","name":"platformer-game:skill-system","entityType":"game_system","observations":["Purpose: Character progression and ability system","Files: skills.js, micro_skill_tree.js, data/skill-data.js","Classes: SkillTreeManager (unlocking/leveling), MicroSkillTreeManager (4 progression systems)","Progression Systems: OnePerRowSystem (1 skill/row, requires previous), LevelBasedSystem (unlocks at levels 3,5,7,10), AbsoluteSystem (all available for 1 point), InstantSystem (one/row, no cost)","Skill Leveling: Dynamic costs via levelCosts array, getSkillPointCost() calculations","Prerequisites: skill_level, player_level, quest_completed, achievement_unlocked types","Resource System: MANA (magical), ENERGY (physical), NONE types with data-driven costs","Combat Integration: damageModifier, accuracyModifier, criticalChanceModifier, cooldownModifier, targetCountModifier","Passive Effects: levelEffects arrays apply bonuses per level upgrade","UI: 6×5 grid layout (30 positions), WASD/arrow navigation, visual states (Available/Unlocked/Locked)","Multi-player: Keys 5-8 for players 1-4 skill tree access, debounce protection","Skill Points: 2 awarded per level for ability unlocking"]}
{"type":"entity","name":"platformer-game:collision-system","entityType":"game_system","observations":["Purpose: 3D collision detection with Z-depth support and unified AI distance calculations","Files: collision.js (700+ lines) - CENTRALIZED collision and boundary functions","Unified Distance System: calculateEntityDistance() with 3D support (X,Y,Z) and intelligent fallbacks","Animation Readiness Checks: isAnimationSystemReadyForEntity() prevents calculations before animation initialization","Intelligent Fallbacks: Entity-specific collision dimensions (Player: 65x260, Enemy: 80x60) when hitboxes unavailable","Z-Depth Collision: X, Y, Z coordinate system with effectiveZThickness = azThickness + tzThickness","Z-Tolerance: 30 units for movement, 10 units for attacks","Buffer System: AI (8px smooth movement), Player (2px precision), Attacks (0px exact)","Main Functions: checkEntityCollision() (unified per-frame), checkHitboxCollision() (attack timing), applyCollisionCorrection() (separation vector), canMoveTo() (movement validation), getBehaviorConstraints() (AI constraints), applyScreenBoundaries() (boundary enforcement), calculateEntityDistance() (3D distance with fallbacks)","IMPORTANT: getBehaviorConstraints() and applyScreenBoundaries() are ONLY in collision.js - game.js calls via window.XXX","Constraint System: move_up/move_down are blocked when at boundaries but NOT added to allowed set (prevents NaN targetZ from BT)","Per-frame Data: Uses animation frameData.hitBox/attackBox instead of static dimensions","Mirroring System: Center-based attack/hit box flipping for left-facing entities","Separation Vector: Overlap calculation with equal split for collision correction","Enhanced Logging: Clear diagnostic information about animation system status and fallback usage","Performance: Batch collision detection, spatial partitioning concepts, early exit optimizations","Integration: Animation system for per-frame data, combat system for damage timing, AI for constraints","Debug: Visual collision boxes, hurt boxes, attack ranges, distance calculation logging"]}
{"type":"entity","name":"platformer-game:rendering-system","entityType":"game_system","observations":["Purpose: UI rendering coordination and debug visualization","Files: render.js","Architecture: UI coordination layer, separated from entity drawing (AnimationRenderer handles entities)","Responsibilities: Debug visualization (Z-lines, entity labels, collision boxes), damage numbers, UI overlays","Layers: Background, entities (via AnimationRenderer), UI overlays, debug information","Z-Depth: Unified Z calculations across all rendering via getZOffset()","Entity Sorting: getSortedEntitiesForRendering() with Y-Z coordinate calculation","Performance: 60 FPS target, optimized canvas operations","Multiplayer: Supports rendering multiple player views","Integration: Calls AnimationRenderer.drawAnimatedEntities() for all entities"]}
{"type":"entity","name":"platformer-game:character-info-system","entityType":"progression_system","observations":["Purpose: Character progression with statistics, leveling, experience","Files: character_info.js","Classes: CharacterInfo (stats, leveling, experience management)","Multi-character: blue, orange, green, red with Bulgarian display names (Син/Оранжев/Зелен/Червен герой)","Experience System: Level * 100 XP for next level, automatic level progression, multi-level support","Stat Distribution: Strength (damage), Speed (movement), Intelligence (magic) - all start at 10","Automatic Increases: +1 to each stat per level, 5 free points for manual distribution","Level-up Rewards: Full HP/mana/energy recovery, 2 skill points per level","UI Methods: modifyStrength/Speed/Intelligence() with validation, prevents stats below auto-level minimum","Combat Integration: Links with combat system for stat-based damage calculations"]}
{"type":"entity","name":"platformer-game:enemy-data-system","entityType":"data_system","observations":["Purpose: Enemy types, stats, and rewards management","Files: enemy_data.js","Classes: EnemyData (level scaling, rewards, type definitions)","Enemy Types: Basic (50 HP, 3 atk, 200 XP), Elite (100 HP, 6 atk, 500 XP), Boss (2100 HP, 12 atk, 2000 XP)","Level Scaling: 20% stat increase per level via formula: stat * (1 + (level-1) * 0.2)","Preserved Stats: Critical chance and speed don't scale with level","Rewards: Experience and gold scale with level, framework for item drops","Bulgarian Names: 'Основен враг', 'Елитен враг', 'Бос'"]}
{"type":"entity","name":"platformer-game:game-state-management","entityType":"core_infrastructure","observations":["Purpose: Centralized entity storage and lifecycle management","Files: game_state.js (150+ lines)","Classes: GameState (entity Map, player array, lifecycle methods)","Storage: Map-based (ID → entity) for O(1) access, separate players array for backwards compatibility","Entity Lifecycle: addEntity() with auto ID assignment, removeEntity() with cleanup","Queries: getEntitiesByType(), getAllEntities(), getEntity(), hasEntity(), getEntityCount()","Entity Types: 'player', 'enemy', 'ally', 'neutral' classification","Debug: getDebugInfo() with real-time statistics and entity type breakdowns","Performance: Map-based lookups, efficient entity filtering","Integration Hub: AI, combat, rendering, physics systems all access entities through GameState"]}
{"type":"entity","name":"platformer-game:game-loop-system","entityType":"core_system","observations":["Purpose: Main game orchestration and update/render cycle after Phase 1 & 2 refactoring","Files: game.js (1100+ lines after refactoring - reduced from 1400+ lines)","Architecture: RequestAnimationFrame loop with delta time tracking, update/render separation","Initialization: Canvas setup (1920x1080), async animation system init, player/enemy creation","Character Selection: MOVED TO ui.js - Character selection system extracted in Phase 1","Input Integration: Skill tree keys (5-8), stats keys (9/0/-/=), tab navigation (t/y/u/i), 300ms debounce","Combat Resolution: FSM-based attack detection, collision checks, damage flags to prevent multi-hit","Combat Helpers: MOVED TO combat_system.js - calculateHitBoxPosition, addDamageNumberToTarget, getCombatSkillType extracted in Phase 2","Enemy Management: BT updates for BlueSlime, simple AI fallback for others, death/respawn handling","Resource Regeneration: Per-entity mana/energy recovery via ResourceManager","Menu System: Per-player skill tree and stats windows, input filtering during menus","Entity Sorting: Z-depth sorting for 2.5D rendering order","Refactoring Status: Phase 1 (Character Selection) and Phase 2 (Combat Helpers) completed successfully","Remaining Mechanics: Player class, game loop, enemy AI coordination, game initialization","Debug: Comprehensive Bulgarian console logging, development shortcuts"]}
{"type":"entity","name":"platformer-game:input-handling-system","entityType":"input_system","observations":["Purpose: Keyboard/gamepad input with state-based filtering","Files: input.js (50+ lines)","Architecture: DOM keydown/keyup events with capture phase priority","Key State: Global window.keys object for cross-module access","State Filtering: Gameplay keys only work when !menuActive && gameStateString !== 'start'","Menu Key Priority: Escape, m, 5-8, 9/0/-/=, t/y/u/i always work regardless of game state","Event Capture: capture: true ensures input priority over other handlers","Utility: isKeyPressed() helper function for clean key checking","Performance: Minimal processing, early exit for menu keys","Integration: Game loop polling, player controls, UI systems"]}
{"type":"entity","name":"platformer-game:resource-management","entityType":"infrastructure_system","observations":["Purpose: Asset loading, caching, and resource lifecycle","Files: resource_manager.js, load_skill_icon.js","ResourceManager: Centralized asset loading, caching, memory management for images/audio/sprites","Resource Types: MANA (magical skills), ENERGY (physical skills) with regeneration","Loading: Individual and batch preloading with progress tracking","Caching: Asset reuse, memory optimization, unloadUnusedAssets() cleanup","Skill Icons: 5×10 grid sprite sheet loading (Swordsman-Skill-Icons.webp), 65×65px icons","Consumption: Resource validation before skill execution, cost modifiers","Regeneration: Per-entity recovery during game loop updates"]}
{"type":"entity","name":"platformer-game:ui-architecture","entityType":"interface_system","observations":["Purpose: UI coordination and component management","Files: ui.js, menu.js, character_stats_ui.js","UI Coordinator: ui.js handles state management, component coordination, accessibility","Menu System: menu.js with state transitions, settings, controls configuration","Character Stats: character_stats_ui.js for stats panels, progress bars, overlays","Health Display: Color-coded (green/yellow/orange/red), Bulgarian status text ('Жив', 'Ранен', 'Критично')","Input Handling: UI-specific input, mouse/keyboard/controller support","Accessibility: Screen reader support, keyboard navigation, visual feedback"]}
{"type":"entity","name":"platformer-game:localization-system","entityType":"localization","observations":["Purpose: Bulgarian language support throughout the game","Coverage: Character names (Син/Оранжев/Зелен/Червен герой), enemy names (Основен враг/Елитен враг/Бос), health status (Жив/Ранен/Критично), console messages, UI feedback, code comments","Files: Distributed across character_info.js, enemy_data.js, game.js, input.js","Cultural Adaptation: Native Bulgarian terms for game immersion"]}
{"type":"entity","name":"platformer-game:development-guidelines","entityType":"standards_documentation","observations":["Files: PROJECT_FILE_GUIDE.md","Coding Standards: Vanilla JavaScript only, conservative library usage, consistent patterns","Testing: Development scripts, debug interfaces, visual testing tools","Performance: 60 FPS target, optimized rendering, memory management","Integration Patterns: Follow existing file organization and system boundaries","Documentation: Code comments, API documentation, Bulgarian language support"]}
{"type":"entity","name":"platformer-game:bt-memory-system","entityType":"ai_improvement","observations":["Purpose: Dynamic blocked behaviors system prevents infinite loops from repeated command interruptions","Implementation: Set-based memory system remembers failed commands (patrol_right, move_up, etc.) across BT consultations","Dynamic Blocked Behaviors: this.dynamicBlocked.add('patrol_right') prevents repeating failed boundary movements","Unique Enemy Instance IDs: Static counter assigns unique IDs (1,2,3...) to each enemy instance for clear log differentiation","Comprehensive AI Logging: Full interruption→constraint→BT decision flow tracking with instance IDs","Instance ID Logging: All AI logs include enemy instance ID (BlueSlime #1, BlueSlime #2, etc.) for multi-enemy debugging","Logging Categories: [BT_QUERY], [BT_CONSTRAINTS], [BT_DECISION], [NORMAL BEHAVIOR], [COMMAND INTERRUPTED], [AI_SITUATION], [BT_MEMORY]","Memory Persistence: Enemy remembers what doesn't work and adapts behavior across BT consultations","Scalable Solution: Works with any number of simultaneous enemies and constraints","Instance Tracking: Every enemy instance distinguishable in logs and debugging","Complete AI Transparency: Full logging of thinking process from interruption to decision","Architecture: Minimal changes - extends existing constraint system without duplication","Files: base_enemy.js (instance IDs, blocked behaviors), collision.js (boundary interruption), Behavior Tree/enemyAI_BT.js (constraint-aware BT)","Integration: Uses existing getBehaviorConstraints() system with dynamic blocked parameter","Benefits: No more infinite loops, intelligent behavior adaptation, complete debugging visibility"]},{"type":"entity","name":"platformer-game:problems-solutions","entityType":"implementation_knowledge","observations":["AI засядане при колизии → Collision correction с AI буфер (8px)","Непоследователни AI transitions → Pending command queuing system","Infinite idle loops → Thinking phase с strategic BT consultation","Неточни attack collisions → Per-frame animation data вместо static boxes","Hit box mirroring → Център-базирано mirroring при facing left","Unified combat system → Entity type branching в calculateAttackPower()","Z-depth collision complexity → Z-толеранс система с effective thickness","Animation-based balance → Attack box width → damage multiplier conversion","Resource management → ResourceManager abstraction layer","BT context updates → updateBTContext() с current game state","Code duplication (Jan 2026) → getBehaviorConstraints/applyScreenBoundaries centralized ONLY in collision.js, game.js calls via window.XXX","NaN targetZ bug → move_up/move_down NOT added to allowed set in getBehaviorConstraints(), prevents BT from selecting vertical movement without speed/displacement params","Infinite recursion bug → Wrapper functions cause stack overflow, use direct window.XXX calls instead","AI premature attacks → Unified distance calculations with 3D support and intelligent fallbacks","BT undefined entity errors → Null checks in getBehaviorConstraints(ctx.self) calls","Animation system timing issues → isAnimationSystemReadyForEntity() checks before distance calculations","BT context missing dimensions → Added w, h, collisionW, collisionH, zThickness to self/targets","Small awareness radius → Increased from 300px to 1000px for realistic enemy detection","Inconsistent distance measurements → Single calculateEntityDistance() function across all AI systems","Enemy Z-chase stuck states → Strategic Z-First Repositioning with deadlock prevention","Boundary deadlock prevention → 4-phase system (detection → safe distance → fallback → recovery)","Chase state tracking → chaseState object monitors Z-alignment status and failure counts","Z-alignment precision → Configurable ±10px thresholds for reliable attack triggering","Dual strategy repositioning → X-overlap detection with X-first vs Z-first approaches","Attack completion timing interference → Removed redundant animation completion checks","X-overlapping repositioning strategy → Dual strategy system prevents collision conflicts","Chase state oscillation prevention → State protection prevents infinite strategy switching","BT Memory System → Dynamic blocked behaviors Set prevents infinite loops from repeated interruptions","Unique Enemy Instance IDs → Static counter assigns unique IDs (1,2,3...) for clear log differentiation","Comprehensive AI Logging → Full interruption→constraint→BT decision flow tracking","Instance ID Logging → All AI logs include enemy instance ID for multi-enemy debugging","Memory Persistence → Enemy remembers what doesn't work and adapts behavior across consultations","blockedDirections.join is not a function → Array.from(blockedDirections).join(', ') for Set conversion"]}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:combat-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:animation-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:ai-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:skill-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:collision-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:rendering-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:character-info-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:enemy-data-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:game-state-management","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:game-loop-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:input-handling-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:resource-management","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:ui-architecture","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:localization-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:technology-stack","relationType":"built_with"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:base-enemy-system","relationType":"implements_via"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:collision-system","relationType":"depends_on"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:animation-system","relationType":"coordinates_with"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:skill-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:character-info-system","relationType":"uses_stats_from"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:collision-system","relationType":"depends_on"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:animation-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:combat-system","relationType":"triggers"}
{"type":"relation","from":"platformer-game:rendering-system","to":"platformer-game:animation-system","relationType":"coordinates_with"}
{"type":"relation","from":"platformer-game:collision-system","to":"platformer-game:animation-system","relationType":"uses_frame_data_from"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:resource-management","relationType":"uses"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:ui-architecture","relationType":"displays_via"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:character-info-system","relationType":"enhances_progression"}
{"type":"relation","from":"platformer-game:game-loop-system","to":"platformer-game:animation-system","relationType":"orchestrates"}
{"type":"relation","from":"platformer-game:game-loop-system","to":"platformer-game:combat-system","relationType":"orchestrates"}
{"type":"relation","from":"platformer-game:game-loop-system","to":"platformer-game:ai-system","relationType":"orchestrates"}
{"type":"relation","from":"platformer-game:game-loop-system","to":"platformer-game:rendering-system","relationType":"orchestrates"}
{"type":"relation","from":"platformer-game:game-loop-system","to":"platformer-game:input-handling-system","relationType":"polls"}
{"type":"relation","from":"platformer-game:game-loop-system","to":"platformer-game:resource-management","relationType":"updates"}
{"type":"relation","from":"platformer-game:game-loop-system","to":"platformer-game:game-state-management","relationType":"manages"}
{"type":"relation","from":"platformer-game:input-handling-system","to":"platformer-game:ui-architecture","relationType":"supports"}
{"type":"relation","from":"platformer-game:input-handling-system","to":"platformer-game:skill-system","relationType":"triggers"}
{"type":"relation","from":"platformer-game:game-state-management","to":"platformer-game:ai-system","relationType":"provides_entities_for"}
{"type":"relation","from":"platformer-game:game-state-management","to":"platformer-game:combat-system","relationType":"provides_entities_for"}
{"type":"relation","from":"platformer-game:game-state-management","to":"platformer-game:collision-system","relationType":"provides_entities_for"}
{"type":"relation","from":"platformer-game:game-state-management","to":"platformer-game:rendering-system","relationType":"provides_entities_for"}
{"type":"relation","from":"platformer-game:enemy-data-system","to":"platformer-game:base-enemy-system","relationType":"provides_stats_for"}
{"type":"relation","from":"platformer-game:enemy-data-system","to":"platformer-game:character-info-system","relationType":"provides_rewards_for"}
{"type":"relation","from":"platformer-game:base-enemy-system","to":"platformer-game:combat-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:base-enemy-system","to":"platformer-game:animation-system","relationType":"uses"}
{"type":"relation","from":"platformer-game:localization-system","to":"platformer-game:character-info-system","relationType":"localizes"}
{"type":"relation","from":"platformer-game:localization-system","to":"platformer-game:enemy-data-system","relationType":"localizes"}
{"type":"relation","from":"platformer-game:localization-system","to":"platformer-game:ui-architecture","relationType":"localizes"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:collision-system","relationType":"documents_fixes_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:combat-system","relationType":"documents_fixes_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:ai-system","relationType":"documents_fixes_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:animation-system","relationType":"documents_fixes_for"}
{"timestamp": "2026-01-14T01:18:00+02:00", "type": "architecture_decision", "title": "Enemy AI: Probabilistic Movement & Universal Factory Fix", "tags": ["ai", "behavior-tree", "movement", "fix"], "description": "Resolved persistent vertical movement loop in Blue Slime AI. Implemented `RandomSelector` to enforce a 50/50 probabilistic choice between `Patrol` and `Vertical Movement` (when available). Added `Cooldown` (15s) to vertical movement to prevent spam. Crucially, identified and fixed a discrepancy where `createUniversalEnemyBehaviorTree` (used by BaseEnemy) was missing these updates compared to `createScriptEnabledBT`. Updated the universal factory to match the script-enabled one, ensuring all enemies usage the robust random selection logic.", "files": ["Behavior Tree/enemyAI_BT.js", "base_enemy.js"]}
{"timestamp": "2026-01-14T03:50:00+02:00", "type": "architecture_decision", "title": "Animation & Physics v2: Universal Flip & Timing Fixes", "tags": ["animation", "physics", "rendering", "fix"], "description": "Major overhaul of Animation-Physics synchronization. 1) **Universal Flip Center:** Visual flipping now pivots dynamically around the hitBox center (`entity.x + offset + width/2`) in `animation_renderer.js`, decoupling it from sprite offsets. 2) **Static Physics:** Disabled physical hitbox mirroring in `collision.js`. Hitboxes now remain static relative to `entity.x`, allowing precise manual offsets in `animation_data.js` without desync. 3) **Duration-Based Logic:** Fixed `EnemyAttackState` premature exit. Replaced frame-index check (`currentFrame >= totalFrames-1`) with duration check (`animationTime >= duration`), ensuring animations play their full length regardless of frame count.", "files": ["Animation System/animation_renderer.js", "collision.js", "Animation System/animation_state_machine.js"]}
{"timestamp": "2026-01-14T20:58:00+02:00", "type": "architecture_decision", "title": "Enemy Attack: Logical vs Visual Alignment Fix", "tags": ["collision", "combat", "bugfix"], "description": "Fixed discrepancy between Visual Attack Box and Logical Attack Box when enemies face left. Issue: Visual renderer flips around the dynamic 'Hitbox Center' (frame-based), while collision logic was flipping around the static 'Entity Center' (collisionW/2). This caused attack boxes to be physically offset from their visual representation. Fix: Updated checkHitboxCollision in collision.js to calculate the pivot center using getCurrentHitBoxPosition() if available, ensuring the logical mirror axis exactly matches the visual mirror axis.", "files": ["collision.js"]}
{"timestamp": "2026-01-14T21:15:00+02:00", "type": "bugfix", "title": "Enemy AI: Stuttering Loop Fix", "tags": ["ai", "animation", "stuttering"], "description": "Resolved 'flickering/stuttering' when enemy is close to player. Issue: Infinite loop of Chase -> Collision/Close Range -> Idle(Pause) -> PlayerDetected -> InterruptPause -> Chase. The AI correctly paused to 'think' before attacking, but the 'Player Detected' logic immediately interrupted this thinking phase because the player was (obviously) still close. Fix: Added `canInterrupt` flag to Idle commands. Updated `base_enemy.js` so combat pauses (pre-attack) use `canInterrupt: false`, forcing the AI to respect the full 0.3s delay before re-evaluating.", "files": ["base_enemy.js"]}
{"timestamp": "2026-01-14T21:40:00+02:00", "type": "bugfix", "title": "Blue Slime: Hitbox Standardization", "tags": ["animation", "collision", "blue-slime"], "description": "Standardized all Blue Slime hitboxes to match the reference IDLE/WALK definitions (x: 70, width: 98, height: 60). Previously, RUN and other animations used a centered offset (x: 20), causing the hitbox to 'jump' forward during transitions, triggering ghost collisions and AI stuttering.", "files": ["Animation System/animation_data.js"]}
{"timestamp": "2026-01-14T22:00:00+02:00", "type": "bugfix", "title": "Blue Slime: Attack Range Standardization", "tags": ["ai", "combat", "blue-slime"], "description": "Unified attack range across BT and BaseEnemy systems, increasing Blue Slime range to 150px to prevent chase/idle loops caused by offset hitboxes.", "files": ["base_enemy.js", "Behavior Tree/enemyAI_BT.js"]}
{"timestamp": "2026-01-14T22:15:00+02:00", "type": "bugfix", "title": "Animation: Ghost Hitbox Flickering Fix", "tags": ["animation", "collision", "rendering"], "description": "Resolved 'ghost hitbox' flickering by removing state whitelists in AnimationRenderer and standardizing default enemy dimensions to match tuned hitboxes.", "files": ["Animation System/animation_renderer.js", "base_enemy.js"]}
{"timestamp": "2026-01-17T02:50:00+02:00", "type": "architecture_decision", "title": "Enemy Death System Refactoring", "tags": ["enemy", "death", "animation", "refactor"], "description": "Unified enemy death logic with dynamic animation duration and eliminated legacy blink effects. Replaced hardcoded 3-second death duration with animation-driven timing from animationDefinition.duration. Consolidated multiple competing update cycles into single enemy update loop. Eliminated visual artifacts during death animations and improved maintainability.", "files": ["base_enemy.js", "game.js", "combat_system.js", "Animation System/animation_renderer.js", "constants.js"]}
{"timestamp": "2026-01-17T03:55:00+02:00", "type": "architecture_decision", "title": "Hit Box-Based Damage Number Positioning", "tags": ["combat", "ui", "visual", "hitbox"], "description": "Damage numbers now appear precisely above hit box locations for accurate visual feedback. Implemented calculateHitBoxPosition() function using AnimationRenderer-compatible logic with per-frame hit box data. Added entity-specific positioning for players vs enemies. Damage numbers positioned 15px above hit box top for clear visual indication of successful hits.", "files": ["game.js"]}
{"timestamp": "2026-01-17T04:57:00+02:00", "type": "architecture_decision", "title": "Level System Specification", "tags": ["gameplay", "levels", "progression", "architecture"], "description": "Comprehensive level system design for browser arcade RPG with static rooms and scrolling levels. Supports data-driven level definitions, entity spawning, completion conditions, and smooth transitions. Includes progression tracking, save/load system, and advanced features like score system, time attacks, and secret areas.", "files": ["LEVEL_SYSTEM_SPECIFICATION.md"]}
{"timestamp": "2026-01-18T02:00:00+02:00", "type": "architecture_decision", "title": "Level System Implementation - Complete Level Progression System", "tags": ["gameplay", "levels", "progression", "architecture"], "description": "Complete level progression system with static rooms, dynamic spawning, and transitions. LevelManager class with full level lifecycle management, two level types (static room-based and scrolling side-scrolling), data-driven level definitions with entity spawning, transition system with fade effects and loading screens, dynamic spawning via trigger-based enemy spawning (area, time, wave-based), completion conditions (enemies defeated, time survival, area reached), END GAME level with victory screen. Includes performance management, modular design, and clean separation between data, management, and gameplay.", "files": ["level_manager.js", "level_data.js", "trigger_spawner.js", "exit_point.js", "camera_controller.js", "dynamic_entity_manager.js"]}
{"timestamp": "2026-01-18T02:30:00+02:00", "type": "architecture_decision", "title": "Transition System Overhaul - Two-Phase Transitions", "tags": ["ui", "transitions", "user-experience"], "description": "Two-phase transition system with configurable timing and loading screens. Phase 1: Screen dimming without UI for 2 seconds. Phase 2: Loading screen with level info and progress for 3 seconds. Uses performance.now() for reliable timing instead of dt. Includes showLoadingUI/hideLoadingUI methods for future UI system integration. Fixed broken timing issues that caused infinite loading.", "files": ["level_manager.js", "render.js"]}
{"timestamp": "2026-01-18T03:00:00+02:00", "type": "architecture_decision", "title": "END GAME Implementation - Victory Screen & Restart", "tags": ["gameplay", "end-game", "ui", "completion"], "description": "END GAME level with victory screen and restart functionality. Special level type that shows 'GAME COMPLETE!' screen instead of normal gameplay. Features professional glassmorphism UI with congratulations message, stats display, 'Play Again' button for seamless restart, and 'Main Menu' placeholder. Game pauses during victory screen and reloads tutorial_1 on restart.", "files": ["level_manager.js"]}
{"timestamp": "2026-01-18T03:30:00+02:00", "type": "architecture_decision", "title": "Trigger Spawner System - Dynamic Enemy Spawning", "tags": ["gameplay", "enemies", "spawning", "performance"], "description": "Intelligent enemy spawning system preventing infinite loops and browser lag. Trigger-based spawning with area enter, time delay, and wave spawning types. One-time activation prevents multiple spawns. Performance safety with controlled entity counts. Comprehensive debug logging for spawn events and trigger states.", "files": ["trigger_spawner.js"]}
{"timestamp": "2026-01-18T04:00:00+02:00", "type": "architecture_decision", "title": "AI System Fixes - Unified Distance Calculations & Constraint Safety", "tags": ["ai", "collision", "distance", "bugfix"], "description": "Unified distance calculations with 3D support and intelligent fallbacks. BT context enrichment with physical dimensions and animation system access. Constraint safety preventing undefined entity errors. Expanded awareness radius from 300px to 1000px for realistic behavior. Unique enemy instance IDs for clear debugging.", "files": ["base_enemy.js", "collision.js", "Behavior Tree/enemyAI_BT.js"]}
{"timestamp": "2026-01-18T04:30:00+02:00", "type": "architecture_decision", "title": "Combat System Unification - Single Combat Pipeline", "tags": ["combat", "unification", "balance", "bugfix"], "description": "Single combat resolution pipeline for all entities eliminating code duplication. All attacks use CombatResolver.resolveAttack() or resolveAttackNoResourceCheck(). Enemy animation types map to combat skill types for consistent damage. Clean separation between players (with resources) and enemies (resource-free).", "files": ["combat_system.js", "game.js", "Animation System/animation_state_machine.js", "Behavior Tree/enemyAI_BT.js"]}
{"timestamp": "2026-01-18T05:00:00+02:00", "type": "architecture_decision", "title": "Animation System Refactoring - 5-Phase Consolidation", "tags": ["animation", "refactor", "consolidation"], "description": "5-phase refactoring consolidating all animation logic. Data consolidation to animation_utils.js, state management unification, asset management clarification, generic entity support, clean integration points. Eliminated code duplication, centralized logic, maintainable changes, consistent API.", "files": ["Animation System/animation_system.js", "Animation System/animation_renderer.js", "Animation System/animation_utils.js", "Animation System/animation_state_machine.js", "Animation System/entity_animation.js", "Animation System/sprite_manager.js"]}
{"timestamp": "2026-01-20T22:30:00+02:00", "type": "architecture_decision", "title": "Level Transition System Overhaul - Game Pause & Visual Flash Fixes", "tags": ["level-system", "transitions", "game-pause", "visual-fixes"], "description": "Fixed visual flashes during level transitions with game pause system and streamlined state management. Added gamePaused flag to LevelManager to suspend game logic during transitions. Removed problematic 'showing_ui' intermediate state that was causing timing issues. Direct transition from 'fading_out' to 'loading' eliminates flash-causing intermediate state. Enhanced visual logging for transition debugging. Game logic pause prevents completion checks and entity updates during loading.", "files": ["level_manager.js", "game.js", "render.js"]}
{"timestamp": "2026-01-21T02:15:00+02:00", "type": "architecture_decision", "title": "Level System Reorganization - Modular Architecture & Auto-Registration", "tags": ["level-system", "architecture", "modularization", "auto-registration"], "description": "Complete reorganization of level system into dedicated Level System directory with modular architecture and automatic level registration. Created Level System/ directory with level_data.js, level_registry.js, level_loader.js, level_manager.js, and levels/ subdirectory. Implemented auto-registration system where level files register themselves on load using deferred registration with retry logic. Separated concerns: level_data.js (data structures), level_registry.js (centralized management), level_loader.js (loading utilities), level_manager.js (game integration). Added singleton pattern for LevelRegistry with getInstance() method. Individual level files now auto-register using LevelRegistry.getInstance().registerLevel() with proper error handling and retry logic.", "files": ["Level System/level_data.js", "Level System/level_registry.js", "Level System/level_loader.js", "Level System/level_manager.js", "Level System/levels/tutorial/tutorial_1.js", "Level System/levels/combat/combat_room_1.js", "Level System/levels/boss/boss_level.js", "Level System/levels/special/end_game.js", "js_platformer_z_depth_demo.html", "PROJECT_FILE_GUIDE.md"]}
{"type":"entity","name":"platformer-game:level-system","entityType":"game_system","observations":["Purpose: Complete level management system with data-driven level definitions, registry, loading, and management","Files: Level System/level_data.js, Level System/level_registry.js, Level System/level_loader.js, Level System/level_manager.js, Level System/levels/","Architecture: Modular level system with clean separation between data (level_data.js), registry (level_registry.js), loading (level_loader.js), management (level_manager.js), and individual levels (levels/)","Level Data Structure: LevelData class with validation, completion conditions, entity spawning, triggers, transitions","Level Registry: Centralized level management with auto-registration, getInstance() singleton pattern, category organization","Level Loader: Deferred auto-registration system with retry logic, loads from global config variables","Level Manager: Game integration with transition system, entity spawning, completion tracking, game pause during transitions","Individual Levels: tutorial_1.js, combat_room_1.js, boss_level.js, end_game.js with auto-registration on load","Trigger System: Dynamic enemy spawning based on area, time, wave conditions with performance safety","Transition System: Two-phase transitions with game pause, fade effects, loading screens, configurable timing","Completion Conditions: Enemies defeated, time survival, area reached with real-time progress tracking","END GAME Level: Special victory screen with restart functionality and achievement display","Integration: LevelManager.getLevelData() uses registry, game.js calls level loading, HTML includes all level scripts","Benefits: Clean architecture, data-driven design, extensible level system, automatic registration, performance-optimized spawning"]}
{"type":"entity","name":"platformer-game:level-transition-system","entityType":"game_system","observations":["Purpose: Level transition system with game pause and visual flash fixes","Files: Level System/level_manager.js, game.js, render.js","Architecture: Game pause system during transitions, streamlined transition states, enhanced visual logging","Game Pause System: gamePaused flag suspends all game logic during level loading","Streamlined States: Removed 'showing_ui' intermediate state, direct 'fading_out' → 'loading' flow","Visual Flash Fix: Eliminated brief moment where game scene was visible between fade out and loading screen","Enhanced Logging: [VISUAL] prefixed logs for transition phase debugging","Transition States: 'fading_out' (2s), 'loading' (3s), 'hiding_ui', 'fading_in' (2s)","Performance: Game logic suspension prevents unnecessary computations during loading","Integration: LevelManager coordinates transitions, game.js checks pause flag, render.js handles visual effects"]}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:level-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:level-system","to":"platformer-game:game-loop-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:level-system","to":"platformer-game:combat-system","relationType":"spawns_entities_for"}
{"type":"relation","from":"platformer-game:level-system","to":"platformer-game:ai-system","relationType":"provides_context_for"}
{"type":"relation","from":"platformer-game:level-system","to":"platformer-game:collision-system","relationType":"defines_boundaries_for"}
{"type":"relation","from":"platformer-game:level-system","to":"platformer-game:rendering-system","relationType":"coordinates_with"}
{"type":"relation","from":"platformer-game:level-transition-system","to":"platformer-game:level-system","relationType":"part_of"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:level-transition-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:level-transition-system","to":"platformer-game:game-loop-system","relationType":"pauses_during_transitions"}
{"type":"relation","from":"platformer-game:level-transition-system","to":"platformer-game:rendering-system","relationType":"coordinates_visual_effects"}
{"timestamp": "2026-01-21T03:00:00+02:00", "type": "architecture_decision", "title": "Game.js Refactoring - Character Selection System Extraction", "tags": ["refactoring", "architecture", "character-selection", "ui-system"], "description": "Phase 1 of comprehensive game.js refactoring completed. Moved complete character selection system from game.js to ui.js with parameter-based design. Character selection includes player joining/leaving, character navigation, selection confirmation, and UI state management. All functions modified with parameter passing to maintain zero functional changes. Global state variables moved to ui.js and accessed via window.UISystem. Added comprehensive documentation and comments marking moved code. Fixed integration issues by updating all call sites to use new parameter signatures. Result: game.js reduced by ~300 lines, ui.js extended with full character selection system, clean separation between game logic and UI logic.", "files": ["ui.js", "game.js", "PROJECT_FILE_GUIDE.md", "game_js_refactoring_plan.md"]}
{"timestamp": "2026-01-21T03:15:00+02:00", "type": "architecture_decision", "title": "Combat System Extension - Helper Functions Migration", "tags": ["refactoring", "combat-system", "damage-numbers", "hitbox-calculation"], "description": "Phase 2 of game.js refactoring completed. Extended combat_system.js with combat helper functions moved from game.js. Added calculateHitBoxPosition() with animation system parameter for precise hit box positioning. Added addDamageNumberToTarget() with damageNumberManager parameter for visual damage feedback. Added getCombatSkillType() utility for enemy attack type mapping to combat skill types. Updated all call sites in game.js to use new parameter-passing approach. Maintained zero functional changes while consolidating combat-related utilities in dedicated system file. Result: Combat system now contains all combat helper functions, game.js further reduced, cleaner separation of combat mechanics.", "files": ["combat_system.js", "game.js", "PROJECT_FILE_GUIDE.md", "game_js_refactoring_plan.md"]}
{"timestamp": "2026-01-21T06:00:00+02:00", "type": "architecture_decision", "title": "Menu System Extension - Input Coordination Migration", "tags": ["refactoring", "menu-system", "input-coordination", "skill-tree"], "description": "Phase 3 of game.js refactoring completed. Extended menu.js with input coordination functions moved from game.js. Added handleSkillTreeKeys() and handleCharacterStatsKeys() with parameter-based design accepting gameState, keys, and lastSkillTreeToggleTime. Moved 19 key tracking variables (18 key press tracking + 1 debounce timer) to menu.js scope. Updated function signatures to use parameters instead of globals while maintaining zero functional changes. Added global exports via window.MenuSystem for clean integration. Updated game.js update() function to call parameterized functions. Result: Menu system now handles all input coordination, game.js further reduced by ~250 lines, cleaner separation between core game logic and menu interactions.", "files": ["menu.js", "game.js", "PROJECT_FILE_GUIDE.md", "game_js_refactoring_plan.md"]}
{"timestamp": "2026-01-21T08:55:00+02:00", "type": "architecture_decision", "title": "Collision System Extension - Player Movement Migration", "tags": ["refactoring", "collision-system", "player-movement", "physics"], "description": "Phase 4 of game.js refactoring completed. Extended collision.js with player movement physics moved from game.js. Added handleMovement(player, dt, canvasHeight, gravity, zMin, zMax) function with parameter-based design accepting physics constants. Moved complete player movement logic including attack state prevention, X/Z collision correction, gravity application, boundary enforcement, and FSM landing transitions. Updated game.js updatePlayer() to call window.handleMovement() with CANVAS_HEIGHT, GRAVITY, Z_MIN, Z_MAX parameters. Maintained zero functional changes while consolidating physics logic in collision system. Result: Collision system now handles all movement physics, game.js further reduced by ~120 lines, cleaner separation between game coordination and physics calculations.", "files": ["collision.js", "game.js", "PROJECT_FILE_GUIDE.md", "game_js_refactoring_plan.md"]}
