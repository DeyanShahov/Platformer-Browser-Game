{"type":"entity","name":"platformer-game:project","entityType":"software_project","observations":["Title: Platformer Browser Game with Z-Depth Physics","Description: Advanced 2D platformer game featuring 3D collision system, AI behavior trees, skill progression, and modular architecture","Language: Vanilla JavaScript (no frameworks)","Rendering: HTML5 Canvas API","Architecture: Modular system-based design","Unique Features: Z-depth collision system, Behavior Tree AI, Micro skill trees","Status: Active development","Last Updated: December 2025","Complexity: High (6 major systems integrated)","Architecture: Clean separation of concerns, modular systems","Code Quality: Comprehensive documentation, consistent patterns","Development: Active refactoring, performance optimizations","Features: Multiplayer support, advanced AI, skill progression","Performance: 60 FPS target, optimized rendering pipeline","Testing: Development scripts, debug interfaces, visual tools"]}
{"type":"entity","name":"platformer-game:combat-system","entityType":"game_system","observations":["Purpose: Combat resolution and damage calculation engine","Key Features: Attack/defense calculations, critical hits, damage mitigation","Files: combat_system.js","Integration: Used by all combat interactions","Complexity: Medium (damage formulas, balance considerations)","Dependencies: character_info.js, entities.js","Key Functions: resolveAttack(), calculateDamage(), applyCombatResult()","Combat Types: Physical attacks, magical abilities, critical hits","Balance: Damage mitigation formulas, stat-based calculations","Integration Points: Called during entity collisions, skill activations","Death Handling: Entity removal, loot drops, experience rewards","Multiplayer: Supports multiple players in combat scenarios"]}
{"type":"entity","name":"platformer-game:animation-system","entityType":"game_system","observations":["Purpose: Animation management and sprite rendering system","Key Features: State machines, unified entity drawing, Z-depth rendering","Files: Animation System/ (6 files total)","Architecture: Phase 1-5 refactoring completed December 2025","Integration: Core rendering pipeline","Unique: Centralized Z-depth calculations in getZOffset() method","Refactoring: 5-phase animation system overhaul (December 2025)","State Machines: AnimationStateMachine class with transition logic","Rendering: AnimationRenderer handles all entity drawing (sprites, shapes)","Z-Depth: getZOffset() method for unified depth calculations","Performance: Batch rendering, asset caching, frame optimization","Integration: Coordinates with rendering pipeline, entity updates"]}
{"type":"entity","name":"platformer-game:ai-system","entityType":"game_system","observations":["Purpose: Enemy AI using Behavior Tree architecture","Key Features: BT nodes, script system, dynamic difficulty","Files: Behavior Tree/ (6 files), base_enemy.js","Scripts: BOSS_SCRIPTS, ELITE_SCRIPTS, TEST_SCRIPTS","Performance: Optimized with LRU caching and batch operations","Integration: Enemy decision making and behavior","Behavior Trees: Selector, Sequence, Condition, Action node types","Scripts: Dynamic script loading with LRU cache (cache size: configurable)","Enemies: BaseEnemy class with AI integration, thinking duration calculations","Performance: Batch collision detection, optimized distance calculations","Difficulty: Intelligence/rarity multipliers for behavior complexity","Debug: window.debugEnemyScripts interface for development"]}
{"type":"entity","name":"platformer-game:skill-system","entityType":"game_system","observations":["Purpose: Character progression and ability system","Key Features: Micro skill trees, level-based progression, one-per-row system","Files: skills.js, micro_skill_tree.js, data/skill-data.js","UI: Compact skill tree interface","Integration: Character development and combat abilities","Balance: Experience-based leveling system","Progression: LevelBasedSystem and OnePerRowSystem implementations","UI: Micro skill tree interface, compact design for quick access","Data: skill-data.js contains all skill definitions and balance","Activation: executeSkill() with targeting, cooldown management","Balance: Experience-based leveling, stat bonuses, ability unlocks","Integration: Connected to combat system, character progression"]}
{"type":"entity","name":"platformer-game:collision-system","entityType":"game_system","observations":["Purpose: 3D collision detection with Z-depth support","Key Features: Collision buffers, attack collision, movement validation","Unique: Z-depth collision (X, Y, Z coordinates)","Functions: checkHitboxCollision(), canMoveTo(), getBehaviorConstraints()","Performance: Batch collision detection optimization","Integration: Physics, combat, AI systems","3D Physics: X, Y, Z coordinate system for depth-based collisions","Detection: Collision buffers, hitbox validation, boundary checking","Functions: checkHitboxCollision(), canMoveTo(), applyScreenBoundaries()","Optimization: Batch processing, spatial partitioning concepts","Integration: Used by physics, combat, AI, and movement systems","Debug: Visual collision boxes, hurt boxes, attack ranges"]}
{"type":"entity","name":"platformer-game:rendering-system","entityType":"game_system","observations":["Purpose: UI rendering coordination and entity drawing","Key Features: Debug visualization, damage numbers, entity labels","Architecture: Separated from entity drawing (moved to AnimationRenderer)","Integration: Called every frame after game update","Z-Depth: Unified Z calculations across all rendering","Debug: Hurt boxes, attack boxes, collision borders","Architecture: UI coordination layer, separated from entity drawing","Debug Features: Z-lines, entity labels, collision visualization","Performance: 60 FPS target, optimized canvas operations","Layers: Background, entities, UI overlays, debug information","Integration: Called after game update, coordinates with AnimationRenderer","Multiplayer: Supports rendering multiple player views"]}
{"type":"entity","name":"platformer-game:vanilla-js","entityType":"technology","observations":["Type: Programming Language","Usage: Core game logic, no frameworks or libraries","Benefits: Maximum performance, full control, lightweight","Constraints: Manual implementation of complex systems","Integration: All game systems built from scratch"]}
{"type":"entity","name":"platformer-game:canvas-api","entityType":"technology","observations":["Type: HTML5 Rendering API","Usage: 2D graphics rendering with Z-depth simulation","Features: Sprite drawing, debug overlays, UI rendering","Performance: Hardware accelerated, 60 FPS target","Resolution: 1920x1080 canvas dimensions"]}
{"type":"entity","name":"platformer-game:z-depth-physics","entityType":"technology","observations":["Type: Custom 3D collision system in 2D space","Implementation: X, Y, Z coordinate system","Features: Depth-based collision detection, layered rendering","Complexity: Advanced physics simulation","Innovation: Unique approach to 2.5D platforming","Innovation: 2.5D platforming with true depth collision","Implementation: Z-coordinate affects collision and rendering order","Challenges: Manual physics calculations, no physics engine","Benefits: Rich gameplay possibilities, unique platforming mechanics","Performance: Optimized collision detection for 3D space","Integration: Core to collision, rendering, and AI systems"]}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:combat-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:animation-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:ai-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:skill-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:collision-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:rendering-system","relationType":"contains"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:vanilla-js","relationType":"built_with"}
{"type":"relation","from":"platformer-game:animation-system","to":"platformer-game:canvas-api","relationType":"uses"}
{"type":"relation","from":"platformer-game:animation-system","to":"platformer-game:z-depth-physics","relationType":"implements"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:vanilla-js","relationType":"built_with"}
{"type":"relation","from":"platformer-game:collision-system","to":"platformer-game:z-depth-physics","relationType":"implements"}
{"type":"relation","from":"platformer-game:rendering-system","to":"platformer-game:canvas-api","relationType":"uses"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:vanilla-js","relationType":"built_with"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:canvas-api","relationType":"uses"}
{"type":"relation","from":"platformer-game:project","to":"platformer-game:z-depth-physics","relationType":"features"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:collision-system","relationType":"depends_on"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:collision-system","relationType":"depends_on"}
{"type":"relation","from":"platformer-game:rendering-system","to":"platformer-game:animation-system","relationType":"coordinates_with"}
{"type":"entity","name":"platformer-game:collision-system-detailed","entityType":"implementation_detail","observations":["–¢–∏–ø–æ–≤–µ –∫–æ–ª–∏–∑–∏–∏: hitbox-hitbox (–¥–≤–∏–∂–µ–Ω–∏–µ), attack box-hitbox (–∞—Ç–∞–∫–∏)","Hitbox vs Hitbox –¥–≤–∏–∂–µ–Ω–∏–µ: –ë—É—Ñ–µ—Ä 8px –∑–∞ AI, 2px –∑–∞ –∏–≥—Ä–∞—á, Z-—Ç–æ–ª–µ—Ä–∞–Ω—Å 30 –µ–¥–∏–Ω–∏—Ü–∏","Attack Box vs Hitbox –∞—Ç–∞–∫–∏: –ü—Ä–µ—Ü–∏–∑–Ω–∞ –∫–æ–ª–∏–∑–∏—è –±–µ–∑ –±—É—Ñ–µ—Ä, Z-—Ç–æ–ª–µ—Ä–∞–Ω—Å 10 –µ–¥–∏–Ω–∏—Ü–∏","–í–µ—Ä—Ç–∏–∫–∞–ª–Ω–∞ –¥–µ—Ç–µ–∫—Ü–∏—è: Z-—Ç–æ–ª–µ—Ä–∞–Ω—Å —Å–∏—Å—Ç–µ–º–∞ —Å effectiveZThickness = azThickness + tzThickness","–•–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–Ω–∞ –¥–µ—Ç–µ–∫—Ü–∏—è: Separation Vector –ø–æ–¥—Ö–æ–¥ —Å overlapX/2 –∫–æ—Ä–µ–∫—Ü–∏—è","Per-frame collision: –ò–∑–ø–æ–ª–∑–≤–∞ animation frameData.hitBox –≤–º–µ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–Ω–∏ dimensions","Mirroring —Å–∏—Å—Ç–µ–º–∞: –¶–µ–Ω—Ç—ä—Ä-–±–∞–∑–∏—Ä–∞–Ω–æ –æ–±—Ä—ä—â–∞–Ω–µ –Ω–∞ attack/hit boxes –ø—Ä–∏ facing left","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: AI –∑–∞—Å—è–¥–∞–Ω–µ - collision correction —Å 8px AI –±—É—Ñ–µ—Ä","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: –ù–µ—Ç–æ—á–Ω–∏ attack collisions - per-frame animation data"]}
{"type":"entity","name":"platformer-game:combat-system-detailed","entityType":"implementation_detail","observations":["–ò–≥—Ä–∞—á–∏: baseAttack + strength + equipment + buffs - debuffs + skillModifier","–í—Ä–∞–≥–æ–≤–µ: baseAttack * animation-based multiplier (attackBox.width/30)","Defense –∏–≥—Ä–∞—á–∏: baseDefense + armor + shield + buffs - debuffs","Defense –≤—Ä–∞–≥–æ–≤–µ: baseDefense + (level-1)*2","Critical hits: 10% –∑–∞ –∏–≥—Ä–∞—á–∏, 5% –∑–∞ –≤—Ä–∞–≥–æ–≤–µ","Damage calculation: max(0, attackPower - defense) * skillModifier * criticalMultiplier","Blue Slime multipliers: ATTACK_1=1.83x (55px), ATTACK_2/3=1.0x (30px)","Skill tree integration: damageModifier –∫–∞—Ç–æ percentage multiplier","Resource management: ResourceManager —Å mana/energy consumption","Accuracy system: 70% base + skillModifier ¬± dodgeChance","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: Unified combat - —Ä–∞–∑–ª–∏—á–Ω–∏ —Å–∏—Å—Ç–µ–º–∏ –∑–∞ entity types"]}
{"type":"entity","name":"platformer-game:ai-system-detailed","entityType":"implementation_detail","observations":["Architecture: FSM (Finite State Machine) + BT (Behavior Tree) + Script system","BT integration: Universal system —Å rarity/intelligence levels","Thinking phase: IDLE state —Å negative timer –∑–∞ strategic decisions","Pending command system: Queue commands –ø–æ –≤—Ä–µ–º–µ –Ω–∞ thinking phase","Script types: FULL (complete override), PARTIAL (merge), BONUS (enhancement)","Collision-first AI: Direct attack –ø—Ä–∏ player collision –ø–æ –≤—Ä–µ–º–µ –Ω–∞ patrol","Vertical movement: targetZ —Å–∏—Å—Ç–µ–º–∞ —Å vz velocity –∏ boundary enforcement","Behavior constraints: getBehaviorConstraints() —Å boundary –∏ entity checks","Intelligence scaling: basic(3s)/advanced(2s)/expert(1.5s) thinking durations","Context-aware decisions: –†–∞–∑–ª–∏—á–Ω–∏ —Å–∏—Ç—É–∞—Ü–∏–∏ (idle_timeout, player_detected, boundary, etc.)","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: AI loops - thinking phase –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç—è–≤–∞ infinite idle cycles","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–∏ transitions - pending command queuing"]}
{"type":"entity","name":"platformer-game:animation-system-detailed","entityType":"implementation_detail","observations":["State machines: AnimationStateMachine —Å transition logic","Z-depth calculations: getZOffset() method –∑–∞ unified depth rendering","Per-frame data: frameData.hitBox –∏ attackBox –∑–∞ collision","Rendering pipeline: AnimationRenderer handles entity drawing","State management: currentFrame, currentAnimation, facingDirection","Batch operations: Sprite caching –∏ frame optimization","Integration: Coordinates —Å rendering pipeline, entity updates","Performance: 60 FPS target —Å optimized canvas operations","Debug features: Visual hit boxes, attack ranges, collision borders","–ü—Ä–æ–±–ª–µ–º —Ä–µ—à–µ–Ω: Z-depth rendering - unified getZOffset() calculations"]}
{"type":"entity","name":"platformer-game:problems-solutions","entityType":"implementation_detail","observations":["–ü—Ä–æ–±–ª–µ–º: AI –∑–∞—Å—è–¥–∞–Ω–µ –ø—Ä–∏ –∫–æ–ª–∏–∑–∏–∏ - –†–µ—à–µ–Ω–∏–µ: Collision correction —Å AI –±—É—Ñ–µ—Ä (8px)","–ü—Ä–æ–±–ª–µ–º: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–∏ AI transitions - –†–µ—à–µ–Ω–∏–µ: Pending command queuing system","–ü—Ä–æ–±–ª–µ–º: Infinite idle loops - –†–µ—à–µ–Ω–∏–µ: Thinking phase —Å strategic BT consultation","–ü—Ä–æ–±–ª–µ–º: –ù–µ—Ç–æ—á–Ω–∏ attack collisions - –†–µ—à–µ–Ω–∏–µ: Per-frame animation data –≤–º–µ—Å—Ç–æ static boxes","–ü—Ä–æ–±–ª–µ–º: Hit box mirroring - –†–µ—à–µ–Ω–∏–µ: –¶–µ–Ω—Ç—ä—Ä-–±–∞–∑–∏—Ä–∞–Ω–æ mirroring –ø—Ä–∏ facing left","–ü—Ä–æ–±–ª–µ–º: Unified combat system - –†–µ—à–µ–Ω–∏–µ: Entity type branching –≤ calculateAttackPower()","–ü—Ä–æ–±–ª–µ–º: Z-depth collision complexity - –†–µ—à–µ–Ω–∏–µ: Z-—Ç–æ–ª–µ—Ä–∞–Ω—Å —Å–∏—Å—Ç–µ–º–∞ —Å effective thickness","–ü—Ä–æ–±–ª–µ–º: Animation-based balance - –†–µ—à–µ–Ω–∏–µ: Attack box width ‚Üí damage multiplier conversion","–ü—Ä–æ–±–ª–µ–º: Resource management complexity - –†–µ—à–µ–Ω–∏–µ: ResourceManager abstraction layer","–ü—Ä–æ–±–ª–µ–º: BT context updates - –†–µ—à–µ–Ω–∏–µ: updateBTContext() —Å current game state"]}
{"type":"entity","name":"platformer-game:current-combat-state","entityType":"implementation_detail","observations":["Combat resolver: resolveAttack() –∏ resolveAttackNoResourceCheck() methods","Damage calculation: calculateDamage() —Å attack/defense/skill/critical factors","Enemy combat manager: registerEnemy(), canEnemyAttack(), performEnemyAttack()","Damage numbers: DamageNumberManager —Å floating damage display","Death sequences: updateEnemyDeath() —Å 1.5s blinking animation","Experience rewards: 150 + (level-1)*50 XP –∑–∞ Blue Slime defeat","Gold rewards: 15 + (level-1)*5 gold –∑–∞ Blue Slime defeat","Combat log: max 50 entries —Å timestamp –∏ damage details","UI integration: Character stats display, damage numbers, health bars","Multiplayer support: Combat system —Ä–∞–±–æ—Ç–∏ —Å multiple players"]}
{"type":"entity","name":"platformer-game:collision-mechanics-current","entityType":"implementation_detail","observations":["checkEntityCollision(): Unified collision —Å per-frame hit box priority","checkHitboxCollision(): Attack collision —Å animation frame detection","applyCollisionCorrection(): Separation vector approach –∑–∞ smooth movement","canMoveTo(): Legacy movement collision (pre-unified system)","getBehaviorConstraints(): AI movement validation —Å boundary checks","applyScreenBoundaries(): Universal boundary enforcement —Å hit box awareness","Collision types: movement (buffered), attack (precise), boundary (strict)","Z-depth system: 3D collision –≤ 2D space —Å thickness –∏ tolerance","Buffer system: AI (8px), player movement (2px), attacks (0px)","Performance: Batch collision detection, spatial partitioning concepts"]}
{"type":"entity","name":"platformer-game:ai-behavior-current","entityType":"implementation_detail","observations":["BaseEnemy class: Universal AI –Ω–∞—Å–ª–µ–¥—è–≤–∞–Ω–µ –∑–∞ –≤—Å–∏—á–∫–∏ enemy types","BlueSlime: Common/basic AI —Å attack profile ['light']","FSM states: enemy_idle, enemy_walking, enemy_running, enemy_attack variants","BT commands: idle, patrol, chase, attack, move_up, move_down","Thinking durations: 3s basic, 2s advanced, 1.5s expert","Intelligence modifiers: block/evade/aggression –±–∞–∑–∏—Ä–∞–Ω–∏ –Ω–∞ rarity","Script system: FULL/PARTIAL/BONUS overrides –∑–∞ custom behavior","Target selection: X-Z distance –∑–∞ 2.5D detection","Boundary awareness: checkScreenBoundaries() integration","Performance: LRU caching –∑–∞ script loading, batch operations"]}
{"type":"entity","name":"platformer-game:animation-refactoring","entityType":"architectural_change","observations":["5-Phase Refactoring: Completed December 2025, major architecture overhaul","Phase 1 Data Consolidation: Moved animation functions to animation_utils.js, pure data in animation_data.js","Phase 2 State Management: Unified AnimationStateMachine integration with enhanced API","Phase 3 Asset Management: Enhanced SpriteManager with statistics and validation","Phase 4 Generic Entity Support: AnimationRenderer supports all entity types (sprites, shapes, etc.)","Phase 5 Clean Integration: Removed duplicates, unified cross-module communication","Benefits: No code duplication, centralized logic, maintainable changes, consistent API","Files affected: All 6 Animation System files, game.js, render.js integration updates"]}
{"type":"entity","name":"platformer-game:entity-rendering-refactor","entityType":"architectural_change","observations":["AnimationRenderer unification: Now handles ALL entity drawing (animated + non-animated)","render.js simplification: Focuses only on UI coordination and debug visualization","Centralized Z-depth: getZOffset() method for unified depth calculations across all rendering","Eliminated duplication: Single source for rectangle drawing and entity rendering logic","Debug enhancements: Z-lines, entity labels, collision visualization in render.js","Performance benefits: Optimized rendering pipeline, cleaner separation of concerns","Integration changes: render.js calls AnimationRenderer.drawAnimatedEntities() for all entities","Result: No duplication of Z calculations, unified visual effects, maintainable rendering system"]}
{"type":"entity","name":"platformer-game:ai-script-system","entityType":"advanced_feature","observations":["FULL scripts: Complete Behavior Tree override, ignores base system entirely","PARTIAL scripts: Merges with base BT using priority system, enhanced behaviors","BONUS scripts: Additional capabilities layered on top of base system","Script manager: Async loading with LRU caching, performance monitoring","Runtime switching: Boss phase changes, dynamic script loading","Script registry: ENEMY_SCRIPTS Map with BOSS_SCRIPTS, ELITE_SCRIPTS, TEST_SCRIPTS","Validation: Type checking, behavior compatibility verification","Performance: Cache size limits, memory management, batch preloading","Debug interface: window.debugEnemyScripts for development monitoring","Integration: BaseEnemy.initializeScript(), consultBTForBehavior() merge logic"]}
{"type":"entity","name":"platformer-game:resource-management","entityType":"infrastructure_system","observations":["ResourceManager: Centralized asset loading, caching, memory management","Asset types: Images, audio, sprite sheets, skill icons","Loading strategies: Individual loading, batch preloading, progress tracking","Caching system: Asset reuse, memory optimization, unused asset cleanup","Skill icon system: Specialized loader load_skill_icon.js for icon sprite sheets","Asset validation: Path checking, format validation, error handling","Performance monitoring: Loading times, memory usage, cache hit rates","Integration points: Game initialization, runtime asset access, UI rendering","Memory management: unloadUnusedAssets(), asset lifecycle tracking","Error handling: Fallback assets, loading failure recovery, user feedback"]}
{"type":"entity","name":"platformer-game:ui-architecture","entityType":"interface_system","observations":["UI coordinator: ui.js handles state management, component coordination, accessibility","Menu system: menu.js with state transitions, settings, controls configuration","Character stats UI: character_stats_ui.js for stats panels, progress bars, overlays","Rendering coordination: render.js integrates UI with game world rendering","Input handling: UI-specific input processing, mouse/keyboard/controller support","Component architecture: Modular UI components, reusable interfaces","State management: UI state transitions, modal dialogs, overlay management","Performance: Efficient rendering, minimal DOM manipulation, optimized updates","Integration: Called during render phase, coordinates with game state","Accessibility: Screen reader support, keyboard navigation, visual feedback"]}
{"type":"entity","name":"platformer-game:game-state-management","entityType":"core_infrastructure","observations":["Centralized storage: game_state.js manages all game state, entity tracking","Player management: Array management, multiplayer support, player lifecycle","Enemy coordination: Entity registration, lifecycle management, AI coordination","World state: Game environment, boundaries, global game variables","Entity queries: getEntitiesByType(), getAllEntities(), entity filtering","State updates: updateEntity(), state synchronization, change notifications","Multiplayer ready: Supports multiple players, state replication patterns","Memory efficient: Optimized storage, cleanup mechanisms, performance monitoring","Integration points: All game systems access through centralized API","Debug support: State inspection, entity visualization, state validation"]}
{"type":"entity","name":"platformer-game:input-processing","entityType":"user_interaction","observations":["Multi-device support: Keyboard, mouse, gamepad/controller input handling","Input buffering: Debouncing, input queuing, frame-perfect input processing","Device detection: Automatic device recognition, fallback handling","Controller support: Gamepad API integration, button mapping, analog stick processing","State tracking: Key states, button presses, continuous input monitoring","Performance: Efficient polling, minimal CPU usage, optimized update cycles","Integration: input.js called every frame, global input state available","Accessibility: Keyboard-only navigation, customizable controls","Debug features: Input visualization, state logging, input testing tools","Configuration: Control customization, sensitivity settings, device preferences"]}
{"type":"entity","name":"platformer-game:development-guidelines","entityType":"standards_documentation","observations":["Coding standards: Vanilla JavaScript only, conservative library usage, consistent patterns","Project structure: Clear file organization, logical grouping, maintainable architecture","Testing procedures: Development scripts, debug interfaces, visual testing tools","Git workflow: Branch naming, commit standards, PR guidelines, code review process","Performance standards: 60 FPS target, optimized rendering, memory management","Quality assurance: Error handling, logging standards, user feedback systems","Documentation requirements: Code comments, API documentation, integration guides","Refactoring roadmap: 5-phase improvement plan, architectural enhancements","Community standards: Open source compatibility, accessibility compliance","Maintenance procedures: Regular reviews, update schedules, technical debt management"]}
{"type":"entity","name":"platformer-game:integration-patterns","entityType":"development_guide","observations":["Feature addition checklist: Check existing systems, choose appropriate file, follow patterns","Game loop integration: Add to update()/render() functions in game.js/render.js","Entity system extension: Extend BaseEnemy/Base classes, follow inheritance patterns","UI component integration: Add to ui.js, follow rendering coordination patterns","Asset integration: Use resource_manager.js, follow loading and caching patterns","Combat system extension: Integrate with combat_system.js, follow damage/effect patterns","AI behavior addition: Extend BT system, follow script integration patterns","Testing integration: Add debug interfaces, follow validation patterns","Documentation updates: Update PROJECT_FILE_GUIDE.md, maintain integration points","Performance considerations: Follow optimization patterns, monitor frame rates"]}
{"type":"entity","name":"platformer-game:skill-system-manager","entityType":"system_architecture","observations":["SkillTreeManager class: Central logic for skill unlocking and leveling","canUnlockSkill(): Checks prerequisites, skill points, and level requirements","unlockSkill(): Handles leveling progression with dynamic cost calculation","checkPrerequisites(): Supports skill_level, player_level, quest_completed, achievement_unlocked types","applyPassiveEffect(): Dot notation stat modifications (characterInfo.baseDefense, etc.)","getSkillLevel(): Current level tracking per skill","getSkillPointCost(): Dynamic calculation from levelCosts array","hasSkill(): Unlocked skill checking with backwards compatibility"]}
{"type":"entity","name":"platformer-game:micro-skill-progression","entityType":"system_architecture","observations":["4 progression systems for micro skill trees: OnePerRow, LevelBased, Absolute, Instant","OnePerRowSystem: 1 skill per row, requires previous row completion, 1 skill point cost","LevelBasedSystem: Unlocks at player levels (3,5,7,10), no skill points needed","AbsoluteSystem: All skills available for 1 point each, no row restrictions","InstantSystem: One per row but no skill point cost, instant unlocking","Progression delegation: MicroSkillTreeManager routes to appropriate system","canSelectMicroSkill(): System-specific validation logic","selectMicroSkill(): Applies effects and consumes resources per system rules"]}
{"type":"entity","name":"platformer-game:skill-ui-architecture","entityType":"system_architecture","observations":["Grid-based layout: 6√ó5 grid (30 positions) for main page + secondary page","Navigation system: WASD/arrow keys, Enter/Space for unlock, Escape to close","Visual states: üîì Available (blue), ‚úÖ Unlocked (green), üîí Locked (gray)","Cursor system: Yellow glow frame for current selection","Multi-player support: Keys 5,6,7,8 for players 1-4 to open skill trees","Debounce protection: Prevents rapid skill tree switching","Info panel: Shows prerequisites, costs, effects, current/next level comparison","Skill point display: Shows available points and costs for upgrades"]}
{"type":"entity","name":"platformer-game:skill-resource-system","entityType":"system_architecture","observations":["Resource types: MANA (magical skills), ENERGY (physical skills), NONE (no cost)","Data-driven costs: resourceCost and resourceType per skill definition","Resource validation: canAffordSkill() checks before consumption","Consumption timing: Resources consumed at skill activation start","Integration with combat: ResourceManager handles mana/energy tracking","Balance design: Mana for spells, Energy for physical abilities","Resource regeneration: External system handles mana/energy recovery","Cost modifiers: Skills can modify resource costs via resourceCostModifier"]}
{"type":"entity","name":"platformer-game:skill-leveling-system","entityType":"system_architecture","observations":["Dynamic costs: levelCosts array replaces static skillPointsCost","getSkillPointCost(): Calculates cost for current level dynamically","UI feedback: Shows '–ù—É–∂–Ω–∏ —Ç–æ—á–∫–∏ –∑–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ: X' instead of static values","Level progression: Skills can have 1-N levels with different costs","Upgrade tracking: currentLevel vs maxLevel validation","Cost scaling: Progressive difficulty (1,1,2 for basic skills)","Backwards compatibility: unlockedSkills set maintained alongside skillLevels map","Effect application: levelEffects arrays apply different bonuses per level"]}
{"type":"entity","name":"platformer-game:skill-prerequisites","entityType":"system_architecture","observations":["Prerequisites framework: skill_level, player_level, quest_completed, achievement_unlocked","skill_level type: Requires specific skill at minimum level","player_level type: Requires player to reach level threshold","quest_completed type: Future implementation for quest-based unlocks","achievement_unlocked type: Future implementation for achievement rewards","Validation logic: checkPrerequisites() processes all prerequisite types","Display text: Human-readable descriptions for UI feedback","Dependency chains: Skills can depend on other skills creating unlock trees"]}
{"type":"entity","name":"platformer-game:skill-combat-integration","entityType":"system_architecture","observations":["Damage modifiers: skillModifier applied as percentage multiplier in calculateDamage()","Execution timing: executionTime and cooldownTime as data-driven properties","Accuracy system: accuracyModifier affects hit chance calculations","Critical bonuses: criticalChanceModifier stacks with base critical chance","Target expansion: targetCountModifier enables multi-target attacks","Resource efficiency: resourceCostModifier reduces mana/energy requirements","Cooldown reduction: cooldownModifier decreases recovery times","Passive effects: levelEffects applied immediately on skill unlock/upgrade"]}
{"type":"relation","from":"platformer-game:collision-system","to":"platformer-game:collision-system-detailed","relationType":"has_implementation_details"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:combat-system-detailed","relationType":"has_implementation_details"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:ai-system-detailed","relationType":"has_implementation_details"}
{"type":"relation","from":"platformer-game:animation-system","to":"platformer-game:animation-system-detailed","relationType":"has_implementation_details"}
{"type":"relation","from":"platformer-game:combat-system","to":"platformer-game:current-combat-state","relationType":"has_current_state"}
{"type":"relation","from":"platformer-game:collision-system","to":"platformer-game:collision-mechanics-current","relationType":"has_current_state"}
{"type":"relation","from":"platformer-game:ai-system","to":"platformer-game:ai-behavior-current","relationType":"has_current_state"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:collision-system","relationType":"solves_problems_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:combat-system","relationType":"solves_problems_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:ai-system","relationType":"solves_problems_for"}
{"type":"relation","from":"platformer-game:problems-solutions","to":"platformer-game:animation-system","relationType":"solves_problems_for"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-system-manager","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:micro-skill-progression","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-ui-architecture","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-resource-system","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-leveling-system","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-prerequisites","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system","to":"platformer-game:skill-combat-integration","relationType":"has_architecture"}
{"type":"relation","from":"platformer-game:skill-system-manager","to":"platformer-game:combat-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:skill-resource-system","to":"platformer-game:resource-management","relationType":"uses"}
{"type":"relation","from":"platformer-game:skill-ui-architecture","to":"platformer-game:ui-architecture","relationType":"extends"}
{"type":"relation","from":"platformer-game:skill-combat-integration","to":"platformer-game:combat-system","relationType":"enhances"}
{"type":"entity","name":"platformer-game:combat-system-unification","entityType":"architectural_decision","observations":["Major architectural improvement that unified player and enemy attack systems","Eliminated separate damage application logic for enemies","All attacks now go through the unified CombatResolver system","Implemented on January 13, 2026","Solved multiple damage application bugs from enemy attacks","Before: Players used CombatResolver.resolveAttack(), enemies applied damage directly","After: All entities use CombatResolver.resolveAttackNoResourceCheck() or resolveAttack()"]}
{"type":"entity","name":"platformer-game:enemy-attack-integration","entityType":"system_integration","observations":["Enemy attacks now use resolveAttackNoResourceCheck() instead of direct damage application","Added skill type mapping from enemy animation types to combat skill types","ATTACK_1 maps to 'basic_attack_light', ATTACK_2 to 'secondary_attack_light', ATTACK_3/RUN_ATTACK to 'basic_attack_medium'","Enemies skip resource consumption since they don't have mana/energy pools","Damage calculation uses unified skill tree parameters for consistency","Combat events are properly generated for enemy attacks"]}
{"type":"entity","name":"platformer-game:enemy-attack-state-management","entityType":"fsm_improvement","observations":["Fixed EnemyAttackState to properly transition to 'enemy_idle' when animation completes","Prevents enemies from staying in attack state indefinitely","Ensures damageDealt flag is properly reset between attacks","Unified attack state lifecycle between players and enemies","Fixed potential infinite attack state loops","Animation completion detection uses frame-based checking"]}
{"type":"entity","name":"platformer-game:enemy-attack-cooldown-system","entityType":"balance_mechanic","observations":["Added 1.5 second cooldown between enemy attacks using BT Cooldown decorator","Prevents rapid-fire enemy attacks that could cause multiple hits","Ensures proper spacing between enemy attack animations","Balances combat tempo and prevents attack spam","Uses existing BT infrastructure for cooldown management","Cooldown applies to attack action in Behavior Tree sequences"]}
{"type":"entity","name":"platformer-game:combat-system-architecture-benefits","entityType":"architectural_benefit","observations":["Single unified combat system eliminates code duplication","Consistent damage calculation across all entity types","Skill tree integration works for both players and enemies","Easier to add new combat mechanics for any entity type","Better maintainability and debugging capabilities","Future-proof architecture for multiplayer combat","Centralized balance adjustments through skill tree parameters"]}
{"type":"relation","from":"platformer-game:combat-system-unification","to":"platformer-game:combat-system","relationType":"enhances"}
{"type":"relation","from":"platformer-game:enemy-attack-integration","to":"platformer-game:combat-system","relationType":"integrates_with"}
{"type":"relation","from":"platformer-game:enemy-attack-state-management","to":"platformer-game:animation-system","relationType":"improves"}
{"type":"relation","from":"platformer-game:enemy-attack-cooldown-system","to":"platformer-game:ai-system","relationType":"enhances"}
{"type":"relation","from":"platformer-game:combat-system-architecture-benefits","to":"platformer-game:project","relationType":"strengthens_architecture"}
